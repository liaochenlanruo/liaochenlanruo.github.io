{"title":"Perl捕获外部命令执行异常并继续运行后续代码","slug":"Perl捕获外部命令执行异常并继续运行后续代码","date":"2019-04-19T02:34:49.000Z","updated":"2022-01-08T02:16:28.411Z","comments":true,"path":"api/articles/Perl捕获外部命令执行异常并继续运行后续代码.json","excerpt":"在编写 perl 脚本时经常会调用外部命令，由于种种原因，会遇到外部命令执行异常，而导致整个脚本终止运行。这对于大的项目来说很不经济，因此，可以想办法越过这个异常并继续执行后续脚本。","covers":null,"content":"<p>在编写 perl 脚本时经常会调用外部命令，由于种种原因，会遇到外部命令执行异常，而导致整个脚本终止运行。这对于大的项目来说很不经济，因此，可以想办法越过这个异常并继续执行后续脚本。</p>\n<span id=\"more\"></span>\n<p>Examples：</p>\n</br>\n假设有一个外部命令“command”需要执行，将该命令存到一个数组当中：\n</br>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">my @arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"command\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</br>\n将外部命令的返回值赋给一个变量：\n</br>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">my <span class=\"token variable\">$return</span> <span class=\"token operator\">=</span> sysstem<span class=\"token punctuation\">(</span>@arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</br>\n判断返回值是否为“0”，0代表运行正常，任何非0的值均表示有运行异常。如果返回值不为0，则记录错误，然后继续运行后续代码：\n</br>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$return</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">&#123;</span>\n    print <span class=\"token string\">\"There are some errors when running the command!<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span><span class=\"token punctuation\">;</span>\n    command2<span class=\"token punctuation\">;</span><span class=\"token comment\">#继续运行其他命令</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n</br>\n<p>** 注：** 本方案仅在 Linux 系统下测试，不晓得 Windows 和 Mac 的返回值与 Linux 是否一致，Linux 中的 “core dump” 就可以如此来捕获。</p>\n","more":"<p>Examples：</p>\n</br>\n假设有一个外部命令“command”需要执行，将该命令存到一个数组当中：\n</br>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">my @arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"command\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</br>\n将外部命令的返回值赋给一个变量：\n</br>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">my <span class=\"token variable\">$return</span> <span class=\"token operator\">=</span> sysstem<span class=\"token punctuation\">(</span>@arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</br>\n判断返回值是否为“0”，0代表运行正常，任何非0的值均表示有运行异常。如果返回值不为0，则记录错误，然后继续运行后续代码：\n</br>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$return</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">&#123;</span>\n    print <span class=\"token string\">\"There are some errors when running the command!<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span><span class=\"token punctuation\">;</span>\n    command2<span class=\"token punctuation\">;</span><span class=\"token comment\">#继续运行其他命令</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n</br>\n<p>** 注：** 本方案仅在 Linux 系统下测试，不晓得 Windows 和 Mac 的返回值与 Linux 是否一致，Linux 中的 “core dump” 就可以如此来捕获。</p>","categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"perl","path":"api/tags/perl.json"},{"name":"编程","path":"api/tags/编程.json"}]}