{"title":"设置元素加载时间解决D3.js文字被图像覆盖的问题","slug":"设置元素加载时间解决D3.js文字被图像覆盖的问题","date":"2018-08-23T03:13:00.000Z","updated":"2024-03-11T13:07:17.381Z","comments":true,"path":"api/articles/设置元素加载时间解决D3.js文字被图像覆盖的问题.json","excerpt":"在绘制地图的时候，常常需要添加饼图，柱状图以及文字等。经常发现添加的元素被地图背景覆盖，无论在html文档中如何调整元素的顺序都没有用，百思不得其解。","covers":null,"content":"<p>在绘制地图的时候，常常需要添加饼图，柱状图以及文字等。经常发现添加的元素被地图背景覆盖，无论在html文档中如何调整元素的顺序都没有用，百思不得其解。</p>\n<span id=\"more\"></span>\n\n<p>D3.js默认按照代码顺序加载元素，后来想明白了，地图背景加载比较慢，而文字等小元素加载很快，导致小元素先被加载，背景元素后来加载进而覆盖在小元素之上。解决的思路就是给小元素设置加载时间，让其在背景元素加载完之后再加载，用到的是“setTimeout”函数。</p>\n<p><strong>具体用法如下：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">      小元素的执行代码写在此处</span><br><span class=\"line\">                       &#125;, 3000);//延迟3s执行</span><br></pre></td></tr></table></figure>\n","more":"<p>D3.js默认按照代码顺序加载元素，后来想明白了，地图背景加载比较慢，而文字等小元素加载很快，导致小元素先被加载，背景元素后来加载进而覆盖在小元素之上。解决的思路就是给小元素设置加载时间，让其在背景元素加载完之后再加载，用到的是“setTimeout”函数。</p>\n<p><strong>具体用法如下：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">      小元素的执行代码写在此处</span><br><span class=\"line\">                       &#125;, 3000);//延迟3s执行</span><br></pre></td></tr></table></figure>","categories":[{"name":"地信","path":"api/categories/地信.json"}],"tags":[{"name":"地图","path":"api/tags/地图.json"}]}