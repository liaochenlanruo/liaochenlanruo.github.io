{"title":"perl循环调用python爬虫批量下载喜马拉雅音频","slug":"perl循环调用python爬虫批量下载喜马拉雅音频","date":"2018-09-16T11:30:38.000Z","updated":"2024-03-11T13:07:17.322Z","comments":true,"path":"api/articles/perl循环调用python爬虫批量下载喜马拉雅音频.json","excerpt":"手机下载喜马拉雅音频后，获得的音频文件虽然可以转成mp3格式，但其文件名却是一长串字符串，无法辨别是哪一集，网上找了各种工具，都有局限性，庆幸的是发现了一个python爬虫可以在电脑上实行批零下载文件名正确的音频，项目地址如下：","covers":null,"content":"<p>手机下载喜马拉雅音频后，获得的音频文件虽然可以转成mp3格式，但其文件名却是一长串字符串，无法辨别是哪一集，网上找了各种工具，都有局限性，庆幸的是发现了一个python爬虫可以在电脑上实行批零下载文件名正确的音频，项目地址如下：</p>\n<span id=\"more\"></span>\n\n\n<pre><code>    xmlyfetcher用于下载喜马拉雅歌曲资源，可以下载单个音频资源，也可以下载整个专辑. 项目地址：https://github.com/smallmuou/xmlyfetcher\n</code></pre>\n<p>运行之后发现一个小问题，该脚本只能爬取一页的内容，于是写了一个perl脚本循环调用该爬虫，实现一个脚本下载一部作品。<br><strong>脚本如下，运行前做适当修改(专辑地址、保存路径、页数)：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/perl</span></span><br><span class=\"line\"></span><br><span class=\"line\">use strict;</span><br><span class=\"line\"></span><br><span class=\"line\">use warnings;</span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$url</span> = <span class=\"string\">&quot;https://www.ximalaya.com/youshengshu/16951017/&quot;</span>;<span class=\"comment\">#专辑地址</span></span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$dir</span> = <span class=\"string\">&quot;/mnt/e/BaiduYunDownload/Ximalaya/daomubiji2&quot;</span>;<span class=\"comment\">#文件保存路径，提前创建</span></span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$num</span> = 29;<span class=\"comment\">#专辑总页数</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (my <span class=\"variable\">$i</span>=1;<span class=\"variable\">$i</span>&lt;=<span class=\"variable\">$num</span>;<span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$url2</span> = <span class=\"variable\">$url</span> . <span class=\"string\">&quot;p<span class=\"variable\">$i</span>/&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">system (<span class=\"string\">&quot;xmlyfetcher -o <span class=\"variable\">$dir</span> <span class=\"variable\">$url2</span>&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","more":"<pre><code>    xmlyfetcher用于下载喜马拉雅歌曲资源，可以下载单个音频资源，也可以下载整个专辑. 项目地址：https://github.com/smallmuou/xmlyfetcher\n</code></pre>\n<p>运行之后发现一个小问题，该脚本只能爬取一页的内容，于是写了一个perl脚本循环调用该爬虫，实现一个脚本下载一部作品。<br><strong>脚本如下，运行前做适当修改(专辑地址、保存路径、页数)：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/perl</span></span><br><span class=\"line\"></span><br><span class=\"line\">use strict;</span><br><span class=\"line\"></span><br><span class=\"line\">use warnings;</span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$url</span> = <span class=\"string\">&quot;https://www.ximalaya.com/youshengshu/16951017/&quot;</span>;<span class=\"comment\">#专辑地址</span></span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$dir</span> = <span class=\"string\">&quot;/mnt/e/BaiduYunDownload/Ximalaya/daomubiji2&quot;</span>;<span class=\"comment\">#文件保存路径，提前创建</span></span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$num</span> = 29;<span class=\"comment\">#专辑总页数</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (my <span class=\"variable\">$i</span>=1;<span class=\"variable\">$i</span>&lt;=<span class=\"variable\">$num</span>;<span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">my <span class=\"variable\">$url2</span> = <span class=\"variable\">$url</span> . <span class=\"string\">&quot;p<span class=\"variable\">$i</span>/&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">system (<span class=\"string\">&quot;xmlyfetcher -o <span class=\"variable\">$dir</span> <span class=\"variable\">$url2</span>&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"音乐","path":"api/tags/音乐.json"},{"name":"爬虫","path":"api/tags/爬虫.json"}]}