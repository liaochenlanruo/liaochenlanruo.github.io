{"title":"Shinyä»å…¥é—¨åˆ°å…¥å®šâ€”â€”12-Tidy evaluation","slug":"Shinyä»å…¥é—¨åˆ°å…¥å®šâ€”â€”12-Tidy-evaluation","date":"2024-04-27T12:58:06.000Z","updated":"2024-04-27T12:59:49.755Z","comments":true,"path":"api/articles/Shinyä»å…¥é—¨åˆ°å…¥å®šâ€”â€”12-Tidy-evaluation.json","excerpt":null,"covers":["https://d33wubrfki0l68.cloudfront.net/2c131334332cadef7ec2b3e3bdf32689f3f1ebc6/f6143/demos/action-tidy/messed-up.png","https://d33wubrfki0l68.cloudfront.net/878d4b65fc1671d180c91732193924ce2f3b3ea8/ca76b/demos/action-tidy/tidied-up.png","https://d33wubrfki0l68.cloudfront.net/9defdeb8a9d4c779898f02f540feb95283b62c65/23a54/demos/action-tidy/ggplot2-scatter.png","https://d33wubrfki0l68.cloudfront.net/74cf9f3e211b5f2430a03a5c960da0ab63a1e29e/41abe/demos/action-tidy/ggplot2-swarm.png","https://d33wubrfki0l68.cloudfront.net/4b67467c8ad6e40cb3fffad24222564bf4858788/ae5b1/demos/action-tidy/dplyr.png","https://d33wubrfki0l68.cloudfront.net/a2b57fbb1d8a118a0410942708a051e92355b7a6/a504d/demos/action-tidy/user-supplied.png","https://d33wubrfki0l68.cloudfront.net/20b7acd57783cbc15cf0d64d8964bba1e093ba06/1c155/demos/action-tidy/across.png","https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg","https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png"],"content":"<h1 id=\"æ•´æ´è¯„ä¼°\"><a href=\"#æ•´æ´è¯„ä¼°\" class=\"headerlink\" title=\"æ•´æ´è¯„ä¼°\"></a>æ•´æ´è¯„ä¼°</h1><p>å¦‚æœä½ åœ¨ä½¿ç”¨Shinyä¸tidyverseï¼Œé‚£ä¹ˆä½ å‡ ä¹è‚¯å®šä¼šé‡åˆ°æ•´æ´è¯„ä¼°ç¼–ç¨‹çš„æŒ‘æˆ˜ã€‚æ•´æ´è¯„ä¼°åœ¨tidyverseä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½¿äº¤äº’å¼æ•°æ®æ¢ç´¢æ›´åŠ æµç•…ï¼Œä½†å®ƒä¹Ÿæœ‰ä»£ä»·ï¼šå¾ˆéš¾é—´æ¥å¼•ç”¨å˜é‡ï¼Œå› æ­¤ç¼–ç¨‹èµ·æ¥ä¹Ÿæ›´åŠ å›°éš¾ã€‚</p>\n<p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åœ¨Shinyåº”ç”¨ç¨‹åºä¸­åŒ…è£…ggplot2å’Œdplyrå‡½æ•°ã€‚ï¼ˆå¦‚æœä½ ä¸ä½¿ç”¨tidyverseï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™ä¸€ç« ğŸ˜„ã€‚ï¼‰å°†ggplot2å’Œdplyrå‡½æ•°åŒ…è£…åœ¨å‡½æ•°å’ŒåŒ…ä¸­çš„æŠ€æœ¯ç•¥æœ‰ä¸åŒï¼Œå¹¶ä¸”åœ¨å…¶ä»–èµ„æºå¦‚<a href=\"http://ggplot2.tidyverse.org/dev/articles/ggplot2-in-packages.html\">â€œåœ¨åŒ…ä¸­ä½¿ç”¨ggplot2â€</a>æˆ–<a href=\"http://dplyr.tidyverse.org/articles/programming.html\">â€œä½¿ç”¨dplyrç¼–ç¨‹â€</a>ä¸­æœ‰æ‰€æ¶µç›–ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">library<span class=\"punctuation\">(</span>shiny<span class=\"punctuation\">)</span></span><br><span class=\"line\">library<span class=\"punctuation\">(</span>dplyr<span class=\"punctuation\">,</span> warn.conflicts <span class=\"operator\">=</span> <span class=\"literal\">FALSE</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">library<span class=\"punctuation\">(</span>ggplot2<span class=\"punctuation\">)</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"12-1-åŠ¨æœº\"><a href=\"#12-1-åŠ¨æœº\" class=\"headerlink\" title=\"12.1 åŠ¨æœº\"></a>12.1 åŠ¨æœº</h2><p>å‡è®¾æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå…è®¸ä½ è¿‡æ»¤ä¸€ä¸ªæ•°å€¼å˜é‡ï¼Œä»¥é€‰æ‹©å¤§äºæŸä¸ªé˜ˆå€¼çš„è¡Œã€‚ä½ å¯èƒ½ä¼šå†™å‡ºç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_vars <span class=\"operator\">&lt;-</span> <span class=\"built_in\">c</span><span class=\"punctuation\">(</span><span class=\"string\">&quot;carat&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;depth&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;table&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;price&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;z&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> num_vars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  numericInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Minimum&quot;</span><span class=\"punctuation\">,</span> value <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;output&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  data <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span>diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>output <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span>head<span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/2c131334332cadef7ec2b3e3bdf32689f3f1ebc6/f6143/demos/action-tidy/messed-up.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/2c131334332cadef7ec2b3e3bdf32689f3f1ebc6/f6143/demos/action-tidy/messed-up.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"å›¾12.1 ä¸€ä¸ªåº”ç”¨ç¨‹åºè¯•å›¾é€‰æ‹©ç”¨æˆ·é€‰å®šå˜é‡ä¸­å¤§äºé˜ˆå€¼çš„è¡Œ\"></p>\n<p>ä»<code>å›¾12.1</code>ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¯¥åº”ç”¨ç¨‹åºå¯ä»¥æ— é”™è¯¯åœ°è¿è¡Œï¼Œä½†å®ƒå¹¶æ²¡æœ‰è¿”å›æ­£ç¡®çš„ç»“æœâ€”â€”æ‰€æœ‰çš„è¡Œä¸­ï¼Œé’»çŸ³çš„å‡€é‡ï¼ˆ<code>carat</code>ï¼‰å€¼éƒ½å°äº1ã€‚æœ¬ç« çš„ç›®æ ‡æ˜¯å¸®åŠ©ä½ ç†è§£ä¸ºä»€ä¹ˆè¿™ä¸èµ·ä½œç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆdplyrè®¤ä¸ºä½ è¯·æ±‚çš„æ˜¯<code>filter(diamonds, &quot;carat&quot; &gt; 1)</code>ã€‚</p>\n<p>è¿™æ˜¯ä¸€ä¸ª<code>é—´æ¥å¼•ç”¨</code>çš„é—®é¢˜ï¼šé€šå¸¸åœ¨ä½¿ç”¨tidyverseå‡½æ•°æ—¶ï¼Œä½ ä¼šç›´æ¥åœ¨å‡½æ•°è°ƒç”¨ä¸­è¾“å…¥å˜é‡çš„åç§°ã€‚ä½†ç°åœ¨ä½ æƒ³è¦é—´æ¥å¼•ç”¨å®ƒï¼šå˜é‡ï¼ˆ<code>carat</code>ï¼‰å­˜å‚¨åœ¨å¦ä¸€ä¸ªå˜é‡ï¼ˆ<code>input$var</code>ï¼‰ä¸­ã€‚</p>\n<p>è¿™å¥è¯å¯èƒ½å¯¹ä½ æ¥è¯´å¾ˆç›´è§‚ï¼Œä½†æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºæˆ‘åœ¨è¿™é‡Œç”¨â€œå˜é‡â€æ¥æŒ‡ä»£ä¸¤ç§ç•¥æœ‰ä¸åŒçš„äº‹ç‰©ã€‚å¦‚æœæˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªæ–°æœ¯è¯­æ¥æ¶ˆé™¤è¿™ä¸¤ç§ç”¨æ³•ä¹‹é—´çš„æ­§ä¹‰ï¼Œé‚£ä¹ˆç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ä¼šæ›´å®¹æ˜“ï¼š</p>\n<ul>\n<li><p>ç¯å¢ƒå˜é‡ï¼ˆ<strong>env-variable</strong>ï¼‰æ˜¯ä¸€ä¸ªâ€œç¼–ç¨‹â€å˜é‡ï¼Œä½ ç”¨<code>&lt;-</code>æ¥åˆ›å»ºã€‚<code>input$var</code>æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚</p>\n</li>\n<li><p>æ•°æ®å˜é‡ï¼ˆ<strong>data-variable</strong>ï¼‰æ˜¯å­˜å‚¨åœ¨æ•°æ®æ¡†ä¸­çš„â€œç»Ÿè®¡â€å˜é‡ã€‚<code>carat</code>æ˜¯ä¸€ä¸ªæ•°æ®å˜é‡ã€‚</p>\n</li>\n</ul>\n<p>æœ‰äº†è¿™äº›æ–°æœ¯è¯­ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ¥šåœ°é˜è¿°é—´æ¥å¼•ç”¨çš„é—®é¢˜ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®å˜é‡ï¼ˆ<code>carat</code>ï¼‰å­˜å‚¨åœ¨ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼ˆ<code>input$var</code>ï¼‰ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥å‘Šè¯‰dplyrè¿™ä¸€ç‚¹ã€‚æ ¹æ®ä½ æ‰€ä½¿ç”¨çš„å‡½æ•°æ˜¯â€œæ•°æ®æ©è”½â€å‡½æ•°è¿˜æ˜¯â€œæ•´æ´é€‰æ‹©â€å‡½æ•°ï¼Œå®ç°è¿™ä¸€ç‚¹çš„æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚</p>\n<h2 id=\"12-2-æ•°æ®æ©è”½\"><a href=\"#12-2-æ•°æ®æ©è”½\" class=\"headerlink\" title=\"12.2 æ•°æ®æ©è”½\"></a>12.2 æ•°æ®æ©è”½</h2><p>æ•°æ®æ©è”½å‡½æ•°å…è®¸ä½ åœ¨â€œå½“å‰â€æ•°æ®æ¡†ä¸­ä½¿ç”¨å˜é‡ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„è¯­æ³•ã€‚å®ƒåœ¨è®¸å¤šdplyrå‡½æ•°ï¼ˆå¦‚<a href=\"https://dplyr.tidyverse.org/reference/arrange.html\">arrange()</a>ã€<a href=\"https://dplyr.tidyverse.org/reference/filter.html\">filter()</a>ã€<a href=\"https://dplyr.tidyverse.org/reference/group_by.html\">group_by()</a>ã€<a href=\"https://dplyr.tidyverse.org/reference/mutate.html\">mutate()</a>å’Œ<a href=\"https://dplyr.tidyverse.org/reference/summarise.html\">summarise()</a>ï¼‰ä»¥åŠggplot2çš„<a href=\"https://ggplot2.tidyverse.org/reference/aes.html\">aes()</a>ä¸­ä½¿ç”¨ã€‚æ•°æ®æ©è”½å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸ä½ ä½¿ç”¨æ•°æ®å˜é‡ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„è¯­æ³•ã€‚</p>\n<h3 id=\"12-2-1-å¼€å§‹\"><a href=\"#12-2-1-å¼€å§‹\" class=\"headerlink\" title=\"12.2.1 å¼€å§‹\"></a>12.2.1 å¼€å§‹</h3><p>è®©æˆ‘ä»¬ä»è°ƒç”¨<code>filter()</code>å‡½æ•°å¼€å§‹ï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªæ•°æ®å˜é‡ï¼ˆ<code>carat</code>ï¼‰å’Œä¸€ä¸ªç¯å¢ƒå˜é‡ï¼ˆ<code>min</code>ï¼‰ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">min</span> <span class=\"operator\">&lt;-</span> 1</span><br><span class=\"line\">diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>carat <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; # A tibble: 17,502 Ã— 10</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   carat cut       color clarity depth table price     x     y     z</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1  1.17 Very Good J     I1       60.2    61  2774  6.83  6.9   4.13</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 2  1.01 Premium   F     I1       61.8    60  2781  6.39  6.36  3.94</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 3  1.01 Fair      E     I1       64.5    58  2788  6.29  6.21  4.03</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 4  1.01 Premium   H     SI2      62.7    59  2788  6.31  6.22  3.93</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 5  1.05 Very Good J     SI2      63.2    56  2789  6.49  6.45  4.09</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 6  1.05 Fair      J     SI2      65.8    59  2789  6.41  6.27  4.18</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; # â€¦ with 17,496 more rows</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸åŸºç¡€Rçš„ç­‰æ•ˆä»£ç è¿›è¡Œæ¯”è¾ƒï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diamonds<span class=\"punctuation\">[</span>diamonds<span class=\"operator\">$</span>carat <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n<p>åœ¨å¤§å¤šæ•°ï¼ˆä½†ä¸æ˜¯å…¨éƒ¨ï¼‰åŸºç¡€Rå‡½æ•°ä¸­ï¼Œä½ éœ€è¦ä½¿ç”¨<code>$</code>æ¥å¼•ç”¨æ•°æ®å˜é‡ã€‚è¿™æ„å‘³ç€ä½ ç»å¸¸éœ€è¦å¤šæ¬¡é‡å¤æ•°æ®æ¡†çš„åç§°ï¼Œä½†è¿™ç¡®å®æ¸…æ¥šåœ°è¡¨æ˜äº†ä»€ä¹ˆæ˜¯æ•°æ®å˜é‡ï¼Œä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡ã€‚è¿™ä¹Ÿä½¿å¾—é—´æ¥å¼•ç”¨å˜å¾—ç›´æ¥æ˜äº†ï¼Œå› ä¸ºä½ å¯ä»¥å°†æ•°æ®å˜é‡çš„åç§°å­˜å‚¨åœ¨ä¸€ä¸ªç¯å¢ƒå˜é‡ä¸­ï¼Œç„¶åä»<code>$</code>åˆ‡æ¢åˆ°<code>[[</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var <span class=\"operator\">&lt;-</span> <span class=\"string\">&quot;carat&quot;</span></span><br><span class=\"line\">diamonds<span class=\"punctuation\">[</span>diamonds<span class=\"punctuation\">[[</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ•´æ´è¯„ä¼°æ¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•å°†<code>$</code>é‡æ–°åŠ å…¥è¿›æ¥ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨æ•°æ®æ©è”½å‡½æ•°ä¸­ï¼Œå¦‚æœä½ æƒ³æ˜ç¡®è¡¨ç¤ºä½ æ˜¯åœ¨è°ˆè®ºæ•°æ®å˜é‡è¿˜æ˜¯ç¯å¢ƒå˜é‡ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>.data</code>æˆ–<code>.env</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"operator\">$</span>carat <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä»$åˆ‡æ¢åˆ°[[ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br></pre></td></tr></table></figure>\n<p>è®©æˆ‘ä»¬é€šè¿‡æ›´æ–°æœ¬ç« å¼€å§‹æ—¶ä½¿ç”¨çš„æœåŠ¡å™¨å‡½æ•°æ¥æ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ•ˆï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_vars <span class=\"operator\">&lt;-</span> <span class=\"built_in\">c</span><span class=\"punctuation\">(</span><span class=\"string\">&quot;carat&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;depth&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;table&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;price&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;z&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> num_vars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  numericInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Minimum&quot;</span><span class=\"punctuation\">,</span> value <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;output&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  data <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span>diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span>input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>output <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span>head<span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/878d4b65fc1671d180c91732193924ce2f3b3ea8/ca76b/demos/action-tidy/tidied-up.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/878d4b65fc1671d180c91732193924ce2f3b3ea8/ca76b/demos/action-tidy/tidied-up.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"å›¾12.2 æˆ‘ä»¬çš„åº”ç”¨ç°åœ¨è¿è¡Œè‰¯å¥½ï¼Œå› ä¸ºæˆ‘ä»¬æ˜ç¡®äº†.dataå’Œ.envä»¥åŠ[[ä¸$çš„åŒºåˆ«ã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-tidied-upæŸ¥çœ‹å®æ—¶æ•ˆæœ\"></p>\n<p><code>å›¾12.2</code>æ˜¾ç¤ºæˆ‘ä»¬å·²ç»æˆåŠŸäº†â€”â€”æˆ‘ä»¬åªçœ‹åˆ°å…‹æ‹‰å€¼å¤§äº1çš„é’»çŸ³ã€‚ç°åœ¨ä½ å·²ç»äº†è§£äº†åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†å¼€å‘å‡ ä¸ªæ›´ç°å®ä½†ä»ç„¶ç®€å•çš„Shinyåº”ç”¨ã€‚</p>\n<h3 id=\"12-2-2-ç¤ºä¾‹ï¼šggplot2\"><a href=\"#12-2-2-ç¤ºä¾‹ï¼šggplot2\" class=\"headerlink\" title=\"12.2.2 ç¤ºä¾‹ï¼šggplot2\"></a>12.2.2 ç¤ºä¾‹ï¼šggplot2</h3><p>è®©æˆ‘ä»¬å°†è¿™ä¸ªæƒ³æ³•åº”ç”¨äºåŠ¨æ€ç»˜å›¾ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡é€‰æ‹©è¦åœ¨<code>x</code>è½´å’Œ<code>y</code>è½´ä¸Šæ˜¾ç¤ºçš„å˜é‡æ¥åˆ›å»ºæ•£ç‚¹å›¾ã€‚ç»“æœå¦‚<code>å›¾12.3</code>æ‰€ç¤ºã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;X variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Y variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  plotOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;plot&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>plot <span class=\"operator\">&lt;-</span> renderPlot<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    ggplot<span class=\"punctuation\">(</span>iris<span class=\"punctuation\">,</span> aes<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>x<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> .data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>y<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">+</span></span><br><span class=\"line\">      geom_point<span class=\"punctuation\">(</span>position <span class=\"operator\">=</span> ggforce<span class=\"operator\">::</span>position_auto<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span> res <span class=\"operator\">=</span> <span class=\"number\">96</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<table>\n<tr>\n<td><img src=\"https://d33wubrfki0l68.cloudfront.net/9defdeb8a9d4c779898f02f540feb95283b62c65/23a54/demos/action-tidy/ggplot2-scatter.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/9defdeb8a9d4c779898f02f540feb95283b62c65/23a54/demos/action-tidy/ggplot2-scatter.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></td>\n<td><img src=\"https://d33wubrfki0l68.cloudfront.net/74cf9f3e211b5f2430a03a5c960da0ab63a1e29e/41abe/demos/action-tidy/ggplot2-swarm.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/74cf9f3e211b5f2430a03a5c960da0ab63a1e29e/41abe/demos/action-tidy/ggplot2-swarm.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></td>\n</tr>\n<tr>\n<td colspan=\"2\">å›¾12.3 ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå…è®¸æ‚¨é€‰æ‹©è¦åœ¨xè½´å’Œyè½´ä¸Šç»˜åˆ¶çš„å˜é‡ã€‚è¯·è®¿é—®<a href=\"https://hadley.shinyapps.io/ms-ggplot2\">https://hadley.shinyapps.io/ms-ggplot2</a>æŸ¥çœ‹å®æ—¶æ•ˆæœ</td>\n</tr>\n</table>\n\n<p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†<a href=\"https://ggforce.data-imaginist.com/reference/position_auto.html\">ggforce::position_auto()</a>ï¼Œè¿™æ ·æ— è®ºxå’Œyå˜é‡æ˜¯è¿ç»­çš„è¿˜æ˜¯ç¦»æ•£çš„ï¼Œ<a href=\"https://ggplot2.tidyverse.org/reference/geom_point.html\">geom_point()</a>éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚æˆ–è€…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©ç”¨æˆ·é€‰æ‹©geomã€‚ä¸‹é¢çš„åº”ç”¨ç¨‹åºä½¿ç”¨<a href=\"https://rdrr.io/r/base/switch.html\">switch()</a>è¯­å¥ç”Ÿæˆä¸€ä¸ªååº”æ€§çš„geomï¼Œç¨åä¼šå°†å…¶æ·»åŠ åˆ°å›¾ä¸­ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;X variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Y variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;geom&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;geom&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">c</span><span class=\"punctuation\">(</span><span class=\"string\">&quot;point&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;smooth&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;jitter&quot;</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  plotOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;plot&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  plot_geom <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"built_in\">switch</span><span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>geom<span class=\"punctuation\">,</span></span><br><span class=\"line\">      point <span class=\"operator\">=</span> geom_point<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      smooth <span class=\"operator\">=</span> geom_smooth<span class=\"punctuation\">(</span>se <span class=\"operator\">=</span> <span class=\"literal\">FALSE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      jitter <span class=\"operator\">=</span> geom_jitter<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    <span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  output<span class=\"operator\">$</span>plot <span class=\"operator\">&lt;-</span> renderPlot<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    ggplot<span class=\"punctuation\">(</span>iris<span class=\"punctuation\">,</span> aes<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>x<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> .data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>y<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">+</span></span><br><span class=\"line\">      plot_geom<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span> res <span class=\"operator\">=</span> <span class=\"number\">96</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ˜¯ä½¿ç”¨ç”¨æˆ·é€‰æ‹©çš„å˜é‡è¿›è¡Œç¼–ç¨‹æ—¶é¢ä¸´çš„æŒ‘æˆ˜ä¹‹ä¸€ï¼šä½ çš„ä»£ç å¿…é¡»å˜å¾—æ›´åŠ å¤æ‚ï¼Œä»¥å¤„ç†ç”¨æˆ·å¯èƒ½ç”Ÿæˆçš„æ‰€æœ‰æƒ…å†µã€‚</p>\n<h3 id=\"12-2-3-ç¤ºä¾‹ï¼šdplyr\"><a href=\"#12-2-3-ç¤ºä¾‹ï¼šdplyr\" class=\"headerlink\" title=\"12.2.3 ç¤ºä¾‹ï¼šdplyr\"></a>12.2.3 ç¤ºä¾‹ï¼šdplyr</h3><p>åŒæ ·çš„æŠ€æœ¯ä¹Ÿé€‚ç”¨äºdplyrã€‚ä¸‹é¢çš„åº”ç”¨ç¨‹åºæ‰©å±•äº†å‰é¢ç®€å•çš„ç¤ºä¾‹ï¼Œå…è®¸æ‚¨é€‰æ‹©ä¸€ä¸ªå˜é‡è¿›è¡Œè¿‡æ»¤ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€å°å€¼è¿›è¡Œé€‰æ‹©ï¼Œä»¥åŠé€‰æ‹©ä¸€ä¸ªå˜é‡è¿›è¡Œæ’åºã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Select variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  sliderInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Minimum value&quot;</span><span class=\"punctuation\">,</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span> <span class=\"built_in\">min</span> <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span> <span class=\"built_in\">max</span> <span class=\"operator\">=</span> <span class=\"number\">100</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;sort&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Sort by&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  observeEvent<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">,</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    rng <span class=\"operator\">&lt;-</span> <span class=\"built_in\">range</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    updateSliderInput<span class=\"punctuation\">(</span></span><br><span class=\"line\">      session<span class=\"punctuation\">,</span> <span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">      value <span class=\"operator\">=</span> rng<span class=\"punctuation\">[[</span><span class=\"number\">1</span><span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">      <span class=\"built_in\">min</span> <span class=\"operator\">=</span> rng<span class=\"punctuation\">[[</span><span class=\"number\">1</span><span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">      <span class=\"built_in\">max</span> <span class=\"operator\">=</span> rng<span class=\"punctuation\">[[</span><span class=\"number\">2</span><span class=\"punctuation\">]</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">    <span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>sort<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/4b67467c8ad6e40cb3fffad24222564bf4858788/ae5b1/demos/action-tidy/dplyr.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/4b67467c8ad6e40cb3fffad24222564bf4858788/ae5b1/demos/action-tidy/dplyr.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"å›¾12.4 ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå…è®¸æ‚¨é€‰æ‹©ä¸€ä¸ªå˜é‡ä½œä¸ºé˜ˆå€¼ï¼Œå¹¶é€‰æ‹©å¦‚ä½•å¯¹ç»“æœè¿›è¡Œæ’åºã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-dplyr/æŸ¥çœ‹å®æ—¶æ•ˆæœ\"></p>\n<p>å¤§å¤šæ•°å…¶ä»–é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ç»“åˆ<code>.data</code>å’Œæ‚¨çš„ç°æœ‰ç¼–ç¨‹æŠ€èƒ½æ¥è§£å†³ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦æ¡ä»¶æ€§åœ°ä»¥å‡åºæˆ–é™åºè¿›è¡Œæ’åºï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Sort by&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  checkboxInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;desc&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Descending order?&quot;</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  sorted <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>desc<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">,</span> desc<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span> <span class=\"keyword\">else</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">,</span> .data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span>sorted<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>éšç€ä½ æä¾›æ›´å¤šæ§åˆ¶é€‰é¡¹ï¼Œä½ ä¼šå‘ç°ä»£ç å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªæ—¢å…¨é¢åˆå‹å¥½çš„ç”¨æˆ·ç•Œé¢ä¹Ÿå˜å¾—è¶Šæ¥è¶Šéš¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸€ç›´ä¸“æ³¨äºæ•°æ®åˆ†æçš„ä»£ç å·¥å…·ï¼šåˆ›å»ºå¥½çš„ç”¨æˆ·ç•Œé¢çœŸçš„éå¸¸éš¾ï¼</p>\n<h3 id=\"12-2-4-ç”¨æˆ·æä¾›çš„æ•°æ®\"><a href=\"#12-2-4-ç”¨æˆ·æä¾›çš„æ•°æ®\" class=\"headerlink\" title=\"12.2.4 ç”¨æˆ·æä¾›çš„æ•°æ®\"></a>12.2.4 ç”¨æˆ·æä¾›çš„æ•°æ®</h3><p>åœ¨ç»§ç»­è®¨è®ºæ•´æ´é€‰æ‹©ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®¨è®ºæœ€åä¸€ä¸ªè¯é¢˜ï¼šç”¨æˆ·æä¾›çš„æ•°æ®ã€‚ä»¥<code>å›¾12.5</code>ä¸­æ˜¾ç¤ºçš„è¿™ä¸ªåº”ç”¨ç¨‹åºä¸ºä¾‹ï¼šå®ƒå…è®¸ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ªtsvæ–‡ä»¶ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªå˜é‡å¹¶æ ¹æ®è¯¥å˜é‡è¿›è¡Œç­›é€‰ã€‚å®ƒé€‚ç”¨äºç»å¤§å¤šæ•°ä½ å¯èƒ½ä¼šå°è¯•çš„è¾“å…¥ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  fileInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;dataset&quot;</span><span class=\"punctuation\">,</span> accept <span class=\"operator\">=</span> <span class=\"string\">&quot;.tsv&quot;</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> character<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  numericInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span> <span class=\"built_in\">min</span> <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span> step <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;output&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  data <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>data<span class=\"punctuation\">)</span></span><br><span class=\"line\">    vroom<span class=\"operator\">::</span>vroom<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>data<span class=\"operator\">$</span>datapath<span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  observeEvent<span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    updateSelectInput<span class=\"punctuation\">(</span>session<span class=\"punctuation\">,</span> <span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  observeEvent<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">,</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    val <span class=\"operator\">&lt;-</span> data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">    updateNumericInput<span class=\"punctuation\">(</span>session<span class=\"punctuation\">,</span> <span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> value <span class=\"operator\">=</span> <span class=\"built_in\">min</span><span class=\"punctuation\">(</span>val<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  output<span class=\"operator\">$</span>output <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">)</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      head<span class=\"punctuation\">(</span><span class=\"number\">10</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/a2b57fbb1d8a118a0410942708a051e92355b7a6/a504d/demos/action-tidy/user-supplied.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/a2b57fbb1d8a118a0410942708a051e92355b7a6/a504d/demos/action-tidy/user-supplied.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"å›¾12.5 ä¸€ä¸ªè¿‡æ»¤ç”¨æˆ·æä¾›çš„æ•°æ®çš„åº”ç”¨ç¨‹åºï¼Œå…·æœ‰ä»¤äººæƒŠè®¶çš„æ•…éšœæ¨¡å¼ã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-user-supplied/æŸ¥çœ‹å®æ—¶æ•ˆæœ\"></p>\n<p>è¿™é‡Œä½¿ç”¨<a href=\"https://dplyr.tidyverse.org/reference/filter.html\">filter()</a>æœ‰ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬æŠŠå¯¹<code>filter()</code>çš„è°ƒç”¨æå–å‡ºæ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¹‹å¤–ç›´æ¥æ“ä½œå®ƒï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df <span class=\"operator\">&lt;-</span> data.frame<span class=\"punctuation\">(</span>x <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span> y <span class=\"operator\">=</span> <span class=\"number\">2</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">input <span class=\"operator\">&lt;-</span> <span class=\"built_in\">list</span><span class=\"punctuation\">(</span>var <span class=\"operator\">=</span> <span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">min</span> <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">df <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   x y</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1 1 2</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœä½ è¯•éªŒè¿™æ®µä»£ç ï¼Œä½ ä¼šå‘ç°å®ƒå¯¹äºç»å¤§å¤šæ•°æ•°æ®æ¡†éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ï¼šå¦‚æœæ•°æ®æ¡†ä¸­åŒ…å«ä¸€ä¸ªåä¸º<code>input</code>çš„å˜é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df <span class=\"operator\">&lt;-</span> data.frame<span class=\"punctuation\">(</span>x <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span> y <span class=\"operator\">=</span> <span class=\"number\">2</span><span class=\"punctuation\">,</span> input <span class=\"operator\">=</span> <span class=\"number\">3</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">df <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; Error in `filter()`:</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; ! Problem while computing `..1 = .data[[&quot;x&quot;]] &gt; input$min`.</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; Caused by error in `input$min`:</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; ! $ operator is invalid for atomic vectors</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬æ”¶åˆ°ä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œå› ä¸º<code>filter()</code>æ­£åœ¨å°è¯•è®¡ç®—<code>df$input$min</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df<span class=\"operator\">$</span>input<span class=\"operator\">$</span><span class=\"built_in\">min</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; Error in df$input$min: $ operator is invalid for atomic vectors</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºæ•°æ®å˜é‡å’Œç¯å¢ƒå˜é‡çš„æ­§ä¹‰é€ æˆçš„ï¼Œå¹¶ä¸”åœ¨ä¸¤è€…éƒ½å¯ç”¨æ—¶ï¼Œæ•°æ®æ©è”½æ›´å€¾å‘äºä½¿ç”¨æ•°æ®å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨<code>.env</code>æ¥å‘Šè¯‰<code>filter()</code>åªåœ¨ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾<code>min</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span>input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   x y input</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1 1 2     3</span></span><br></pre></td></tr></table></figure>\n\n<p>è¯·æ³¨æ„ï¼Œè¿™ä¸ªé—®é¢˜åªæœ‰åœ¨å¤„ç†ç”¨æˆ·æä¾›çš„æ•°æ®æ—¶æ‰éœ€è¦è€ƒè™‘ï¼›åœ¨å¤„ç†è‡ªå·±çš„æ•°æ®æ—¶ï¼Œä½ å¯ä»¥ç¡®ä¿æ•°æ®å˜é‡çš„åç§°ä¸ä¼šä¸ç¯å¢ƒå˜é‡çš„åç§°å†²çªï¼ˆå¦‚æœä¸å°å¿ƒå†²çªäº†ï¼Œä½ ä¼šç«‹åˆ»å‘ç°ï¼‰ã€‚</p>\n<h3 id=\"12-2-5-ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ\"><a href=\"#12-2-5-ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ\" class=\"headerlink\" title=\"12.2.5 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ\"></a>12.2.5 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ</h3><p>åˆ°è¿™æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœæ²¡æœ‰<code>filter()</code>å‡½æ•°ï¼Œä½¿ç”¨ç­‰æ•ˆçš„åŸºç¡€Rä»£ç ä¼šä¸ä¼šæ›´å¥½ï¼Ÿ</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df<span class=\"punctuation\">[</span>df<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   x y input</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1 1 2     3</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ˜¯ä¸€ä¸ªå®Œå…¨åˆç†çš„ç«‹åœºï¼Œåªè¦ä½ æ„è¯†åˆ°<code>filter()</code>ä¸ºä½ åšçš„å·¥ä½œï¼Œä»¥ä¾¿ä½ èƒ½ç”Ÿæˆç­‰æ•ˆçš„åŸºç¡€Rä»£ç ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼š</p>\n<ul>\n<li><p>å¦‚æœdfåªåŒ…å«ä¸€åˆ—ï¼Œä½ éœ€è¦ä½¿ç”¨<code>drop = FALSE</code>ï¼ˆå¦åˆ™ä½ ä¼šå¾—åˆ°ä¸€ä¸ªå‘é‡è€Œä¸æ˜¯æ•°æ®æ¡†ï¼‰ã€‚</p>\n</li>\n<li><p>ä½ éœ€è¦ä½¿ç”¨<a href=\"https://rdrr.io/r/base/which.html\">which()</a>æˆ–ç±»ä¼¼å‡½æ•°æ¥åˆ é™¤ä»»ä½•ç¼ºå¤±å€¼ã€‚</p>\n</li>\n<li><p>ä½ ä¸èƒ½è¿›è¡Œåˆ†ç»„è¿‡æ»¤ï¼ˆä¾‹å¦‚ï¼Œ<code>df %&gt;% group_by(g) %&gt;% filter(n() == 1)</code>ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ åªæ˜¯ä½¿ç”¨dplyræ¥å¤„ç†éå¸¸ç®€å•çš„æ¡ˆä¾‹ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½¿ç”¨ä¸ä½¿ç”¨æ•°æ®æ©è”½çš„åŸºç¡€Rå‡½æ•°æ›´å®¹æ˜“ã€‚ç„¶è€Œï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œtidyverseçš„ä¸€ä¸ªä¼˜åŠ¿åœ¨äºå®ƒä»”ç»†è€ƒè™‘äº†è¾¹ç¼˜æƒ…å†µï¼Œä»¥ä¾¿å‡½æ•°èƒ½æ›´ä¸€è‡´åœ°å·¥ä½œã€‚æˆ‘ä¸æƒ³å¤¸å¤§è¿™ä¸€ç‚¹ï¼Œä½†åŒæ—¶ï¼Œå¾ˆå®¹æ˜“å¿˜è®°ç‰¹å®šåŸºç¡€Rå‡½æ•°çš„æ€ªç™–ï¼Œå¹¶ç¼–å†™å‡º95%ä»¥ä¸Šæ—¶é—´éƒ½èƒ½å·¥ä½œï¼Œä½†åœ¨å¦å¤–5%çš„æ—¶é—´é‡Œä¼šä»¥ä¸å¯»å¸¸çš„æ–¹å¼å¤±è´¥çš„ä»£ç ã€‚</p>\n<h2 id=\"12-3-æ•´æ´é€‰æ‹©-Tidy-selection\"><a href=\"#12-3-æ•´æ´é€‰æ‹©-Tidy-selection\" class=\"headerlink\" title=\"12.3 æ•´æ´é€‰æ‹© Tidy-selection\"></a>12.3 æ•´æ´é€‰æ‹© Tidy-selection</h2><p>é™¤äº†æ•°æ®æ©è”½ä¹‹å¤–ï¼Œæ•´æ´è¯„ä¼°è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼šæ•´æ´é€‰æ‹©ã€‚æ•´æ´é€‰æ‹©æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥é€šè¿‡ä½ç½®ã€åç§°æˆ–ç±»å‹é€‰æ‹©åˆ—ã€‚å®ƒåœ¨<a href=\"https://dplyr.tidyverse.org/reference/select.html\">dplyr::select()</a>å’Œ<a href=\"https://dplyr.tidyverse.org/reference/across.html\">dplyr::across()</a>ä»¥åŠtidyrä¸­çš„è®¸å¤šå‡½æ•°ï¼ˆå¦‚<a href=\"https://tidyr.tidyverse.org/reference/pivot_longer.html\">pivot_longer()</a>ã€<a href=\"https://tidyr.tidyverse.org/reference/pivot_wider.html\">pivot_wider()</a>ã€<a href=\"https://tidyr.tidyverse.org/reference/separate.html\">separate()</a>ã€<a href=\"https://tidyr.tidyverse.org/reference/extract.html\">extract()</a>å’Œ<a href=\"https://tidyr.tidyverse.org/reference/unite.html\">unite()</a>ï¼‰ä¸­ä½¿ç”¨ã€‚</p>\n<h3 id=\"12-3-1-é—´æ¥å¼•ç”¨\"><a href=\"#12-3-1-é—´æ¥å¼•ç”¨\" class=\"headerlink\" title=\"12.3.1 é—´æ¥å¼•ç”¨\"></a>12.3.1 é—´æ¥å¼•ç”¨</h3><p>è¦é—´æ¥å¼•ç”¨å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨<a href=\"https://tidyselect.r-lib.org/reference/all_of.html\">any_of()</a>æˆ–<a href=\"https://tidyselect.r-lib.org/reference/all_of.html\">all_of()</a>ï¼šä¸¤è€…éƒ½æœŸæœ›ä¸€ä¸ªåŒ…å«æ•°æ®å˜é‡åç§°çš„å­—ç¬¦å‘é‡ä½œä¸ºç¯å¢ƒå˜é‡ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå¦‚æœä½ æä¾›äº†ä¸€ä¸ªåœ¨è¾“å…¥ä¸­ä¸å­˜åœ¨çš„å˜é‡åï¼Œ<code>all_of()</code>ä¼šå¼•å‘é”™è¯¯ï¼Œè€Œ<code>any_of()</code>åˆ™ä¼šé™é»˜åœ°å¿½ç•¥å®ƒã€‚</p>\n<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹åº”ç”¨ç¨‹åºå…è®¸ç”¨æˆ·ä½¿ç”¨å¤šé€‰è¾“å…¥é€‰æ‹©ä»»æ„æ•°é‡çš„å˜é‡ï¼ŒåŒæ—¶ä½¿ç”¨<code>all_of()</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variables&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span></span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> select<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-3-2-æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½\"><a href=\"#12-3-2-æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½\" class=\"headerlink\" title=\"12.3.2 æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½\"></a>12.3.2 æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½</h3><p>å½“ä½¿ç”¨é‡‡ç”¨æ•´æ´é€‰æ‹©çš„å‡½æ•°æ—¶ï¼Œå¤„ç†å¤šä¸ªå˜é‡å˜å¾—è½»è€Œæ˜“ä¸¾ï¼šæ‚¨åªéœ€å°†åŒ…å«å˜é‡åçš„å­—ç¬¦å‘é‡ä¼ é€’ç»™<code>any_of()</code>æˆ–<code>all_of()</code>ã€‚å¦‚æœæˆ‘ä»¬ä¹Ÿèƒ½åœ¨æ•°æ®æ©è”½å‡½æ•°ä¸­ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œé‚£è¯¥æœ‰å¤šå¥½ï¼Ÿè¿™æ­£æ˜¯dplyr 1.0.0ç‰ˆæœ¬ä¸­æ·»åŠ çš„<a href=\"https://dplyr.tidyverse.org/reference/across.html\">across()</a>å‡½æ•°çš„è®¾è®¡ç†å¿µã€‚å®ƒå…è®¸æ‚¨åœ¨æ•°æ®æ©è”½å‡½æ•°ä¸­ä½¿ç”¨æ•´æ´é€‰æ‹©ã€‚</p>\n<p><code>across()</code>å‡½æ•°é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºé€‰æ‹©å˜é‡ï¼Œåœ¨<a href=\"https://dplyr.tidyverse.org/reference/group_by.html\">group_by()</a>æˆ–<a href=\"https://dplyr.tidyverse.org/reference/distinct.html\">distinct()</a>ç­‰å‡½æ•°ä¸­éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹åº”ç”¨ç¨‹åºå…è®¸æ‚¨é€‰æ‹©ä»»æ„æ•°é‡çš„å˜é‡å¹¶è®¡ç®—å®ƒä»¬çš„å”¯ä¸€å€¼æ•°é‡ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variables&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;count&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>count <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      group_by<span class=\"punctuation\">(</span>across<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      summarise<span class=\"punctuation\">(</span>n <span class=\"operator\">=</span> n<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> .groups <span class=\"operator\">=</span> <span class=\"string\">&quot;drop&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/20b7acd57783cbc15cf0d64d8964bba1e093ba06/1c155/demos/action-tidy/across.png\" class=\"lazyload placeholder\" data-srcset=\"https://d33wubrfki0l68.cloudfront.net/20b7acd57783cbc15cf0d64d8964bba1e093ba06/1c155/demos/action-tidy/across.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"å›¾12.6 æ­¤åº”ç”¨ç¨‹åºå…è®¸æ‚¨é€‰æ‹©ä»»æ„æ•°é‡çš„å˜é‡ï¼Œå¹¶è®¡ç®—å®ƒä»¬çš„å”¯ä¸€ç»„åˆæ•°é‡ã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-acrosså®æ—¶æŸ¥çœ‹\"></p>\n<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–å‡½æ•°åˆ—è¡¨ï¼‰ï¼Œåº”ç”¨äºæ¯ä¸ªé€‰å®šçš„åˆ—ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆ<a href=\"https://dplyr.tidyverse.org/reference/mutate.html\">mutate()</a>å’Œ<a href=\"https://dplyr.tidyverse.org/reference/summarise.html\">summarise()</a>ç­‰å‡½æ•°ï¼Œå› ä¸ºæ‚¨é€šå¸¸æƒ³è¦ä»¥æŸç§æ–¹å¼è½¬æ¢æ¯ä¸ªå˜é‡ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å…è®¸ç”¨æˆ·é€‰æ‹©ä»»æ„æ•°é‡çš„åˆ†ç»„å˜é‡ï¼Œä»¥åŠä»»æ„æ•°é‡çš„å˜é‡ï¼Œä»¥è®¡ç®—å®ƒä»¬çš„å¹³å‡å€¼è¿›è¡Œæ±‡æ€»ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars_g&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Group by&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars_s&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Summarise&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      group_by<span class=\"punctuation\">(</span>across<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars_g<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      summarise<span class=\"punctuation\">(</span>across<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars_s<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> mean<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> n <span class=\"operator\">=</span> n<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"12-4-parse-eval\"><a href=\"#12-4-parse-eval\" class=\"headerlink\" title=\"12.4 parse() + eval()\"></a>12.4 parse() + eval()</h2><p>åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæœ‰å¿…è¦å¯¹<a href=\"https://rdrr.io/r/base/paste.html\">paste()</a> + <a href=\"https://rdrr.io/r/base/parse.html\">parse()</a> + <a href=\"https://rdrr.io/r/base/eval.html\">eval()</a>ç»„åˆè¿›è¡Œç®€çŸ­çš„è¯„è®ºã€‚å¦‚æœä½ å®Œå…¨ä¸äº†è§£è¿™ä¸ªç»„åˆï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ï¼Œä½†å¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡å®ƒï¼Œæˆ‘æƒ³ç»™ä½ ä¸€ä¸ªå°å°çš„è­¦å‘Šã€‚</p>\n<p>è¿™æ˜¯ä¸€ä¸ªè¯±äººçš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒåªéœ€è¦å­¦ä¹ å¾ˆå°‘çš„æ–°æ¦‚å¿µã€‚ä½†å®ƒä¹Ÿæœ‰ä¸€äº›ä¸»è¦çš„ç¼ºç‚¹ï¼šç”±äºä½ æ­£åœ¨å°†å­—ç¬¦ä¸²æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå¾ˆå®¹æ˜“æ„å¤–åœ°åˆ›å»ºå‡ºæ— æ•ˆçš„ä»£ç ï¼Œæˆ–è€…å¯èƒ½è¢«æ»¥ç”¨ä»¥æ‰§è¡Œä½ ä¸å¸Œæœ›çš„æ“ä½œçš„ä»£ç ã€‚å¦‚æœè¿™åªæ˜¯ä½ è‡ªå·±ä½¿ç”¨çš„Shinyåº”ç”¨ç¨‹åºï¼Œè¿™å¯èƒ½ä¸æ˜¯éå¸¸é‡è¦ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå€¼å¾—å…»æˆçš„å¥½ä¹ æƒ¯â€”â€”å¦åˆ™ï¼Œå¾ˆå®¹æ˜“åœ¨ä½ å¹¿æ³›åˆ†äº«çš„åº”ç”¨ç¨‹åºä¸­æ„å¤–åœ°åˆ›å»ºä¸€ä¸ªå®‰å…¨æ¼æ´ã€‚æˆ‘ä»¬å°†åœ¨ç¬¬<code>22ç« </code>ä¸­å†æ¬¡æåŠè¿™ä¸ªè§‚ç‚¹ã€‚</p>\n<p>ï¼ˆå¦‚æœä½ å‘ç°è¿™æ˜¯è§£å†³é—®é¢˜çš„å”¯ä¸€æ–¹æ³•ï¼Œä¸å¿…æ„Ÿåˆ°æ²®ä¸§ã€‚ä½†å½“ä½ æœ‰äº†æ›´å¤šçš„æ€è€ƒç©ºé—´æ—¶ï¼Œæˆ‘å»ºè®®èŠ±äº›æ—¶é—´å¼„æ¸…æ¥šå¦‚ä½•åœ¨ä¸è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œçš„æƒ…å†µä¸‹å®ç°ã€‚è¿™å°†æœ‰åŠ©äºä½ æˆä¸ºä¸€åæ›´å¥½çš„Rç¨‹åºå‘˜ã€‚ï¼‰</p>\n<h2 id=\"12-5-æ€»ç»“\"><a href=\"#12-5-æ€»ç»“\" class=\"headerlink\" title=\"12.5 æ€»ç»“\"></a>12.5 æ€»ç»“</h2><p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•åˆ›å»ºShinyåº”ç”¨ç¨‹åºï¼Œè®©ç”¨æˆ·é€‰æ‹©å°†å“ªäº›å˜é‡è¾“å…¥åˆ°å¦‚<a href=\"https://dplyr.tidyverse.org/reference/filter.html\">dplyr::filter()</a>å’Œ<a href=\"https://ggplot2.tidyverse.org/reference/aes.html\">ggplot2::aes()</a>è¿™æ ·çš„tidyverseå‡½æ•°ä¸­ã€‚è¿™éœ€è¦ä½ ç†è§£ä¸€ä¸ªä½ ä¹‹å‰å¯èƒ½ä»æœªè€ƒè™‘è¿‡çš„å…³é”®åŒºåˆ«ï¼šæ•°æ®å˜é‡å’Œç¯å¢ƒå˜é‡çš„ä¸åŒã€‚è¿™å¯èƒ½éœ€è¦ä¸€äº›ç»ƒä¹ æ‰èƒ½å˜å¾—è‡ªç„¶ï¼Œä½†ä¸€æ—¦ä½ æŒæ¡äº†è¿™äº›æ¦‚å¿µï¼Œä½ å°±èƒ½å¤Ÿè§£é”tidyverseçš„æ•°æ®åˆ†æåŠŸèƒ½ï¼Œå¹¶å°†å…¶æš´éœ²ç»™éRç”¨æˆ·ã€‚</p>\n<p>è¿™æ˜¯æœ¬ä¹¦<code>â€œShinyå®æˆ˜â€</code>éƒ¨åˆ†çš„æœ€åä¸€ç« ã€‚æ—¢ç„¶ä½ å·²ç»æ‹¥æœ‰äº†åˆ¶ä½œä¸€ç³»åˆ—æœ‰ç”¨åº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥å…·ï¼Œæˆ‘å°†é‡ç‚¹æé«˜ä½ å¯¹Shinyåº•å±‚ç†è®ºçš„ç†è§£ã€‚</p>\n<h1 id=\"åŠ å…³æ³¨\"><a href=\"#åŠ å…³æ³¨\" class=\"headerlink\" title=\"åŠ å…³æ³¨\"></a>åŠ å…³æ³¨</h1><table align=\"center\"><tr>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç”Ÿä¿¡ä¹‹å·…å¾®ä¿¡å…¬ä¼—å·\" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-right: 0px;margin-bottom: 5px;align: center;\"></td>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" class=\"lazyload placeholder\" data-srcset=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç”Ÿä¿¡ä¹‹å·…å°ç¨‹åºç \" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-left: 0px;margin-bottom: 5px;align: center\"></td>\n</tr></table>\n\n\n<p><font color=\"#FF0000\"><ruby><b>æ•¬å‘Š</b>ï¼šä½¿ç”¨æ–‡ä¸­è„šæœ¬è¯·å¼•ç”¨æœ¬æ–‡ç½‘å€ï¼Œè¯·å°Šé‡æœ¬äººçš„åŠ³åŠ¨æˆæœï¼Œè°¢è°¢ï¼<rt><b>Notice</b>: When you use the scripts in this article, please cite the link of this webpage. Thank you!</rt></ruby></font></p>\n","more":"<h1 id=\"æ•´æ´è¯„ä¼°\"><a href=\"#æ•´æ´è¯„ä¼°\" class=\"headerlink\" title=\"æ•´æ´è¯„ä¼°\"></a>æ•´æ´è¯„ä¼°</h1><p>å¦‚æœä½ åœ¨ä½¿ç”¨Shinyä¸tidyverseï¼Œé‚£ä¹ˆä½ å‡ ä¹è‚¯å®šä¼šé‡åˆ°æ•´æ´è¯„ä¼°ç¼–ç¨‹çš„æŒ‘æˆ˜ã€‚æ•´æ´è¯„ä¼°åœ¨tidyverseä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½¿äº¤äº’å¼æ•°æ®æ¢ç´¢æ›´åŠ æµç•…ï¼Œä½†å®ƒä¹Ÿæœ‰ä»£ä»·ï¼šå¾ˆéš¾é—´æ¥å¼•ç”¨å˜é‡ï¼Œå› æ­¤ç¼–ç¨‹èµ·æ¥ä¹Ÿæ›´åŠ å›°éš¾ã€‚</p>\n<p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åœ¨Shinyåº”ç”¨ç¨‹åºä¸­åŒ…è£…ggplot2å’Œdplyrå‡½æ•°ã€‚ï¼ˆå¦‚æœä½ ä¸ä½¿ç”¨tidyverseï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™ä¸€ç« ğŸ˜„ã€‚ï¼‰å°†ggplot2å’Œdplyrå‡½æ•°åŒ…è£…åœ¨å‡½æ•°å’ŒåŒ…ä¸­çš„æŠ€æœ¯ç•¥æœ‰ä¸åŒï¼Œå¹¶ä¸”åœ¨å…¶ä»–èµ„æºå¦‚<a href=\"http://ggplot2.tidyverse.org/dev/articles/ggplot2-in-packages.html\">â€œåœ¨åŒ…ä¸­ä½¿ç”¨ggplot2â€</a>æˆ–<a href=\"http://dplyr.tidyverse.org/articles/programming.html\">â€œä½¿ç”¨dplyrç¼–ç¨‹â€</a>ä¸­æœ‰æ‰€æ¶µç›–ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">library<span class=\"punctuation\">(</span>shiny<span class=\"punctuation\">)</span></span><br><span class=\"line\">library<span class=\"punctuation\">(</span>dplyr<span class=\"punctuation\">,</span> warn.conflicts <span class=\"operator\">=</span> <span class=\"literal\">FALSE</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">library<span class=\"punctuation\">(</span>ggplot2<span class=\"punctuation\">)</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"12-1-åŠ¨æœº\"><a href=\"#12-1-åŠ¨æœº\" class=\"headerlink\" title=\"12.1 åŠ¨æœº\"></a>12.1 åŠ¨æœº</h2><p>å‡è®¾æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå…è®¸ä½ è¿‡æ»¤ä¸€ä¸ªæ•°å€¼å˜é‡ï¼Œä»¥é€‰æ‹©å¤§äºæŸä¸ªé˜ˆå€¼çš„è¡Œã€‚ä½ å¯èƒ½ä¼šå†™å‡ºç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_vars <span class=\"operator\">&lt;-</span> <span class=\"built_in\">c</span><span class=\"punctuation\">(</span><span class=\"string\">&quot;carat&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;depth&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;table&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;price&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;z&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> num_vars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  numericInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Minimum&quot;</span><span class=\"punctuation\">,</span> value <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;output&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  data <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span>diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>output <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span>head<span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/2c131334332cadef7ec2b3e3bdf32689f3f1ebc6/f6143/demos/action-tidy/messed-up.png\" alt=\"å›¾12.1 ä¸€ä¸ªåº”ç”¨ç¨‹åºè¯•å›¾é€‰æ‹©ç”¨æˆ·é€‰å®šå˜é‡ä¸­å¤§äºé˜ˆå€¼çš„è¡Œ\"></p>\n<p>ä»<code>å›¾12.1</code>ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¯¥åº”ç”¨ç¨‹åºå¯ä»¥æ— é”™è¯¯åœ°è¿è¡Œï¼Œä½†å®ƒå¹¶æ²¡æœ‰è¿”å›æ­£ç¡®çš„ç»“æœâ€”â€”æ‰€æœ‰çš„è¡Œä¸­ï¼Œé’»çŸ³çš„å‡€é‡ï¼ˆ<code>carat</code>ï¼‰å€¼éƒ½å°äº1ã€‚æœ¬ç« çš„ç›®æ ‡æ˜¯å¸®åŠ©ä½ ç†è§£ä¸ºä»€ä¹ˆè¿™ä¸èµ·ä½œç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆdplyrè®¤ä¸ºä½ è¯·æ±‚çš„æ˜¯<code>filter(diamonds, &quot;carat&quot; &gt; 1)</code>ã€‚</p>\n<p>è¿™æ˜¯ä¸€ä¸ª<code>é—´æ¥å¼•ç”¨</code>çš„é—®é¢˜ï¼šé€šå¸¸åœ¨ä½¿ç”¨tidyverseå‡½æ•°æ—¶ï¼Œä½ ä¼šç›´æ¥åœ¨å‡½æ•°è°ƒç”¨ä¸­è¾“å…¥å˜é‡çš„åç§°ã€‚ä½†ç°åœ¨ä½ æƒ³è¦é—´æ¥å¼•ç”¨å®ƒï¼šå˜é‡ï¼ˆ<code>carat</code>ï¼‰å­˜å‚¨åœ¨å¦ä¸€ä¸ªå˜é‡ï¼ˆ<code>input$var</code>ï¼‰ä¸­ã€‚</p>\n<p>è¿™å¥è¯å¯èƒ½å¯¹ä½ æ¥è¯´å¾ˆç›´è§‚ï¼Œä½†æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºæˆ‘åœ¨è¿™é‡Œç”¨â€œå˜é‡â€æ¥æŒ‡ä»£ä¸¤ç§ç•¥æœ‰ä¸åŒçš„äº‹ç‰©ã€‚å¦‚æœæˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªæ–°æœ¯è¯­æ¥æ¶ˆé™¤è¿™ä¸¤ç§ç”¨æ³•ä¹‹é—´çš„æ­§ä¹‰ï¼Œé‚£ä¹ˆç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ä¼šæ›´å®¹æ˜“ï¼š</p>\n<ul>\n<li><p>ç¯å¢ƒå˜é‡ï¼ˆ<strong>env-variable</strong>ï¼‰æ˜¯ä¸€ä¸ªâ€œç¼–ç¨‹â€å˜é‡ï¼Œä½ ç”¨<code>&lt;-</code>æ¥åˆ›å»ºã€‚<code>input$var</code>æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚</p>\n</li>\n<li><p>æ•°æ®å˜é‡ï¼ˆ<strong>data-variable</strong>ï¼‰æ˜¯å­˜å‚¨åœ¨æ•°æ®æ¡†ä¸­çš„â€œç»Ÿè®¡â€å˜é‡ã€‚<code>carat</code>æ˜¯ä¸€ä¸ªæ•°æ®å˜é‡ã€‚</p>\n</li>\n</ul>\n<p>æœ‰äº†è¿™äº›æ–°æœ¯è¯­ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ¥šåœ°é˜è¿°é—´æ¥å¼•ç”¨çš„é—®é¢˜ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®å˜é‡ï¼ˆ<code>carat</code>ï¼‰å­˜å‚¨åœ¨ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼ˆ<code>input$var</code>ï¼‰ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥å‘Šè¯‰dplyrè¿™ä¸€ç‚¹ã€‚æ ¹æ®ä½ æ‰€ä½¿ç”¨çš„å‡½æ•°æ˜¯â€œæ•°æ®æ©è”½â€å‡½æ•°è¿˜æ˜¯â€œæ•´æ´é€‰æ‹©â€å‡½æ•°ï¼Œå®ç°è¿™ä¸€ç‚¹çš„æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚</p>\n<h2 id=\"12-2-æ•°æ®æ©è”½\"><a href=\"#12-2-æ•°æ®æ©è”½\" class=\"headerlink\" title=\"12.2 æ•°æ®æ©è”½\"></a>12.2 æ•°æ®æ©è”½</h2><p>æ•°æ®æ©è”½å‡½æ•°å…è®¸ä½ åœ¨â€œå½“å‰â€æ•°æ®æ¡†ä¸­ä½¿ç”¨å˜é‡ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„è¯­æ³•ã€‚å®ƒåœ¨è®¸å¤šdplyrå‡½æ•°ï¼ˆå¦‚<a href=\"https://dplyr.tidyverse.org/reference/arrange.html\">arrange()</a>ã€<a href=\"https://dplyr.tidyverse.org/reference/filter.html\">filter()</a>ã€<a href=\"https://dplyr.tidyverse.org/reference/group_by.html\">group_by()</a>ã€<a href=\"https://dplyr.tidyverse.org/reference/mutate.html\">mutate()</a>å’Œ<a href=\"https://dplyr.tidyverse.org/reference/summarise.html\">summarise()</a>ï¼‰ä»¥åŠggplot2çš„<a href=\"https://ggplot2.tidyverse.org/reference/aes.html\">aes()</a>ä¸­ä½¿ç”¨ã€‚æ•°æ®æ©è”½å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸ä½ ä½¿ç”¨æ•°æ®å˜é‡ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„è¯­æ³•ã€‚</p>\n<h3 id=\"12-2-1-å¼€å§‹\"><a href=\"#12-2-1-å¼€å§‹\" class=\"headerlink\" title=\"12.2.1 å¼€å§‹\"></a>12.2.1 å¼€å§‹</h3><p>è®©æˆ‘ä»¬ä»è°ƒç”¨<code>filter()</code>å‡½æ•°å¼€å§‹ï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªæ•°æ®å˜é‡ï¼ˆ<code>carat</code>ï¼‰å’Œä¸€ä¸ªç¯å¢ƒå˜é‡ï¼ˆ<code>min</code>ï¼‰ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">min</span> <span class=\"operator\">&lt;-</span> 1</span><br><span class=\"line\">diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>carat <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; # A tibble: 17,502 Ã— 10</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   carat cut       color clarity depth table price     x     y     z</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1  1.17 Very Good J     I1       60.2    61  2774  6.83  6.9   4.13</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 2  1.01 Premium   F     I1       61.8    60  2781  6.39  6.36  3.94</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 3  1.01 Fair      E     I1       64.5    58  2788  6.29  6.21  4.03</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 4  1.01 Premium   H     SI2      62.7    59  2788  6.31  6.22  3.93</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 5  1.05 Very Good J     SI2      63.2    56  2789  6.49  6.45  4.09</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 6  1.05 Fair      J     SI2      65.8    59  2789  6.41  6.27  4.18</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; # â€¦ with 17,496 more rows</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸åŸºç¡€Rçš„ç­‰æ•ˆä»£ç è¿›è¡Œæ¯”è¾ƒï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diamonds<span class=\"punctuation\">[</span>diamonds<span class=\"operator\">$</span>carat <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n<p>åœ¨å¤§å¤šæ•°ï¼ˆä½†ä¸æ˜¯å…¨éƒ¨ï¼‰åŸºç¡€Rå‡½æ•°ä¸­ï¼Œä½ éœ€è¦ä½¿ç”¨<code>$</code>æ¥å¼•ç”¨æ•°æ®å˜é‡ã€‚è¿™æ„å‘³ç€ä½ ç»å¸¸éœ€è¦å¤šæ¬¡é‡å¤æ•°æ®æ¡†çš„åç§°ï¼Œä½†è¿™ç¡®å®æ¸…æ¥šåœ°è¡¨æ˜äº†ä»€ä¹ˆæ˜¯æ•°æ®å˜é‡ï¼Œä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡ã€‚è¿™ä¹Ÿä½¿å¾—é—´æ¥å¼•ç”¨å˜å¾—ç›´æ¥æ˜äº†ï¼Œå› ä¸ºä½ å¯ä»¥å°†æ•°æ®å˜é‡çš„åç§°å­˜å‚¨åœ¨ä¸€ä¸ªç¯å¢ƒå˜é‡ä¸­ï¼Œç„¶åä»<code>$</code>åˆ‡æ¢åˆ°<code>[[</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var <span class=\"operator\">&lt;-</span> <span class=\"string\">&quot;carat&quot;</span></span><br><span class=\"line\">diamonds<span class=\"punctuation\">[</span>diamonds<span class=\"punctuation\">[[</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ•´æ´è¯„ä¼°æ¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•å°†<code>$</code>é‡æ–°åŠ å…¥è¿›æ¥ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨æ•°æ®æ©è”½å‡½æ•°ä¸­ï¼Œå¦‚æœä½ æƒ³æ˜ç¡®è¡¨ç¤ºä½ æ˜¯åœ¨è°ˆè®ºæ•°æ®å˜é‡è¿˜æ˜¯ç¯å¢ƒå˜é‡ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>.data</code>æˆ–<code>.env</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"operator\">$</span>carat <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä»$åˆ‡æ¢åˆ°[[ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br></pre></td></tr></table></figure>\n<p>è®©æˆ‘ä»¬é€šè¿‡æ›´æ–°æœ¬ç« å¼€å§‹æ—¶ä½¿ç”¨çš„æœåŠ¡å™¨å‡½æ•°æ¥æ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ•ˆï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_vars <span class=\"operator\">&lt;-</span> <span class=\"built_in\">c</span><span class=\"punctuation\">(</span><span class=\"string\">&quot;carat&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;depth&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;table&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;price&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;z&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> num_vars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  numericInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Minimum&quot;</span><span class=\"punctuation\">,</span> value <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;output&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  data <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span>diamonds <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span>input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>output <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span>head<span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/878d4b65fc1671d180c91732193924ce2f3b3ea8/ca76b/demos/action-tidy/tidied-up.png\" alt=\"å›¾12.2 æˆ‘ä»¬çš„åº”ç”¨ç°åœ¨è¿è¡Œè‰¯å¥½ï¼Œå› ä¸ºæˆ‘ä»¬æ˜ç¡®äº†.dataå’Œ.envä»¥åŠ[[ä¸$çš„åŒºåˆ«ã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-tidied-upæŸ¥çœ‹å®æ—¶æ•ˆæœ\"></p>\n<p><code>å›¾12.2</code>æ˜¾ç¤ºæˆ‘ä»¬å·²ç»æˆåŠŸäº†â€”â€”æˆ‘ä»¬åªçœ‹åˆ°å…‹æ‹‰å€¼å¤§äº1çš„é’»çŸ³ã€‚ç°åœ¨ä½ å·²ç»äº†è§£äº†åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†å¼€å‘å‡ ä¸ªæ›´ç°å®ä½†ä»ç„¶ç®€å•çš„Shinyåº”ç”¨ã€‚</p>\n<h3 id=\"12-2-2-ç¤ºä¾‹ï¼šggplot2\"><a href=\"#12-2-2-ç¤ºä¾‹ï¼šggplot2\" class=\"headerlink\" title=\"12.2.2 ç¤ºä¾‹ï¼šggplot2\"></a>12.2.2 ç¤ºä¾‹ï¼šggplot2</h3><p>è®©æˆ‘ä»¬å°†è¿™ä¸ªæƒ³æ³•åº”ç”¨äºåŠ¨æ€ç»˜å›¾ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡é€‰æ‹©è¦åœ¨<code>x</code>è½´å’Œ<code>y</code>è½´ä¸Šæ˜¾ç¤ºçš„å˜é‡æ¥åˆ›å»ºæ•£ç‚¹å›¾ã€‚ç»“æœå¦‚<code>å›¾12.3</code>æ‰€ç¤ºã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;X variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Y variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  plotOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;plot&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>plot <span class=\"operator\">&lt;-</span> renderPlot<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    ggplot<span class=\"punctuation\">(</span>iris<span class=\"punctuation\">,</span> aes<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>x<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> .data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>y<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">+</span></span><br><span class=\"line\">      geom_point<span class=\"punctuation\">(</span>position <span class=\"operator\">=</span> ggforce<span class=\"operator\">::</span>position_auto<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span> res <span class=\"operator\">=</span> <span class=\"number\">96</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<table>\n<tr>\n<td><img src=\"https://d33wubrfki0l68.cloudfront.net/9defdeb8a9d4c779898f02f540feb95283b62c65/23a54/demos/action-tidy/ggplot2-scatter.png\"></td>\n<td><img src=\"https://d33wubrfki0l68.cloudfront.net/74cf9f3e211b5f2430a03a5c960da0ab63a1e29e/41abe/demos/action-tidy/ggplot2-swarm.png\"></td>\n</tr>\n<tr>\n<td colspan=\"2\">å›¾12.3 ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå…è®¸æ‚¨é€‰æ‹©è¦åœ¨xè½´å’Œyè½´ä¸Šç»˜åˆ¶çš„å˜é‡ã€‚è¯·è®¿é—®<a href=\"https://hadley.shinyapps.io/ms-ggplot2\">https://hadley.shinyapps.io/ms-ggplot2</a>æŸ¥çœ‹å®æ—¶æ•ˆæœ</td>\n</tr>\n</table>\n\n<p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†<a href=\"https://ggforce.data-imaginist.com/reference/position_auto.html\">ggforce::position_auto()</a>ï¼Œè¿™æ ·æ— è®ºxå’Œyå˜é‡æ˜¯è¿ç»­çš„è¿˜æ˜¯ç¦»æ•£çš„ï¼Œ<a href=\"https://ggplot2.tidyverse.org/reference/geom_point.html\">geom_point()</a>éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚æˆ–è€…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©ç”¨æˆ·é€‰æ‹©geomã€‚ä¸‹é¢çš„åº”ç”¨ç¨‹åºä½¿ç”¨<a href=\"https://rdrr.io/r/base/switch.html\">switch()</a>è¯­å¥ç”Ÿæˆä¸€ä¸ªååº”æ€§çš„geomï¼Œç¨åä¼šå°†å…¶æ·»åŠ åˆ°å›¾ä¸­ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;X variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;y&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Y variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>iris<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;geom&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;geom&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">c</span><span class=\"punctuation\">(</span><span class=\"string\">&quot;point&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;smooth&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;jitter&quot;</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  plotOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;plot&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  plot_geom <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"built_in\">switch</span><span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>geom<span class=\"punctuation\">,</span></span><br><span class=\"line\">      point <span class=\"operator\">=</span> geom_point<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      smooth <span class=\"operator\">=</span> geom_smooth<span class=\"punctuation\">(</span>se <span class=\"operator\">=</span> <span class=\"literal\">FALSE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      jitter <span class=\"operator\">=</span> geom_jitter<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    <span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  output<span class=\"operator\">$</span>plot <span class=\"operator\">&lt;-</span> renderPlot<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    ggplot<span class=\"punctuation\">(</span>iris<span class=\"punctuation\">,</span> aes<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>x<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> .data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>y<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">+</span></span><br><span class=\"line\">      plot_geom<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span> res <span class=\"operator\">=</span> <span class=\"number\">96</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ˜¯ä½¿ç”¨ç”¨æˆ·é€‰æ‹©çš„å˜é‡è¿›è¡Œç¼–ç¨‹æ—¶é¢ä¸´çš„æŒ‘æˆ˜ä¹‹ä¸€ï¼šä½ çš„ä»£ç å¿…é¡»å˜å¾—æ›´åŠ å¤æ‚ï¼Œä»¥å¤„ç†ç”¨æˆ·å¯èƒ½ç”Ÿæˆçš„æ‰€æœ‰æƒ…å†µã€‚</p>\n<h3 id=\"12-2-3-ç¤ºä¾‹ï¼šdplyr\"><a href=\"#12-2-3-ç¤ºä¾‹ï¼šdplyr\" class=\"headerlink\" title=\"12.2.3 ç¤ºä¾‹ï¼šdplyr\"></a>12.2.3 ç¤ºä¾‹ï¼šdplyr</h3><p>åŒæ ·çš„æŠ€æœ¯ä¹Ÿé€‚ç”¨äºdplyrã€‚ä¸‹é¢çš„åº”ç”¨ç¨‹åºæ‰©å±•äº†å‰é¢ç®€å•çš„ç¤ºä¾‹ï¼Œå…è®¸æ‚¨é€‰æ‹©ä¸€ä¸ªå˜é‡è¿›è¡Œè¿‡æ»¤ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€å°å€¼è¿›è¡Œé€‰æ‹©ï¼Œä»¥åŠé€‰æ‹©ä¸€ä¸ªå˜é‡è¿›è¡Œæ’åºã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Select variable&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  sliderInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Minimum value&quot;</span><span class=\"punctuation\">,</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span> <span class=\"built_in\">min</span> <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span> <span class=\"built_in\">max</span> <span class=\"operator\">=</span> <span class=\"number\">100</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;sort&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Sort by&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  observeEvent<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">,</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    rng <span class=\"operator\">&lt;-</span> <span class=\"built_in\">range</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    updateSliderInput<span class=\"punctuation\">(</span></span><br><span class=\"line\">      session<span class=\"punctuation\">,</span> <span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">      value <span class=\"operator\">=</span> rng<span class=\"punctuation\">[[</span><span class=\"number\">1</span><span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">      <span class=\"built_in\">min</span> <span class=\"operator\">=</span> rng<span class=\"punctuation\">[[</span><span class=\"number\">1</span><span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">      <span class=\"built_in\">max</span> <span class=\"operator\">=</span> rng<span class=\"punctuation\">[[</span><span class=\"number\">2</span><span class=\"punctuation\">]</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">    <span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>sort<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/4b67467c8ad6e40cb3fffad24222564bf4858788/ae5b1/demos/action-tidy/dplyr.png\" alt=\"å›¾12.4 ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå…è®¸æ‚¨é€‰æ‹©ä¸€ä¸ªå˜é‡ä½œä¸ºé˜ˆå€¼ï¼Œå¹¶é€‰æ‹©å¦‚ä½•å¯¹ç»“æœè¿›è¡Œæ’åºã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-dplyr/æŸ¥çœ‹å®æ—¶æ•ˆæœ\"></p>\n<p>å¤§å¤šæ•°å…¶ä»–é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ç»“åˆ<code>.data</code>å’Œæ‚¨çš„ç°æœ‰ç¼–ç¨‹æŠ€èƒ½æ¥è§£å†³ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦æ¡ä»¶æ€§åœ°ä»¥å‡åºæˆ–é™åºè¿›è¡Œæ’åºï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Sort by&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  checkboxInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;desc&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Descending order?&quot;</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  sorted <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>desc<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">,</span> desc<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span> <span class=\"keyword\">else</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">,</span> .data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span>sorted<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>éšç€ä½ æä¾›æ›´å¤šæ§åˆ¶é€‰é¡¹ï¼Œä½ ä¼šå‘ç°ä»£ç å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªæ—¢å…¨é¢åˆå‹å¥½çš„ç”¨æˆ·ç•Œé¢ä¹Ÿå˜å¾—è¶Šæ¥è¶Šéš¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸€ç›´ä¸“æ³¨äºæ•°æ®åˆ†æçš„ä»£ç å·¥å…·ï¼šåˆ›å»ºå¥½çš„ç”¨æˆ·ç•Œé¢çœŸçš„éå¸¸éš¾ï¼</p>\n<h3 id=\"12-2-4-ç”¨æˆ·æä¾›çš„æ•°æ®\"><a href=\"#12-2-4-ç”¨æˆ·æä¾›çš„æ•°æ®\" class=\"headerlink\" title=\"12.2.4 ç”¨æˆ·æä¾›çš„æ•°æ®\"></a>12.2.4 ç”¨æˆ·æä¾›çš„æ•°æ®</h3><p>åœ¨ç»§ç»­è®¨è®ºæ•´æ´é€‰æ‹©ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®¨è®ºæœ€åä¸€ä¸ªè¯é¢˜ï¼šç”¨æˆ·æä¾›çš„æ•°æ®ã€‚ä»¥<code>å›¾12.5</code>ä¸­æ˜¾ç¤ºçš„è¿™ä¸ªåº”ç”¨ç¨‹åºä¸ºä¾‹ï¼šå®ƒå…è®¸ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ªtsvæ–‡ä»¶ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªå˜é‡å¹¶æ ¹æ®è¯¥å˜é‡è¿›è¡Œç­›é€‰ã€‚å®ƒé€‚ç”¨äºç»å¤§å¤šæ•°ä½ å¯èƒ½ä¼šå°è¯•çš„è¾“å…¥ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  fileInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;dataset&quot;</span><span class=\"punctuation\">,</span> accept <span class=\"operator\">=</span> <span class=\"string\">&quot;.tsv&quot;</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> character<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  numericInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span> <span class=\"built_in\">min</span> <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span> step <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;output&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  data <span class=\"operator\">&lt;-</span> reactive<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>data<span class=\"punctuation\">)</span></span><br><span class=\"line\">    vroom<span class=\"operator\">::</span>vroom<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>data<span class=\"operator\">$</span>datapath<span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  observeEvent<span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    updateSelectInput<span class=\"punctuation\">(</span>session<span class=\"punctuation\">,</span> <span class=\"string\">&quot;var&quot;</span><span class=\"punctuation\">,</span> choices <span class=\"operator\">=</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  observeEvent<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">,</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    val <span class=\"operator\">&lt;-</span> data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">    updateNumericInput<span class=\"punctuation\">(</span>session<span class=\"punctuation\">,</span> <span class=\"string\">&quot;min&quot;</span><span class=\"punctuation\">,</span> value <span class=\"operator\">=</span> <span class=\"built_in\">min</span><span class=\"punctuation\">(</span>val<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  output<span class=\"operator\">$</span>output <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">)</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    data<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      arrange<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      head<span class=\"punctuation\">(</span><span class=\"number\">10</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/a2b57fbb1d8a118a0410942708a051e92355b7a6/a504d/demos/action-tidy/user-supplied.png\" alt=\"å›¾12.5 ä¸€ä¸ªè¿‡æ»¤ç”¨æˆ·æä¾›çš„æ•°æ®çš„åº”ç”¨ç¨‹åºï¼Œå…·æœ‰ä»¤äººæƒŠè®¶çš„æ•…éšœæ¨¡å¼ã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-user-supplied/æŸ¥çœ‹å®æ—¶æ•ˆæœ\"></p>\n<p>è¿™é‡Œä½¿ç”¨<a href=\"https://dplyr.tidyverse.org/reference/filter.html\">filter()</a>æœ‰ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬æŠŠå¯¹<code>filter()</code>çš„è°ƒç”¨æå–å‡ºæ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¹‹å¤–ç›´æ¥æ“ä½œå®ƒï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df <span class=\"operator\">&lt;-</span> data.frame<span class=\"punctuation\">(</span>x <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span> y <span class=\"operator\">=</span> <span class=\"number\">2</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">input <span class=\"operator\">&lt;-</span> <span class=\"built_in\">list</span><span class=\"punctuation\">(</span>var <span class=\"operator\">=</span> <span class=\"string\">&quot;x&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">min</span> <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">df <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   x y</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1 1 2</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœä½ è¯•éªŒè¿™æ®µä»£ç ï¼Œä½ ä¼šå‘ç°å®ƒå¯¹äºç»å¤§å¤šæ•°æ•°æ®æ¡†éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ï¼šå¦‚æœæ•°æ®æ¡†ä¸­åŒ…å«ä¸€ä¸ªåä¸º<code>input</code>çš„å˜é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df <span class=\"operator\">&lt;-</span> data.frame<span class=\"punctuation\">(</span>x <span class=\"operator\">=</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span> y <span class=\"operator\">=</span> <span class=\"number\">2</span><span class=\"punctuation\">,</span> input <span class=\"operator\">=</span> <span class=\"number\">3</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">df <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; Error in `filter()`:</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; ! Problem while computing `..1 = .data[[&quot;x&quot;]] &gt; input$min`.</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; Caused by error in `input$min`:</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; ! $ operator is invalid for atomic vectors</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬æ”¶åˆ°ä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œå› ä¸º<code>filter()</code>æ­£åœ¨å°è¯•è®¡ç®—<code>df$input$min</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df<span class=\"operator\">$</span>input<span class=\"operator\">$</span><span class=\"built_in\">min</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; Error in df$input$min: $ operator is invalid for atomic vectors</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºæ•°æ®å˜é‡å’Œç¯å¢ƒå˜é‡çš„æ­§ä¹‰é€ æˆçš„ï¼Œå¹¶ä¸”åœ¨ä¸¤è€…éƒ½å¯ç”¨æ—¶ï¼Œæ•°æ®æ©è”½æ›´å€¾å‘äºä½¿ç”¨æ•°æ®å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨<code>.env</code>æ¥å‘Šè¯‰<code>filter()</code>åªåœ¨ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾<code>min</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df <span class=\"operator\">%&gt;%</span> filter<span class=\"punctuation\">(</span>.data<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> .env<span class=\"operator\">$</span>input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   x y input</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1 1 2     3</span></span><br></pre></td></tr></table></figure>\n\n<p>è¯·æ³¨æ„ï¼Œè¿™ä¸ªé—®é¢˜åªæœ‰åœ¨å¤„ç†ç”¨æˆ·æä¾›çš„æ•°æ®æ—¶æ‰éœ€è¦è€ƒè™‘ï¼›åœ¨å¤„ç†è‡ªå·±çš„æ•°æ®æ—¶ï¼Œä½ å¯ä»¥ç¡®ä¿æ•°æ®å˜é‡çš„åç§°ä¸ä¼šä¸ç¯å¢ƒå˜é‡çš„åç§°å†²çªï¼ˆå¦‚æœä¸å°å¿ƒå†²çªäº†ï¼Œä½ ä¼šç«‹åˆ»å‘ç°ï¼‰ã€‚</p>\n<h3 id=\"12-2-5-ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ\"><a href=\"#12-2-5-ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ\" class=\"headerlink\" title=\"12.2.5 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ\"></a>12.2.5 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸºç¡€Rï¼Ÿ</h3><p>åˆ°è¿™æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœæ²¡æœ‰<code>filter()</code>å‡½æ•°ï¼Œä½¿ç”¨ç­‰æ•ˆçš„åŸºç¡€Rä»£ç ä¼šä¸ä¼šæ›´å¥½ï¼Ÿ</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df<span class=\"punctuation\">[</span>df<span class=\"punctuation\">[[</span>input<span class=\"operator\">$</span>var<span class=\"punctuation\">]</span><span class=\"punctuation\">]</span> <span class=\"operator\">&gt;</span> input<span class=\"operator\">$</span><span class=\"built_in\">min</span><span class=\"punctuation\">,</span> <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"comment\">#&gt;   x y input</span></span><br><span class=\"line\"><span class=\"comment\">#&gt; 1 1 2     3</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ˜¯ä¸€ä¸ªå®Œå…¨åˆç†çš„ç«‹åœºï¼Œåªè¦ä½ æ„è¯†åˆ°<code>filter()</code>ä¸ºä½ åšçš„å·¥ä½œï¼Œä»¥ä¾¿ä½ èƒ½ç”Ÿæˆç­‰æ•ˆçš„åŸºç¡€Rä»£ç ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼š</p>\n<ul>\n<li><p>å¦‚æœdfåªåŒ…å«ä¸€åˆ—ï¼Œä½ éœ€è¦ä½¿ç”¨<code>drop = FALSE</code>ï¼ˆå¦åˆ™ä½ ä¼šå¾—åˆ°ä¸€ä¸ªå‘é‡è€Œä¸æ˜¯æ•°æ®æ¡†ï¼‰ã€‚</p>\n</li>\n<li><p>ä½ éœ€è¦ä½¿ç”¨<a href=\"https://rdrr.io/r/base/which.html\">which()</a>æˆ–ç±»ä¼¼å‡½æ•°æ¥åˆ é™¤ä»»ä½•ç¼ºå¤±å€¼ã€‚</p>\n</li>\n<li><p>ä½ ä¸èƒ½è¿›è¡Œåˆ†ç»„è¿‡æ»¤ï¼ˆä¾‹å¦‚ï¼Œ<code>df %&gt;% group_by(g) %&gt;% filter(n() == 1)</code>ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ åªæ˜¯ä½¿ç”¨dplyræ¥å¤„ç†éå¸¸ç®€å•çš„æ¡ˆä¾‹ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½¿ç”¨ä¸ä½¿ç”¨æ•°æ®æ©è”½çš„åŸºç¡€Rå‡½æ•°æ›´å®¹æ˜“ã€‚ç„¶è€Œï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œtidyverseçš„ä¸€ä¸ªä¼˜åŠ¿åœ¨äºå®ƒä»”ç»†è€ƒè™‘äº†è¾¹ç¼˜æƒ…å†µï¼Œä»¥ä¾¿å‡½æ•°èƒ½æ›´ä¸€è‡´åœ°å·¥ä½œã€‚æˆ‘ä¸æƒ³å¤¸å¤§è¿™ä¸€ç‚¹ï¼Œä½†åŒæ—¶ï¼Œå¾ˆå®¹æ˜“å¿˜è®°ç‰¹å®šåŸºç¡€Rå‡½æ•°çš„æ€ªç™–ï¼Œå¹¶ç¼–å†™å‡º95%ä»¥ä¸Šæ—¶é—´éƒ½èƒ½å·¥ä½œï¼Œä½†åœ¨å¦å¤–5%çš„æ—¶é—´é‡Œä¼šä»¥ä¸å¯»å¸¸çš„æ–¹å¼å¤±è´¥çš„ä»£ç ã€‚</p>\n<h2 id=\"12-3-æ•´æ´é€‰æ‹©-Tidy-selection\"><a href=\"#12-3-æ•´æ´é€‰æ‹©-Tidy-selection\" class=\"headerlink\" title=\"12.3 æ•´æ´é€‰æ‹© Tidy-selection\"></a>12.3 æ•´æ´é€‰æ‹© Tidy-selection</h2><p>é™¤äº†æ•°æ®æ©è”½ä¹‹å¤–ï¼Œæ•´æ´è¯„ä¼°è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼šæ•´æ´é€‰æ‹©ã€‚æ•´æ´é€‰æ‹©æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥é€šè¿‡ä½ç½®ã€åç§°æˆ–ç±»å‹é€‰æ‹©åˆ—ã€‚å®ƒåœ¨<a href=\"https://dplyr.tidyverse.org/reference/select.html\">dplyr::select()</a>å’Œ<a href=\"https://dplyr.tidyverse.org/reference/across.html\">dplyr::across()</a>ä»¥åŠtidyrä¸­çš„è®¸å¤šå‡½æ•°ï¼ˆå¦‚<a href=\"https://tidyr.tidyverse.org/reference/pivot_longer.html\">pivot_longer()</a>ã€<a href=\"https://tidyr.tidyverse.org/reference/pivot_wider.html\">pivot_wider()</a>ã€<a href=\"https://tidyr.tidyverse.org/reference/separate.html\">separate()</a>ã€<a href=\"https://tidyr.tidyverse.org/reference/extract.html\">extract()</a>å’Œ<a href=\"https://tidyr.tidyverse.org/reference/unite.html\">unite()</a>ï¼‰ä¸­ä½¿ç”¨ã€‚</p>\n<h3 id=\"12-3-1-é—´æ¥å¼•ç”¨\"><a href=\"#12-3-1-é—´æ¥å¼•ç”¨\" class=\"headerlink\" title=\"12.3.1 é—´æ¥å¼•ç”¨\"></a>12.3.1 é—´æ¥å¼•ç”¨</h3><p>è¦é—´æ¥å¼•ç”¨å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨<a href=\"https://tidyselect.r-lib.org/reference/all_of.html\">any_of()</a>æˆ–<a href=\"https://tidyselect.r-lib.org/reference/all_of.html\">all_of()</a>ï¼šä¸¤è€…éƒ½æœŸæœ›ä¸€ä¸ªåŒ…å«æ•°æ®å˜é‡åç§°çš„å­—ç¬¦å‘é‡ä½œä¸ºç¯å¢ƒå˜é‡ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå¦‚æœä½ æä¾›äº†ä¸€ä¸ªåœ¨è¾“å…¥ä¸­ä¸å­˜åœ¨çš„å˜é‡åï¼Œ<code>all_of()</code>ä¼šå¼•å‘é”™è¯¯ï¼Œè€Œ<code>any_of()</code>åˆ™ä¼šé™é»˜åœ°å¿½ç•¥å®ƒã€‚</p>\n<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹åº”ç”¨ç¨‹åºå…è®¸ç”¨æˆ·ä½¿ç”¨å¤šé€‰è¾“å…¥é€‰æ‹©ä»»æ„æ•°é‡çš„å˜é‡ï¼ŒåŒæ—¶ä½¿ç”¨<code>all_of()</code>ï¼š</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variables&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span></span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> select<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-3-2-æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½\"><a href=\"#12-3-2-æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½\" class=\"headerlink\" title=\"12.3.2 æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½\"></a>12.3.2 æ•´æ´é€‰æ‹©ä¸æ•°æ®æ©è”½</h3><p>å½“ä½¿ç”¨é‡‡ç”¨æ•´æ´é€‰æ‹©çš„å‡½æ•°æ—¶ï¼Œå¤„ç†å¤šä¸ªå˜é‡å˜å¾—è½»è€Œæ˜“ä¸¾ï¼šæ‚¨åªéœ€å°†åŒ…å«å˜é‡åçš„å­—ç¬¦å‘é‡ä¼ é€’ç»™<code>any_of()</code>æˆ–<code>all_of()</code>ã€‚å¦‚æœæˆ‘ä»¬ä¹Ÿèƒ½åœ¨æ•°æ®æ©è”½å‡½æ•°ä¸­ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œé‚£è¯¥æœ‰å¤šå¥½ï¼Ÿè¿™æ­£æ˜¯dplyr 1.0.0ç‰ˆæœ¬ä¸­æ·»åŠ çš„<a href=\"https://dplyr.tidyverse.org/reference/across.html\">across()</a>å‡½æ•°çš„è®¾è®¡ç†å¿µã€‚å®ƒå…è®¸æ‚¨åœ¨æ•°æ®æ©è”½å‡½æ•°ä¸­ä½¿ç”¨æ•´æ´é€‰æ‹©ã€‚</p>\n<p><code>across()</code>å‡½æ•°é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºé€‰æ‹©å˜é‡ï¼Œåœ¨<a href=\"https://dplyr.tidyverse.org/reference/group_by.html\">group_by()</a>æˆ–<a href=\"https://dplyr.tidyverse.org/reference/distinct.html\">distinct()</a>ç­‰å‡½æ•°ä¸­éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹åº”ç”¨ç¨‹åºå…è®¸æ‚¨é€‰æ‹©ä»»æ„æ•°é‡çš„å˜é‡å¹¶è®¡ç®—å®ƒä»¬çš„å”¯ä¸€å€¼æ•°é‡ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Variables&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;count&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>count <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    req<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      group_by<span class=\"punctuation\">(</span>across<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      summarise<span class=\"punctuation\">(</span>n <span class=\"operator\">=</span> n<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> .groups <span class=\"operator\">=</span> <span class=\"string\">&quot;drop&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/20b7acd57783cbc15cf0d64d8964bba1e093ba06/1c155/demos/action-tidy/across.png\" alt=\"å›¾12.6 æ­¤åº”ç”¨ç¨‹åºå…è®¸æ‚¨é€‰æ‹©ä»»æ„æ•°é‡çš„å˜é‡ï¼Œå¹¶è®¡ç®—å®ƒä»¬çš„å”¯ä¸€ç»„åˆæ•°é‡ã€‚è¯·è®¿é—®https://hadley.shinyapps.io/ms-acrosså®æ—¶æŸ¥çœ‹\"></p>\n<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–å‡½æ•°åˆ—è¡¨ï¼‰ï¼Œåº”ç”¨äºæ¯ä¸ªé€‰å®šçš„åˆ—ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆ<a href=\"https://dplyr.tidyverse.org/reference/mutate.html\">mutate()</a>å’Œ<a href=\"https://dplyr.tidyverse.org/reference/summarise.html\">summarise()</a>ç­‰å‡½æ•°ï¼Œå› ä¸ºæ‚¨é€šå¸¸æƒ³è¦ä»¥æŸç§æ–¹å¼è½¬æ¢æ¯ä¸ªå˜é‡ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å…è®¸ç”¨æˆ·é€‰æ‹©ä»»æ„æ•°é‡çš„åˆ†ç»„å˜é‡ï¼Œä»¥åŠä»»æ„æ•°é‡çš„å˜é‡ï¼Œä»¥è®¡ç®—å®ƒä»¬çš„å¹³å‡å€¼è¿›è¡Œæ±‡æ€»ã€‚</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ui <span class=\"operator\">&lt;-</span> fluidPage<span class=\"punctuation\">(</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars_g&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Group by&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  selectInput<span class=\"punctuation\">(</span><span class=\"string\">&quot;vars_s&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;Summarise&quot;</span><span class=\"punctuation\">,</span> <span class=\"built_in\">names</span><span class=\"punctuation\">(</span>mtcars<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> multiple <span class=\"operator\">=</span> <span class=\"literal\">TRUE</span><span class=\"punctuation\">)</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  tableOutput<span class=\"punctuation\">(</span><span class=\"string\">&quot;data&quot;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">)</span></span><br><span class=\"line\"></span><br><span class=\"line\">server <span class=\"operator\">&lt;-</span> <span class=\"keyword\">function</span><span class=\"punctuation\">(</span>input<span class=\"punctuation\">,</span> output<span class=\"punctuation\">,</span> session<span class=\"punctuation\">)</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  output<span class=\"operator\">$</span>data <span class=\"operator\">&lt;-</span> renderTable<span class=\"punctuation\">(</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    mtcars <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      group_by<span class=\"punctuation\">(</span>across<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars_g<span class=\"punctuation\">)</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span> <span class=\"operator\">%&gt;%</span> </span><br><span class=\"line\">      summarise<span class=\"punctuation\">(</span>across<span class=\"punctuation\">(</span>all_of<span class=\"punctuation\">(</span>input<span class=\"operator\">$</span>vars_s<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> mean<span class=\"punctuation\">)</span><span class=\"punctuation\">,</span> n <span class=\"operator\">=</span> n<span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">)</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">)</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"12-4-parse-eval\"><a href=\"#12-4-parse-eval\" class=\"headerlink\" title=\"12.4 parse() + eval()\"></a>12.4 parse() + eval()</h2><p>åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæœ‰å¿…è¦å¯¹<a href=\"https://rdrr.io/r/base/paste.html\">paste()</a> + <a href=\"https://rdrr.io/r/base/parse.html\">parse()</a> + <a href=\"https://rdrr.io/r/base/eval.html\">eval()</a>ç»„åˆè¿›è¡Œç®€çŸ­çš„è¯„è®ºã€‚å¦‚æœä½ å®Œå…¨ä¸äº†è§£è¿™ä¸ªç»„åˆï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ï¼Œä½†å¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡å®ƒï¼Œæˆ‘æƒ³ç»™ä½ ä¸€ä¸ªå°å°çš„è­¦å‘Šã€‚</p>\n<p>è¿™æ˜¯ä¸€ä¸ªè¯±äººçš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒåªéœ€è¦å­¦ä¹ å¾ˆå°‘çš„æ–°æ¦‚å¿µã€‚ä½†å®ƒä¹Ÿæœ‰ä¸€äº›ä¸»è¦çš„ç¼ºç‚¹ï¼šç”±äºä½ æ­£åœ¨å°†å­—ç¬¦ä¸²æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå¾ˆå®¹æ˜“æ„å¤–åœ°åˆ›å»ºå‡ºæ— æ•ˆçš„ä»£ç ï¼Œæˆ–è€…å¯èƒ½è¢«æ»¥ç”¨ä»¥æ‰§è¡Œä½ ä¸å¸Œæœ›çš„æ“ä½œçš„ä»£ç ã€‚å¦‚æœè¿™åªæ˜¯ä½ è‡ªå·±ä½¿ç”¨çš„Shinyåº”ç”¨ç¨‹åºï¼Œè¿™å¯èƒ½ä¸æ˜¯éå¸¸é‡è¦ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå€¼å¾—å…»æˆçš„å¥½ä¹ æƒ¯â€”â€”å¦åˆ™ï¼Œå¾ˆå®¹æ˜“åœ¨ä½ å¹¿æ³›åˆ†äº«çš„åº”ç”¨ç¨‹åºä¸­æ„å¤–åœ°åˆ›å»ºä¸€ä¸ªå®‰å…¨æ¼æ´ã€‚æˆ‘ä»¬å°†åœ¨ç¬¬<code>22ç« </code>ä¸­å†æ¬¡æåŠè¿™ä¸ªè§‚ç‚¹ã€‚</p>\n<p>ï¼ˆå¦‚æœä½ å‘ç°è¿™æ˜¯è§£å†³é—®é¢˜çš„å”¯ä¸€æ–¹æ³•ï¼Œä¸å¿…æ„Ÿåˆ°æ²®ä¸§ã€‚ä½†å½“ä½ æœ‰äº†æ›´å¤šçš„æ€è€ƒç©ºé—´æ—¶ï¼Œæˆ‘å»ºè®®èŠ±äº›æ—¶é—´å¼„æ¸…æ¥šå¦‚ä½•åœ¨ä¸è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œçš„æƒ…å†µä¸‹å®ç°ã€‚è¿™å°†æœ‰åŠ©äºä½ æˆä¸ºä¸€åæ›´å¥½çš„Rç¨‹åºå‘˜ã€‚ï¼‰</p>\n<h2 id=\"12-5-æ€»ç»“\"><a href=\"#12-5-æ€»ç»“\" class=\"headerlink\" title=\"12.5 æ€»ç»“\"></a>12.5 æ€»ç»“</h2><p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•åˆ›å»ºShinyåº”ç”¨ç¨‹åºï¼Œè®©ç”¨æˆ·é€‰æ‹©å°†å“ªäº›å˜é‡è¾“å…¥åˆ°å¦‚<a href=\"https://dplyr.tidyverse.org/reference/filter.html\">dplyr::filter()</a>å’Œ<a href=\"https://ggplot2.tidyverse.org/reference/aes.html\">ggplot2::aes()</a>è¿™æ ·çš„tidyverseå‡½æ•°ä¸­ã€‚è¿™éœ€è¦ä½ ç†è§£ä¸€ä¸ªä½ ä¹‹å‰å¯èƒ½ä»æœªè€ƒè™‘è¿‡çš„å…³é”®åŒºåˆ«ï¼šæ•°æ®å˜é‡å’Œç¯å¢ƒå˜é‡çš„ä¸åŒã€‚è¿™å¯èƒ½éœ€è¦ä¸€äº›ç»ƒä¹ æ‰èƒ½å˜å¾—è‡ªç„¶ï¼Œä½†ä¸€æ—¦ä½ æŒæ¡äº†è¿™äº›æ¦‚å¿µï¼Œä½ å°±èƒ½å¤Ÿè§£é”tidyverseçš„æ•°æ®åˆ†æåŠŸèƒ½ï¼Œå¹¶å°†å…¶æš´éœ²ç»™éRç”¨æˆ·ã€‚</p>\n<p>è¿™æ˜¯æœ¬ä¹¦<code>â€œShinyå®æˆ˜â€</code>éƒ¨åˆ†çš„æœ€åä¸€ç« ã€‚æ—¢ç„¶ä½ å·²ç»æ‹¥æœ‰äº†åˆ¶ä½œä¸€ç³»åˆ—æœ‰ç”¨åº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥å…·ï¼Œæˆ‘å°†é‡ç‚¹æé«˜ä½ å¯¹Shinyåº•å±‚ç†è®ºçš„ç†è§£ã€‚</p>\n<h1 id=\"åŠ å…³æ³¨\"><a href=\"#åŠ å…³æ³¨\" class=\"headerlink\" title=\"åŠ å…³æ³¨\"></a>åŠ å…³æ³¨</h1><table align=\"center\"><tr>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" alt=\"ç”Ÿä¿¡ä¹‹å·…å¾®ä¿¡å…¬ä¼—å·\" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-right: 0px;margin-bottom: 5px;align: center;\"></td>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" alt=\"ç”Ÿä¿¡ä¹‹å·…å°ç¨‹åºç \" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-left: 0px;margin-bottom: 5px;align: center\"></td>\n</tr></table>\n\n\n<p><font color=\"#FF0000\"><ruby><b>æ•¬å‘Š</b>ï¼šä½¿ç”¨æ–‡ä¸­è„šæœ¬è¯·å¼•ç”¨æœ¬æ–‡ç½‘å€ï¼Œè¯·å°Šé‡æœ¬äººçš„åŠ³åŠ¨æˆæœï¼Œè°¢è°¢ï¼<rt><b>Notice</b>: When you use the scripts in this article, please cite the link of this webpage. Thank you!</rt></ruby></font></p>\n","categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"ç¼–ç¨‹","path":"api/tags/ç¼–ç¨‹.json"},{"name":"Shinyå…¥é—¨ç³»åˆ—","path":"api/tags/Shinyå…¥é—¨ç³»åˆ—.json"}]}