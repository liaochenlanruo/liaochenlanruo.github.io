{"name":"NCBI","postlist":[{"title":"NCBI上传基因簇之tbl2asn的使用","slug":"NCBI上传基因簇之tbl2asn的使用","date":"2021-11-12T11:47:28.000Z","updated":"2022-01-08T02:16:28.406Z","comments":true,"path":"api/articles/NCBI上传基因簇之tbl2asn的使用.json","excerpt":null,"keywords":null,"cover":null,"content":"<p>向<a href=\"https://www.ncbi.nlm.nih.gov/\"> NCBI</a> 提交基因簇的时候需要提供 sqn 格式的文件，这个文件需要通过<a href=\"https://www.ncbi.nlm.nih.gov/genbank/tbl2asn2/\"> tbl2asn</a> 生成。</p>\n<h1 id=\"文件准备\"><a class=\"markdownIt-Anchor\" href=\"#文件准备\"></a> 文件准备</h1>\n<p>tbl2asn 依赖三个文件来生成 sqn 文件：</p>\n<ul>\n<li>文件 1：fasta 格式的基因组序列文件</li>\n</ul>\n<p>Header 处的中括号部分可以不写。</p>\n<pre class=\"line-numbers language-tex\" data-language=\"tex\"><code class=\"language-tex\">&gt;Toyoncin_biosynthesis_gene_cluster [organism&#x3D;Bacillus toyonensis] [strain&#x3D;XIN-YC13] [topology&#x3D;linear] [moltype&#x3D;DNA] [tech&#x3D;wgs] [gcode&#x3D;11] [country&#x3D;China] Bacillus toyonensis strain XIN-YC13 Toyoncin biosynthesis gene cluster, complete sequence\nttaaaa taatttaata\ngggaagtttt ttagttgttt tggactcttc ccaaacactg ctttaagtgt tggattaaca\n tcatccctat tccccgaaaa cataatgtga ggatttatga ataatgcata tgctctaaca\nttattatcat caacaccact ctctgaacga gccataatac ccttatcaat taattttcta\naccaatggac taactttagt ttcatgtctt ccaatttttt tagctaattc tcgctgagtt\n aatgggattt gttctttcga attaatatca ttaactaaac aattacttaa aaaacctaca\ncacattgaaa tatctactaa aaataccttc tcagcatttg ttaaataatc aatttcgaac\n aaatactgga tattttgttg aataatctga acaaacttcg ctttattttt cactttacgc\n tcaggaacta atttcattcc tcttgaacga gcttttgatt gaagtttatt tgctaaatac\n atctcttctt cagacaagac ctttaaatcc tcaatatctc tcaatcttga atttttttca\n gcttgttcta agttgataaa ctttgacata ttctttttgc tcctcttttc taagattttc\n aactagagaa ggaaaaaatt ttatgttatg attcctgtag aatttacaat tcaatatgta\n caaaagaact ccccttttct aattgatagt ttggtcgctt tcaattataa tacaagggga\n ttttttacat cttaaaattt ttcatttttg aatcaatccc tgaaaatata aagaacacat\n cacataaatt attcttaata ttttataatc gaaaaaataa taggaataaa gaaaaatact\n gcaataaata tattcatctg tttcttactc aaaccggcca ctatatttaa tcccattcct\n ataataatta attcccaaat tgaaaacact tcaaatttac tacaaattat atatagtaat\n gtacctggtt caaatattga acccaaacta gtatacgtta ctatttctcc tcctataaat\n agtgttaata atgtattaat taatttacct aaaatagaaa ttacactagc aaatattgta\n atagatacta actttttata agaaacatct ttactcatca gcatcattac aatctttaaa\n ataatccccc aaataaaagg tgtaattaaa gcaatgaaaa tcgatgcaaa acctcctaac\n atcatttggg aaacaagggg tatttccata tctgcaaata cttctttttg aattttaacc\n aattctggat tgctatgtct tgcatataca gataaaatcc ctattattgc ttgtataact\n gataaataca taagaggaaa ccatatcgga ctaattattt tcatacgctc gaattcagaa\n ataggagatg taatcataaa aattagagat ggtttttcat aattgttttt ttctttattc\n actactaaac tattatccat atattaacac cttctttttt tattcataac gtaatgcttc\n aattggatct aattttgcag ccttattggc tggaatcaat ccaaatataa taccaagcga\n catcgaaaat aatacgccac ccacaacaac ttcccatgaa acaagaggcg gccattttgc\n aaatgtggac acaatgtacg ctccacaata accaagtcca atcccaatca atccaccaag\n aagtgtcaac ataattgctt caattaaaaa ttgcaacaaa attttaccac gcgttgctcc\naagtgcttta cgtaccccaa tctcacgtgt acgctctgtt acagaaacaa gcatgatatt\ncataactcca attccgccta caactaaaga aatacttgca atacctgcaa taatcattgt\ncataatatta gtaactttag aaataccttt ttggatttct tctaaattta caatttcata\n tttcccttta aactcttcag attgtctatc atttaataat tttactccct tttttccagc\ntgtttgtaat tgatcaaccc ctattgcttg aattgtaata gattgttgag agttatcatc\n tccatataat attggccata ttgaaagtgg tattaaaatt tctgacattc caaaaccaag\n ctcttcatct cctgaactga atagaccaat aatttgaagt ggctgacctt taatttctat\n aattttacca atgactgatt catgctcatt aggaaataac tctttcacta atgtttgatt\n aaccattatt acattattac cttgcatcaa atcatcttca ttaagagaac gacctttctc\n tattttcatt ttagtcatat taaaatattc ttttgtaata ccatttatat tagttacaac\nctttttatca tcaccaatta atgtctctgt actagagttt tgaacaatta catttttaat\n ttcttttatc ttttttaact caaaaagatc ttcttcactt acagatggtt ttttgtcatt\n catagatcct gttgttaata actcattaat atcttcttta tatgtaatcg gaatagtgtt\n attgccagaa gcggtaaatt gtgatttaag cattgcttct ccacctttac caatggctac\n aacagtaata atagaaccta caccaataat aattccaagc atcgtaagag ctgagcgcag\n tttatgagct aaaatagaag ataaggcaat ttttatacta tctaataaac tcataccata\n caccttctat cttctgtaat tttcccatct cgcaatatga tgcgacgtga agaataagct\n gctacctctt cttcatgtgt aaccataacg attgtcgtac cttctgcatt taacttcgta\n aagatatcca taacttgtgc accagacttc gtatcaagcg caccagttgg ctcatcagcc\n ataataaacg ttggattatt cgcaatcgat cttgcaatag caacacgctg cttctgtcca\n cctgacagct cactaggtaa atgatgtact ctatccgcta atccaacttt cccaagcgct\n tcgagcgctc tttgacgacg ctctgctttc ttcactccac cataaatcag tggtaattca\n acgttttcca ctgcggaaag gcgcggcaat aaattaaaat gctggaacac aaaaccgata\ntattcattac gaattaaagc aagttttgac tcatctgctg ttaaaatatt cacatcattc\nagcatatatt cgccttctgt tggacgatct aaacaaccga taatattcat aagagttgat\nttaccagaac cagacggtcc cataattgaa acaaattcac caccttgaat agttaaacta\nataccgtgca aaataggaac cgccattttt ccttgataat acgttttagc aatattattt\naacgtaatca tttctctttc acttccattc cgtcatatac gttgtcggaa ggatttttaa\nccaccttttg ccccactgtt gcgccctcta caatctctgt ccaatctcca tcagtagcac\ncttttttcac attttgttta cgaagcttac ctttctcttc gatatataca aatgcatcat\n      cgcctttttc aacaatactc ttacttggaa cagcaatcat tcttttattc tctaaattta\n      cttgtaacga aacatgataa cctggagata aaccatcttg actatcaaga cttgctttat\n      atgtatattg agacatattt tgagtcactt cccccatgcc atcagcttga gccatttcta\n      cacttgttgg gaactcactt acctctgtaa tcttccctgt ccactttttc ttactatttg\n      ctttcgcagt tacagtaaac gtttgatcct tttgaatttg cgacttctga agctcagtta\n      atgttccttg aatttggaat ggatctttag aagcaacttg taaaaaggct ttcccttgac\n      cacctaacgc ttgtgatgaa ctttgtgctg catctttatc taacttttga acaacaccag\n      caaaattgct ataaatcgta agttcgttct gctttttatt taactcttct ttttgtaact\n      tccctttctc tttctcaagg tctgttgtct tttgcgctat ttctaattca cttacttgct\n      cttccatcgg atctattact tctttcccag ctccgctatc tttcgccttc ttaatttctt\n      tcttcaacga atcaatcttc tttttccctt ggtcataacg catatctgcc atcttttgat\n      caagcacagc ttgcttcatt tgcaaattaa tttcttcatt atcgtaagaa aacaatttcg\n      ttcccttttc tatttcttgt ccttctttca cttcaatatc tttcactttt cctttagtca\n      gatccgcgta gaaactttca atattccccg gcttcacttg accagaaatt aactttgtat\n      tattaagatt gcgctctgtg actttttcaa aactaacagt atctattttt gttaccgctt\n      tcttcttact ttgcactacg aaaatattaa taaatgtaac aataacaatt aacgcaataa\n      ctccaataat agctcctttc tttttatttt taaaaataaa aagttctttt ttaatcacaa\n      caatcttctc cttattcata tctaaaattt aaacttttaa attttacata aaaatttaaa\n      acttctaaaa tataacatgt ataatttacc atagatgatt tattttgtat aatataaaaa\n      tatctatata aataatgcta attttcaaac aatggggtgg aagatactaa tgttagaaaa\n      aaaagataga ctaacagaaa tagaggaaca aattatatac ttaatttcaa aggaattagg\n      aaataaagaa atagcggaaa aattaaatta ttcacaacgt agcatcggtt acaaaataaa\n      taatattttt aaaaaattaa atgttaattc aagaatcgga ctgattatag aagctgtaaa\n      aaaaaatata atttaaatat aagaatgctt tcatgttaat attttataga aactaaatat\n      agaggtgatt aaaatgcaaa aattttttga agctattagt gctataggta tagtaggtta\n      ctttttaggt aaattcacaa gtattccttt aatagacaaa tatacattgt atttcggcgt\n      aatgttgatg attggggtta ttggaagatt tattataaaa gtaattaact cagaagaaga\n      gacacatgat tcaaacaaat aaaatactct aataaaaatg gaagaagatt gcacttaagt\n      gcaatcttct tccattttta ttgaaaattg attaaataat gttaatattg caattgtgtg\n      gtgcagatta gggtgattat gtaatagggg gaaattaaaa atgatcaata cagcttggaa\n      aattattaaa gcactacaaa aatacggtac aaaagcatac aatgttatca aaaaaggcgg\n      ccaagcaatg tacgacagct tcatggcagc taaagctaaa ggttggacac atgcagcttg\n      gtggctagta gaacatggtt caactttagg aacattctat gatttattaa aagctgctgg\n      attaatcgac taattacagc aactaaacaa ctaaacaact aaacaactta aaaatacaaa\n      ttaccctaaa ctgtacccct attacatatt aactaattat tttaaaggtt ggatgataat\n      atgtcaaata acatcatatc tgtaaaaaat ttaattaaaa gcttcgataa caaaatagta\n      ttagataaat taaatttcga aatgaaagaa aactccactg ttgtaataat aggtaaaaac\n      ggtgcaggta aaagtgtctt tctaaattgt ttacttggat ttattcatta caaccaaggt\n      tcaatactaa tagatggaca acctgtagaa aatcgattac atctccgcaa gattacatcg\n      ttaatttctt cagaccatca agaacatcta aatttattaa cccccaatga atatttttct\n      tttttacaag atatttacca actaaaaagt aataataaag acaaaattca aaattactca\n     gaagatctat atgttactaa agaactcaat actgtatttt catcactttc ttttggaaca\n     aaaaagaaaa tacaattaat tggtagccta ttatattctc ctaaattatt gatttgcgac\n     gaaatatttg aagggcttga tacagactca gtaaaatggg ttaaaaactt atttcaacaa\n     agaaaacaag aaaatctttc tactttattt acaactcata ttactgaaca tataacagat\n     ataacagaaa aaaattacat acttgaaaat ggaaaattaa ttgtgtaagt ttaaccactt\n     atatttaaag ctaaaattaa ggagcttaaa atatgaattt taatatatat aagagactat\n     atgataaatc aacagaagaa aaaagcaaaa caataacaaa acaaatatta tttggaatta\n     taaatagttc tatattaata ggtatactac tcacatgttt ggagattttc aactttaaaa\n     tttcaactgt aatgtatggt tatttcacta tatatataat actagaactt ttactattat\n     tctctgcaaa tcaactatat gaaagtacag aattcataat aaaattcctt aaatatacac\n     caataaccat aaataaacta tatttctcac attttctaag ttctaaatat tcattttcca\n     atctttttga aataataact ctcacatcaa ttttattaat atataatgtc gatatcttat\n     attcatttat tttcataatt agcttacaaa ttattagctt aataagaaca tatttagaat\n     ttttactatt atattctcaa aaaaaacagg ttaaaatttt tactctaacc cattttgttt\n     tcataatatc tatggttttt tatattattg ttaaaacaaa atcgatagat ttagtattct\n     ttgaaaacac aaatatgtta attatatctg ttcttctcat aacattcttg atatcacttt\n     taacatataa acatattata gaatacttaa tgaaaaataa tgaaattgta tataatgcta\n     tttttatcaa gttaactttt aacacagcta atttaattag taaattattt aaatttaata\n     catcaattgc atctttaata aaaatacata taatacgatt attacgtaat caagactata\n     taagtagatt actaaaaata ggaatattac tatttatttt ttcttctata agctttctat\n     ttttcgataa atcatcaaca aacaatgaaa tgagtgatat actttacttt tcatttttta\n     tttccttatt tagtttttct aacatacgat tagactataa cttagtttct aaattaagct\n     tagaggatta tccaataaca aaattacaat caagattaag cattgatata gcacatggaa\n     ttttactatt tatactatct ttatttcttt tattaacaca atacttattg aatccaacaa\n     atattctaac tctaattgat ggtttattat catttatttg tttttatttt ctaagtcttg\n     gtatagaaaa agcagatatt ataataacac caaaaacaaa atggaaaatg tatccattat\n     tttttgtgat gggattaata attgaagcaa tatttctatt aaaattcaaa atatggataa\n     aattaataac tttattcctt tgtatactgt ggtcatattt acgtgtttat tggaaattaa\n     aaaaacaata aacacaatta aaaagttccc ttcatatttt ttgaagggaa cttttatttt\n     aaacaaaaat tacaaacaag caaagttatt taaaagtaaa cttttaaaat tattgaatta\n     ataacaatta gtctaagata tatcagccaa atttaatttt taaacaaacc gaaaaaccct\n     ttccgttttt gtttctgatt ttggctctgt atttctctaa tgttttcaag caataactga\n     tctcgttttt caaatttttt ctctataaaa acctctaatt caatattttt atcttctact\n     tcctttaatt ttctctccgt attagccaaa tgttcttttg tggtaactaa ttcattcgta\n     atctcttgta atttttgaac aagcgtttga ttgaactgat tttgtaattg ttgattttct\n     aatacttcat ccaacttctt ttctaattcc gatttttcct ctcttgaaac aaacaaatca\n     agttctccat tccgccatgc tcgaacttga tcataagacc atttttgcac ctgtattttt\n     tctttaattg ctatcaattc ttctatattt tcctttgagt acctacgatg ccctccctga\n     cttcgctccg tttgtatatt aaattcgttt gaccatgctt ttaacaagtc aggggtaatc\n     cctaaacgat ccgcaacaat tttcggtgta tacatttctg attttaattc caa<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ul>\n<li>文件 2：描述基因特征的 feature table 文件（.tbl）</li>\n</ul>\n<p>该文件可以用 prokka 对文件 1 进行注释而得到，但是需要自己加以修改，加上文件前几行以及 gene 相关的信息。</p>\n<pre class=\"line-numbers language-tex\" data-language=\"tex\"><code class=\"language-tex\">&gt;Feature Toyoncin_biosynthesis_gene_cluster\n1\t8409\tsource\n\t\t\torganism\tBacillus toyonensis\n\t\t\tmol_type\tgenomic DNA\n\t\t\tstrain\tXIN-YC13\n585\t1\tgene\n\t\t\tgene\torf1\n585\t1\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00001\n\t\t\tproduct\tMarR family transcriptional regulator\n1476\t811\tgene\n\t\t\tgene\torf2\n1476\t811\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00002\n\t\t\tproduct\tYIP1 family membrane protein\n2710\t1496\tgene\n\t\t\tgene\torf3\n2710\t1496\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00003\n\t\t\tproduct\tABC transporter permease\n3387\t2707\tgene\n\t\t\tgene\torf4\n3387\t2707\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00004\n\t\t\tproduct\tABC transporter ATP-binding protein\n4595\t3384\tgene\n\t\t\tgene\torf5\n4595\t3384\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00005\n\t\t\tproduct\tRND family efflux transporter, MFP subunit\n4746\t4952\tgene\n\t\t\tgene\torf6\n4746\t4952\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00006\n\t\t\tproduct\tHelix-turn-helix transcriptional regulator\n5010\t5198\tgene\n\t\t\tgene\torf7\n5010\t5198\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00007\n\t\t\tproduct\tPutative membrane protein\n5337\t5549\tgene\n\t\t\tgene\ttoyA\n5337\t5549\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00008\n\t\t\tproduct\tToyonsin precusor\n5657\t6304\tgene\n\t\t\tgene\torf9\n5657\t6304\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00009\n\t\t\tproduct\tABC transporter ATP-binding protein\n6349\t7707\tgene\n\t\t\tgene\torf10\n6349\t7707\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00010\n\t\t\tproduct\tPutative membrane protein\n8391\t7849\tgene\n\t\t\tgene\torf11\n8391\t7849\tCDS\n\t\t\tinference\tab initio prediction:Prodigal:002006\n\t\t\tlocus_tag\tToyoncin_biosynthesis_gene_cluster_00011\n\t\t\tproduct\tMarR family transcriptional regulator<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ul>\n<li>文件 3：描述作者信息的模板文件（.sbt）</li>\n</ul>\n<p>可以在<a href=\"https://submit.ncbi.nlm.nih.gov/genbank/template/submission/\"> NCBI</a> 上生成该文件。</p>\n<pre class=\"line-numbers language-tex\" data-language=\"tex\"><code class=\"language-tex\">Submit-block ::&#x3D; &#123;\n  contact &#123;\n    contact &#123;\n      name name &#123;\n        last &quot;xin&quot;,\n        first &quot;bingyue&quot;,\n        middle &quot;&quot;,\n        initials &quot;&quot;,\n        suffix &quot;&quot;,\n        title &quot;&quot;\n      &#125;,\n      affil std &#123;\n        affil &quot;Huaibei Normal University&quot;,\n        div &quot;College of Life Sciences&quot;,\n        city &quot;Huaibei&quot;,\n        sub &quot;Anhui&quot;,\n        country &quot;China&quot;,\n        street &quot;Dongshan road No.100&quot;,\n        email &quot;xinbingyuex@163.com&quot;,\n        postal-code &quot;235000&quot;\n      &#125;\n    &#125;\n  &#125;,\n  cit &#123;\n    authors &#123;\n      names std &#123;\n        &#123;\n          name name &#123;\n            last &quot;Xin&quot;,\n            first &quot;Bingyue&quot;,\n            middle &quot;&quot;,\n            initials &quot;&quot;,\n            suffix &quot;&quot;,\n            title &quot;&quot;\n          &#125;\n        &#125;\n      &#125;,\n      affil std &#123;\n        affil &quot;Huaibei Normal University&quot;,\n        div &quot;College of Life Sciences&quot;,\n        city &quot;Huaibei&quot;,\n        sub &quot;Anhui&quot;,\n        country &quot;China&quot;,\n        street &quot;Dongshan road No.100&quot;,\n        postal-code &quot;235000&quot;\n      &#125;\n    &#125;\n  &#125;,\n  subtype new\n&#125;\nSeqdesc ::&#x3D; pub &#123;\n  pub &#123;\n    gen &#123;\n      cit &quot;unpublished&quot;,\n      authors &#123;\n        names std &#123;\n          &#123;\n            name name &#123;\n              last &quot;Xin&quot;,\n              first &quot;Bingyue&quot;,\n              middle &quot;&quot;,\n              initials &quot;&quot;,\n              suffix &quot;&quot;,\n              title &quot;&quot;\n            &#125;\n          &#125;\n        &#125;\n      &#125;,\n      title &quot;Purification and characterization of a novel leaderless bacteriocin, toyoncin, produced by Bacillus toyonensis XIN-YC13 that specifically active against Bacilus cereus and Listeria monocytogenes&quot;\n    &#125;\n  &#125;\n&#125;\nSeqdesc ::&#x3D; user &#123;\n  type str &quot;Submission&quot;,\n  data &#123;\n    &#123;\n      label str &quot;AdditionalComment&quot;,\n      data str &quot;ALT EMAIL:xinbingyuex@163.com&quot;\n    &#125;\n  &#125;\n&#125;\nSeqdesc ::&#x3D; user &#123;\n  type str &quot;Submission&quot;,\n  data &#123;\n    &#123;\n      label str &quot;AdditionalComment&quot;,\n      data str &quot;Submission Title:None&quot;\n    &#125;\n  &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>注意</strong>：文件 1 和文件 2 的序列描述信息必须一致，此例中均为 “Toyoncin_biosynthesis_gene_cluster”。</p>\n<h1 id=\"文件生成\"><a class=\"markdownIt-Anchor\" href=\"#文件生成\"></a> 文件生成</h1>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">tbl2asn -t template.sbt -p ./ -V vb -x .fna<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>-t 模板文件<br />\n - p 输入文件所在路径<br />\n - V<br />\n-v 生成验证文件，保存错误信息<br />\n - b 生成 gbf 文件<br />\n - x 文件 1（FASTA 文件）的后缀名</p>\n<p><strong>注意</strong>：不知什么原因，生成的 sqn 和 gbf 文件中的日期通常是 1-JAN-2019，需要自己手动改正为当前时间。</p>\n<h1 id=\"参考\"><a class=\"markdownIt-Anchor\" href=\"#参考\"></a> 参考</h1>\n<ul>\n<li><a href=\"https://www.ncbi.nlm.nih.gov/genbank/tbl2asn2/\">tbl2asn</a></li>\n<li><a href=\"http://www.chenlianfu.com/?p=2171\">上传基因组数据到 NCBI</a></li>\n</ul>\n","raw":null,"categories":[{"name":"生物信息","path":"api/categories/生物信息.json"}],"tags":[{"name":"NCBI","path":"api/tags/NCBI.json"},{"name":"序列处理","path":"api/tags/序列处理.json"},{"name":"生信软件","path":"api/tags/生信软件.json"}]},{"title":"根据assession number批量从NCB下载数据","slug":"根据assession-number批量从NCB下载数据","date":"2021-09-28T03:26:24.000Z","updated":"2022-01-08T02:16:28.455Z","comments":true,"path":"api/articles/根据assession-number批量从NCB下载数据.json","excerpt":null,"keywords":null,"cover":"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/生信之巅公众号.jpg","content":"<p>有时候我们手里会得到一些 NCBI 的 assession number，且数量比较多，而我们真正需要的是序列，这时候手动挨个搜索和下载是不太现实的，除非是你闲得无事可做。其实有一个网页是可以批量下载序列的，即<a href=\"https://www.ncbi.nlm.nih.gov/sites/batchentrez\"> https://www.ncbi.nlm.nih.gov/sites/batchentrez</a> ，下面演示一下其用法。<strong>请就着文末视频食用。</strong></p>\n<ul>\n<li>\n<p>首先，<u>准备一份列表文件，其中包含需要下载序列的 IDs，每行一个 ID</u>。这里有一个从网上下载的 CaZY 数据库，本以为是序列文件，下载后才发现里面没有序列。这个文件包含三列，以制表符分隔各列，最后一列是 Assession number，因此前两列可以删掉。可以将文件内容复制到 Excel 中，删除前两列，将最后一列复制到一个新的文本文档中。也可以在支持正则表达式的文本编辑器中直接查找替换。<strong>刚刚的示例文件可以从<a href=\"http://www.cazy.org/IMG/cazy_data/cazy_data.zip\">这里</a>下载</strong>。正则表达式查找的公式为 “.+\\t (.+)”，其中 “.+” 代表的是任意多个字符，“\\t” 匹配的是制表符，+ 是贪婪的，一直遇到最后一个 “\\t” 才终止匹配。即 “.+\\t” 匹配的是前两列以及第二列后面的制表符，最后的 “(.+)” 匹配的是第三列。小括号的作用是捕获匹配的内容。替换的公式为 “$1”，表示第一个小括号内的内容，即第三列。</p>\n</li>\n<li>\n<p>接下来将得到的列表文件提交至网站上以下载序列，需要选择对应的数据库，这里选择 protein，点击 “Retrieve” 开始下载。由于序列较多，因此反应比较慢，需要耐心等待。估计是崩了，再试一遍，文件包含 2650471 个 ID，估计服务器吃不消，实在不行就拆分成几个文件，分批次下载。我这里用的是 EmEditor 软件，按照 10000 行每个文件对整个文件进行了拆分，得到了 266 个文件，现在拿其中的一个做演示，看看服务器是否吃得消。看来一万个也太多，二十几个试了一下，莫得问题。方法就是酱紫的，至于可以一次性下载多少，各位自己去试吧。搞定！</p>\n</li>\n<li>\n<p><strong>兄弟们不用试了，我已经试过了，一次只能搞几百个</strong>，对于几十万行的列表来说，手动逐个提交也是要命的，因此我写了一个 Perl 脚本 (download_NCBI.pl) 来完成该任务，<u>不过只能在 Linux 下运行</u>，代码如下：</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-perl\" data-language=\"perl\"><code class=\"language-perl\"><span class=\"token comment\">#!/usr/bin/perl</span>\n<span class=\"token keyword\">use</span> strict<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> warnings<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> LWP<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Simple<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># Author: Liu hualin</span>\n<span class=\"token comment\"># Date: Sep 28, 2021</span>\n\n<span class=\"token comment\"># Usage: perl download_NCBI.pl 列表文件 序列类型（参照https://www.ncbi.nlm.nih.gov/sites/batchentrez数据库填写，常用的包括nucleotide, protein）</span>\n\n<span class=\"token keyword\">my</span> <span class=\"token variable\">@ids</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$dbtype</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$ARGV</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># nucleotide, protein</span>\n\nsystem<span class=\"token punctuation\">(</span><span class=\"token string\">\"split -l 300 $ARGV[0] splited_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">my</span> <span class=\"token variable\">@splited</span> <span class=\"token operator\">=</span> glob<span class=\"token punctuation\">(</span><span class=\"token string\">\"splited_*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span>  <span class=\"token punctuation\">(</span><span class=\"token variable\">@splited</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token variable\">$_</span><span class=\"token operator\">=~</span><span class=\"token regex\">/splited_(.+)/</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">my</span> <span class=\"token variable\">$out</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"seqs.$1.fasta\"</span><span class=\"token punctuation\">;</span>\n\topen IN<span class=\"token punctuation\">,</span> <span class=\"token variable\">$_</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">die</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token filehandle symbol\">&lt;IN></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\tchomp<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$_</span><span class=\"token operator\">=~</span><span class=\"token regex\">s/[\\r\\n]+//g</span><span class=\"token punctuation\">;</span>\n\t\tpush <span class=\"token variable\">@ids</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$_</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\tgetstore<span class=\"token punctuation\">(</span><span class=\"token string\">\"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=$dbtype&amp;rettype=fasta&amp;retmode=text&amp;id=\"</span><span class=\"token operator\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">@ids</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"$out\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token variable\">@ids</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tclose IN<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\nsystem<span class=\"token punctuation\">(</span><span class=\"token string\">\"cat seqs.* > All.sequences.fas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsystem<span class=\"token punctuation\">(</span><span class=\"token string\">\"rm splited_* seqs.*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>运行方法也贼简单，将脚本和列表文件放在同一目录下，然后在 Linux 终端里输入如下命令：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">perl download_NCBI.pl cazy_ids.txt protein<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>其中 cazy_ids.txt 为包含 assession number 的列表文件，protein 表示列表里的 ID 是蛋白。最后面的这个参数可以在<a href=\"https://www.ncbi.nlm.nih.gov/sites/batchentrez\"> https://www.ncbi.nlm.nih.gov/sites/batchentrez</a> 左上角的 Database 查询，<strong>但是要全部小写</strong>。</p>\n<p>运行一下，看看效果！</p>\n<p><font color=\"#FF0000\">2000 years later...</font></p>\n<p>2650471/300=8835 个文件，最终生成的序列文件名称为 “All.sequences.fas”，中间过程文件会被自动删除。千年以后拿结果，不管怎么说，总算解放了双手，让电脑慢慢去跑吧！</p>\n<div style=\"position: relative; width: 100%; height: 0; padding-bottom: 75%;\"><iframe src=\"//player.bilibili.com/player.html?aid=378319348&page=\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" style=\"position: absolute; width: 100%; height: 100%; left: 0; top: 0;\"></iframe></div>\n<h1 id=\"脚本获取\"><a class=\"markdownIt-Anchor\" href=\"#脚本获取\"></a> 脚本获取</h1>\n<p>关注公众号 “生信之巅”，聊天窗口回复 “e7e9” 获取下载链接。</p>\n<table align=\"center\"><tr>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/生信之巅公众号.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/生信之巅公众号.jpg\" srcset=\"https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg\" alt=\"生信之巅微信公众号\" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-right: 0px;margin-bottom: 5px;align: center;\"></td>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/小程序码.png\" class=\"lazyload placeholder\" data-srcset=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/小程序码.png\" srcset=\"https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg\" alt=\"生信之巅小程序码\" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-left: 0px;margin-bottom: 5px;align: center\"></td>\n</tr></table>\n<p><font color=\"#FF0000\"><ruby><b>敬告</b>：使用文中脚本请引用本文网址，请尊重本人的劳动成果，谢谢！<rt><b>Notice</b>: When you use the scripts in this article, please cite the link of this webpage. Thank you!</rt></ruby></font></p>\n","raw":null,"categories":[{"name":"生物信息","path":"api/categories/生物信息.json"}],"tags":[{"name":"CAZy","path":"api/tags/CAZy.json"},{"name":"NCBI","path":"api/tags/NCBI.json"},{"name":"下载","path":"api/tags/下载.json"}]}]}