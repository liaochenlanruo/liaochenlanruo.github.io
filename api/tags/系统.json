{"name":"ç³»ç»Ÿ","postlist":[{"title":"CentOS 7 å‡çº§ GCC æ•™ç¨‹ï¼ˆä»¥ GCC 9 ä¸ºä¾‹ï¼‰","slug":"CentOS-7-å‡çº§-GCC-æ•™ç¨‹ï¼ˆä»¥-GCC-9-ä¸ºä¾‹ï¼‰","date":"2025-10-19T13:33:35.000Z","updated":"2025-10-19T13:40:18.210Z","comments":true,"path":"api/articles/CentOS-7-å‡çº§-GCC-æ•™ç¨‹ï¼ˆä»¥-GCC-9-ä¸ºä¾‹ï¼‰.json","excerpt":null,"keywords":null,"cover":"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg","content":"<h2 id=\"ä¸€ã€æ•™ç¨‹èƒŒæ™¯\"><a href=\"#ä¸€ã€æ•™ç¨‹èƒŒæ™¯\" class=\"headerlink\" title=\"ä¸€ã€æ•™ç¨‹èƒŒæ™¯\"></a>ä¸€ã€æ•™ç¨‹èƒŒæ™¯</h2><p>CentOS 7 ç³»ç»Ÿé»˜è®¤é¢„è£…çš„ GCC ç‰ˆæœ¬ä¸º <strong>4.8.5</strong>ï¼ˆå‘å¸ƒäº 2015 å¹´ï¼‰ï¼Œè€Œç°ä»£å¼€å‘åœºæ™¯ä¸­ï¼Œè®¸å¤šè½¯ä»¶ï¼ˆå¦‚é«˜ç‰ˆæœ¬ Pythonã€TensorFlowã€C++ 11+ é¡¹ç›®ç­‰ï¼‰å¯¹ GCC ç‰ˆæœ¬è¦æ±‚è¾ƒé«˜ï¼ˆéœ€ 5.4+ åŠä»¥ä¸Šï¼‰ã€‚å› æ­¤éœ€å‡çº§ GCCï¼Œä½†ç›´æ¥è¦†ç›–ç³»ç»Ÿé»˜è®¤ GCC å¯èƒ½å¯¼è‡´ä¾èµ–å†²çªï¼ˆå¦‚ <code>yum</code> å·¥å…·ä¾èµ–æ—§ç‰ˆæœ¬ï¼‰ã€‚</p>\n<p>æœ¬æ•™ç¨‹é‡‡ç”¨ <strong>SCLï¼ˆSoftware Collectionsï¼‰ä»“åº“</strong> æ–¹å¼å‡çº§ï¼Œå¯åœ¨ä¸è¦†ç›–ç³»ç»Ÿé»˜è®¤ GCC çš„å‰æä¸‹ï¼Œå®‰è£…å¹¶ä½¿ç”¨é«˜ç‰ˆæœ¬ GCCï¼ˆä»¥ GCC 9 ä¸ºä¾‹ï¼Œç¨³å®šä¸”å…¼å®¹æ€§å¼ºï¼‰ï¼Œå®‰å…¨ä¸”çµæ´»ã€‚</p>\n<h2 id=\"äºŒã€å‡çº§å‰å‡†å¤‡\"><a href=\"#äºŒã€å‡çº§å‰å‡†å¤‡\" class=\"headerlink\" title=\"äºŒã€å‡çº§å‰å‡†å¤‡\"></a>äºŒã€å‡çº§å‰å‡†å¤‡</h2><p>ç¡®ä¿ç³»ç»Ÿå·²è”ç½‘ï¼Œä¸”æ‹¥æœ‰ <code>root</code> æƒé™ï¼ˆæˆ–ä½¿ç”¨ <code>sudo</code> æƒé™æ‰§è¡Œå‘½ä»¤ï¼‰ã€‚</p>\n<h2 id=\"ä¸‰ã€è¯¦ç»†å‡çº§æ­¥éª¤\"><a href=\"#ä¸‰ã€è¯¦ç»†å‡çº§æ­¥éª¤\" class=\"headerlink\" title=\"ä¸‰ã€è¯¦ç»†å‡çº§æ­¥éª¤\"></a>ä¸‰ã€è¯¦ç»†å‡çº§æ­¥éª¤</h2><h3 id=\"1-å¤‡ä»½åŸæœ‰-YUM-æºï¼ˆå…³é”®ï¼šé˜²æ­¢é…ç½®å‡ºé”™ï¼‰\"><a href=\"#1-å¤‡ä»½åŸæœ‰-YUM-æºï¼ˆå…³é”®ï¼šé˜²æ­¢é…ç½®å‡ºé”™ï¼‰\" class=\"headerlink\" title=\"1. å¤‡ä»½åŸæœ‰ YUM æºï¼ˆå…³é”®ï¼šé˜²æ­¢é…ç½®å‡ºé”™ï¼‰\"></a>1. å¤‡ä»½åŸæœ‰ YUM æºï¼ˆå…³é”®ï¼šé˜²æ­¢é…ç½®å‡ºé”™ï¼‰</h3><p>CentOS 7 åœæ­¢å®˜æ–¹ç»´æŠ¤åï¼Œé»˜è®¤ YUM æºå¯èƒ½å¤±æ•ˆï¼Œä¸”åç»­éœ€æ·»åŠ æ–°ä»“åº“é…ç½®ã€‚å…ˆå¤‡ä»½åŸæœ‰æºæ–‡ä»¶ï¼Œé¿å…è¯¯æ“ä½œåæ— æ³•æ¢å¤ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¤‡ä»½ç›®å½•</span></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> -p /etc/yum.repos.d/backup</span><br><span class=\"line\"><span class=\"comment\"># å°†æ‰€æœ‰ .repo æºæ–‡ä»¶ç§»åŠ¨åˆ°å¤‡ä»½ç›®å½•</span></span><br><span class=\"line\">sudo <span class=\"built_in\">mv</span> /etc/yum.repos.d/*.repo /etc/yum.repos.d/backup/</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"2-æ·»åŠ -SCL-ä»“åº“é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘æºï¼‰\"><a href=\"#2-æ·»åŠ -SCL-ä»“åº“é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘æºï¼‰\" class=\"headerlink\" title=\"2. æ·»åŠ  SCL ä»“åº“é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘æºï¼‰\"></a>2. æ·»åŠ  SCL ä»“åº“é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘æºï¼‰</h3><p>SCL ä»“åº“æ˜¯å‡çº§ GCC çš„æ ¸å¿ƒï¼Œè¿™é‡Œé€‰æ‹© <strong>é˜¿é‡Œäº‘ SCL æº</strong>ï¼ˆå›½å†…è®¿é—®é€Ÿåº¦å¿«ï¼Œç¨³å®šæ€§é«˜ï¼‰ï¼Œæ‰‹åŠ¨åˆ›å»ºä»“åº“é…ç½®æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç”¨ vi ç¼–è¾‘å™¨åˆ›å»ºå¹¶ç¼–è¾‘ centos-sclo-rh.repo æ–‡ä»¶</span></span><br><span class=\"line\">sudo vi /etc/yum.repos.d/centos-sclo-rh.repo</span><br></pre></td></tr></table></figure>\n\n<p>æ‰“å¼€ç¼–è¾‘å™¨åï¼ŒæŒ‰ <code>i</code> è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œ<strong>å®Œæ•´å¤åˆ¶ä»¥ä¸‹å†…å®¹</strong>ï¼ˆä¸è¦é—æ¼æˆ–ä¿®æ”¹æ ¼å¼ï¼‰ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[centos-sclo-rh]</span><br><span class=\"line\">name=CentOS-7 - SCLo rh</span><br><span class=\"line\">baseurl=https://mirrors.aliyun.com/centos/7/sclo/x86_64/rh/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=https://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-SIG-SCLo</span><br><span class=\"line\">enabled=1</span><br></pre></td></tr></table></figure>\n\n<p>å¤åˆ¶å®Œæˆåï¼ŒæŒ‰ <code>Esc</code> é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥ <code>:wq</code> å¹¶å›è½¦ï¼ˆä¿å­˜å¹¶é€€å‡º vi ç¼–è¾‘å™¨ï¼‰ã€‚</p>\n<h3 id=\"3-æ¸…ç†-YUM-ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜\"><a href=\"#3-æ¸…ç†-YUM-ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜\" class=\"headerlink\" title=\"3. æ¸…ç† YUM ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜\"></a>3. æ¸…ç† YUM ç¼“å­˜å¹¶ç”Ÿæˆæ–°ç¼“å­˜</h3><p>æ–°æ·»åŠ ä»“åº“åï¼Œéœ€æ¸…ç†æ—§ç¼“å­˜ã€åŠ è½½æ–°ä»“åº“çš„åŒ…åˆ—è¡¨ï¼Œç¡®ä¿åç»­å®‰è£…èƒ½æ‰¾åˆ°æ­£ç¡®çš„è½¯ä»¶åŒ…ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ¸…ç†æ‰€æœ‰ YUM ç¼“å­˜</span></span><br><span class=\"line\">sudo yum clean all &amp;&amp; </span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆæ–°çš„ç¼“å­˜ï¼ˆä¸‹è½½é˜¿é‡Œäº‘æºçš„åŒ…åˆ—è¡¨ï¼‰</span></span><br><span class=\"line\">sudo yum makecache</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œåè€å¿ƒç­‰å¾…ï¼ˆæ—¶é—´å–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰ï¼Œè‹¥æ— æŠ¥é”™åˆ™ç¼“å­˜ç”ŸæˆæˆåŠŸã€‚</p>\n<h3 id=\"4-ï¼ˆå¯é€‰ï¼‰å®‰è£…-SCL-ä»“åº“åŸºç¡€åŒ…\"><a href=\"#4-ï¼ˆå¯é€‰ï¼‰å®‰è£…-SCL-ä»“åº“åŸºç¡€åŒ…\" class=\"headerlink\" title=\"4. ï¼ˆå¯é€‰ï¼‰å®‰è£… SCL ä»“åº“åŸºç¡€åŒ…\"></a>4. ï¼ˆå¯é€‰ï¼‰å®‰è£… SCL ä»“åº“åŸºç¡€åŒ…</h3><p>å¤šæ•°æƒ…å†µä¸‹ï¼Œæ­¥éª¤ 2 æ·»åŠ çš„é…ç½®æ–‡ä»¶å·²è¶³å¤Ÿï¼Œä½†è‹¥åç»­å®‰è£… GCC æ—¶æç¤ºâ€œä»“åº“ä¸å­˜åœ¨â€ï¼Œå¯æ‰§è¡Œæ­¤æ­¥éª¤å®‰è£… SCL ä»“åº“åŸºç¡€åŒ…ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y centos-release-scl</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"5-å®‰è£…é«˜ç‰ˆæœ¬-GCCï¼ˆGCC-9ï¼‰\"><a href=\"#5-å®‰è£…é«˜ç‰ˆæœ¬-GCCï¼ˆGCC-9ï¼‰\" class=\"headerlink\" title=\"5. å®‰è£…é«˜ç‰ˆæœ¬ GCCï¼ˆGCC 9ï¼‰\"></a>5. å®‰è£…é«˜ç‰ˆæœ¬ GCCï¼ˆGCC 9ï¼‰</h3><p>é€šè¿‡ YUM å®‰è£… <code>devtoolset-9</code>ï¼ˆå¯¹åº” GCC 9 ç‰ˆæœ¬ï¼‰ï¼Œå¹¶æ·»åŠ  <code>--nogpgcheck</code> å‚æ•°ï¼ˆè·³è¿‡ GPG å¯†é’¥éªŒè¯ï¼Œå›  CentOS 7 å®˜æ–¹å¯†é’¥æºå·²å¤±æ•ˆï¼Œä¸å½±å“åŒ…å®‰å…¨æ€§ï¼‰ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils --nogpgcheck</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>devtoolset-9-gcc</code>ï¼šGCC 9 æ ¸å¿ƒåŒ…</li>\n<li><code>devtoolset-9-gcc-c++</code>ï¼šC++ ç¼–è¯‘ç»„ä»¶ï¼ˆå¦‚éœ€ç¼–è¯‘ C++ é¡¹ç›®å¿…è£…ï¼‰</li>\n<li><code>devtoolset-9-binutils</code>ï¼šäºŒè¿›åˆ¶å·¥å…·é›†ï¼ˆè¾…åŠ©ç¼–è¯‘ï¼‰</li>\n</ul>\n<p>æ‰§è¡Œåç­‰å¾…å®‰è£…å®Œæˆï¼ˆçº¦ 50MB ä¸‹è½½é‡ï¼‰ï¼Œæ— æŠ¥é”™åˆ™å®‰è£…æˆåŠŸã€‚</p>\n<h3 id=\"6-å¯ç”¨é«˜ç‰ˆæœ¬-GCC\"><a href=\"#6-å¯ç”¨é«˜ç‰ˆæœ¬-GCC\" class=\"headerlink\" title=\"6. å¯ç”¨é«˜ç‰ˆæœ¬ GCC\"></a>6. å¯ç”¨é«˜ç‰ˆæœ¬ GCC</h3><p>SCL å®‰è£…çš„ GCC ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œéœ€æ‰‹åŠ¨å¯ç”¨ï¼Œæ”¯æŒ <strong>ä¸´æ—¶å¯ç”¨</strong> å’Œ <strong>æ°¸ä¹…å¯ç”¨</strong>ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š</p>\n<h4 id=\"æ–¹å¼-1ï¼šä¸´æ—¶å¯ç”¨ï¼ˆä»…å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰\"><a href=\"#æ–¹å¼-1ï¼šä¸´æ—¶å¯ç”¨ï¼ˆä»…å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰\" class=\"headerlink\" title=\"æ–¹å¼ 1ï¼šä¸´æ—¶å¯ç”¨ï¼ˆä»…å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰\"></a>æ–¹å¼ 1ï¼šä¸´æ—¶å¯ç”¨ï¼ˆä»…å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰</h4><p>é€‚ç”¨äºâ€œä¸´æ—¶ä½¿ç”¨é«˜ç‰ˆæœ¬ GCCâ€çš„åœºæ™¯ï¼Œå…³é—­ç»ˆç«¯åæ¢å¤é»˜è®¤ GCC 4.8.5ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scl <span class=\"built_in\">enable</span> devtoolset-9 bash</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ–¹å¼-2ï¼šæ°¸ä¹…å¯ç”¨ï¼ˆæ¨èï¼‰\"><a href=\"#æ–¹å¼-2ï¼šæ°¸ä¹…å¯ç”¨ï¼ˆæ¨èï¼‰\" class=\"headerlink\" title=\"æ–¹å¼ 2ï¼šæ°¸ä¹…å¯ç”¨ï¼ˆæ¨èï¼‰\"></a>æ–¹å¼ 2ï¼šæ°¸ä¹…å¯ç”¨ï¼ˆæ¨èï¼‰</h4><p>è‹¥éœ€æ¯æ¬¡ç™»å½•ç»ˆç«¯éƒ½è‡ªåŠ¨ä½¿ç”¨ GCC 9ï¼Œå¯å°†å¯ç”¨å‘½ä»¤å†™å…¥ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œåˆ†â€œå½“å‰ç”¨æˆ·â€å’Œâ€œå…¨å±€æ‰€æœ‰ç”¨æˆ·â€ä¸¤ç§åœºæ™¯ï¼š</p>\n<h5 id=\"åœºæ™¯-Aï¼šä»…å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆæ¨èæ™®é€šç”¨æˆ·ï¼‰\"><a href=\"#åœºæ™¯-Aï¼šä»…å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆæ¨èæ™®é€šç”¨æˆ·ï¼‰\" class=\"headerlink\" title=\"åœºæ™¯ Aï¼šä»…å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆæ¨èæ™®é€šç”¨æˆ·ï¼‰\"></a>åœºæ™¯ Aï¼šä»…å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆæ¨èæ™®é€šç”¨æˆ·ï¼‰</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å°†å¯ç”¨å‘½ä»¤å†™å…¥å½“å‰ç”¨æˆ·çš„ .bashrc æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;source /opt/rh/devtoolset-9/enable&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class=\"line\"><span class=\"comment\"># ç«‹å³ç”Ÿæ•ˆï¼ˆæ— éœ€é‡å¯ç»ˆç«¯ï¼‰</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åœºæ™¯-Bï¼šå…¨å±€æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆéœ€-root-æƒé™ï¼‰\"><a href=\"#åœºæ™¯-Bï¼šå…¨å±€æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆéœ€-root-æƒé™ï¼‰\" class=\"headerlink\" title=\"åœºæ™¯ Bï¼šå…¨å±€æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆéœ€ root æƒé™ï¼‰\"></a>åœºæ™¯ Bï¼šå…¨å±€æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆï¼ˆéœ€ root æƒé™ï¼‰</h5><p>é€‚ç”¨äºå¤šç”¨æˆ·æœåŠ¡å™¨ï¼Œæ‰€æœ‰ç”¨æˆ·ç™»å½•åå‡ä½¿ç”¨ GCC 9ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼ˆè‹¥å½“å‰é rootï¼‰</span></span><br><span class=\"line\">su root</span><br><span class=\"line\"><span class=\"comment\"># å°†å¯ç”¨å‘½ä»¤å†™å…¥å…¨å±€ç¯å¢ƒå˜é‡æ–‡ä»¶ /etc/profile</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;source /opt/rh/devtoolset-9/enable&quot;</span> &gt;&gt; /etc/profile</span><br><span class=\"line\"><span class=\"comment\"># ç«‹å³ç”Ÿæ•ˆ</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"7-éªŒè¯-GCC-å‡çº§ç»“æœ\"><a href=\"#7-éªŒè¯-GCC-å‡çº§ç»“æœ\" class=\"headerlink\" title=\"7. éªŒè¯ GCC å‡çº§ç»“æœ\"></a>7. éªŒè¯ GCC å‡çº§ç»“æœ</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰ GCC ç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯å¦å‡çº§æˆåŠŸï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc -v</span><br></pre></td></tr></table></figure>\n\n<p>è‹¥è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼ˆç‰ˆæœ¬å·ä¸º 9.3.1 åŠä»¥ä¸Šï¼‰ï¼Œåˆ™è¯´æ˜å‡çº§æˆåŠŸï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Using built-in specs.</span><br><span class=\"line\">COLLECT_GCC=gcc</span><br><span class=\"line\">COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-9/root/usr/libexec/gcc/x86_64-redhat-linux/9/lto-wrapper</span><br><span class=\"line\">Target: x86_64-redhat-linux</span><br><span class=\"line\">Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,lto --prefix=/opt/rh/devtoolset-9/root/usr --mandir=/opt/rh/devtoolset-9/root/usr/share/man --infodir=/opt/rh/devtoolset-9/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-9.3.1-20200408/obj-x86_64-redhat-linux/isl-install --disable-libmpx --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux</span><br><span class=\"line\">Thread model: posix</span><br><span class=\"line\">gcc version 9.3.1 20200408 (Red Hat 9.3.1-2.2.el7) (GCC)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"å››ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹\"><a href=\"#å››ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"å››ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹\"></a>å››ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2><ol>\n<li><p><strong>è‹¥éœ€å®‰è£…å…¶ä»– GCC ç‰ˆæœ¬</strong>ï¼š<br>æœ¬æ•™ç¨‹ä»¥ GCC 9 ä¸ºä¾‹ï¼Œè‹¥éœ€å®‰è£… GCC 10ï¼Œåªéœ€å°†å‘½ä»¤ä¸­çš„ <code>devtoolset-9</code> æ›¿æ¢ä¸º <code>devtoolset-10</code>ï¼ˆå¦‚ <code>devtoolset-10-gcc</code>ï¼‰ï¼Œå…¶ä»–æ­¥éª¤ä¸€è‡´ã€‚</p>\n</li>\n<li><p><strong>ç³»ç»Ÿé»˜è®¤ GCC æœªè¢«è¦†ç›–</strong>ï¼š<br>SCL å®‰è£…çš„ GCC ä½äº <code>/opt/rh/devtoolset-9/root/usr/bin/</code>ï¼Œç³»ç»Ÿé»˜è®¤ GCCï¼ˆ4.8.5ï¼‰ä»åœ¨ <code>/usr/bin/gcc</code>ï¼Œè‹¥éœ€ä¸´æ—¶ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼Œå¯ç›´æ¥æ‰§è¡Œ <code>/usr/bin/gcc -v</code>ã€‚</p>\n</li>\n<li><p><strong>å®‰è£…æ—¶æç¤ºâ€œæ— å¯ç”¨è½¯ä»¶åŒ…â€</strong>ï¼š<br>é‡æ–°æ‰§è¡Œæ­¥éª¤ 3ï¼ˆæ¸…ç†å¹¶ç”Ÿæˆç¼“å­˜ï¼‰ï¼Œæˆ–æ£€æŸ¥æ­¥éª¤ 2 çš„ä»“åº“é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼ˆç¡®ä¿ <code>baseurl</code> æœªå†™é”™ï¼‰ã€‚</p>\n</li>\n</ol>\n<h2 id=\"äº”ã€æ€»ç»“\"><a href=\"#äº”ã€æ€»ç»“\" class=\"headerlink\" title=\"äº”ã€æ€»ç»“\"></a>äº”ã€æ€»ç»“</h2><p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œå¯åœ¨ CentOS 7 ä¸Šå®‰å…¨å‡çº§ GCC è‡³ 9 ç‰ˆæœ¬ï¼ˆæˆ–æ›´é«˜ï¼‰ï¼Œæ»¡è¶³ç°ä»£è½¯ä»¶å¼€å‘éœ€æ±‚ï¼Œä¸”ä¸å½±å“ç³»ç»ŸåŸæœ‰ä¾èµ–ã€‚è‹¥åç»­éœ€ç¼–è¯‘è½¯ä»¶ï¼ˆå¦‚ Pythonã€C++ é¡¹ç›®ï¼‰ï¼Œç›´æ¥ä½¿ç”¨ <code>gcc</code> æˆ– <code>g++</code> å‘½ä»¤å³å¯è°ƒç”¨é«˜ç‰ˆæœ¬å·¥å…·ã€‚</p>\n<h2 id=\"åŠ å…³æ³¨\"><a href=\"#åŠ å…³æ³¨\" class=\"headerlink\" title=\"åŠ å…³æ³¨\"></a>åŠ å…³æ³¨</h2><p>å…³æ³¨å…¬ä¼—å·â€œç”Ÿä¿¡ä¹‹å·…â€ã€‚</p>\n<table align=\"center\"><tr>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç”Ÿä¿¡ä¹‹å·…å¾®ä¿¡å…¬ä¼—å·\" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-right: 0px;margin-bottom: 5px;align: center;\"></td>\n  <td align=\"center\"><img src=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" class=\"lazyload placeholder\" data-srcset=\"https://cdn.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç”Ÿä¿¡ä¹‹å·…å°ç¨‹åºç \" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-left: 0px;margin-bottom: 5px;align: center\"></td>\n</tr></table>\n","raw":null,"categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"ç³»ç»Ÿ","path":"api/tags/ç³»ç»Ÿ.json"}]},{"title":"ç»ˆç‰ˆå®æµ‹ï¼CentOS 7.9ï¼ˆglibc 2.17ï¼‰å‡çº§ Go 1.24.4 ç¼–è¯‘ Ollama 0.13.3ï¼Œ4 å¼  L4 GPU æ»¡è¡€è¿è¡Œï½","slug":"CentOS7ä¸­Go1.24.4å®‰è£…ä¸Ollama0.13.3æºç ç¼–è¯‘","date":"2025-12-16T11:18:18.000Z","updated":"2025-12-16T10:24:48.500Z","comments":true,"path":"api/articles/CentOS7ä¸­Go1.24.4å®‰è£…ä¸Ollama0.13.3æºç ç¼–è¯‘.json","excerpt":null,"keywords":null,"cover":null,"content":"<p>ğŸ”¥ ä½œä¸ºåšå®ˆ CentOS 7.9 çš„è¿ç»´ &#x2F; å¼€å‘è€…ï¼Œè°æ‡‚å•Šï¼å®˜æ–¹ Ollama äºŒè¿›åˆ¶åŒ…ç›´æ¥æŠ¥é”™ã€ŒGLIBC_2.27 not foundã€ï¼Œè€Œç³»ç»Ÿ glibc 2.17 æ ¹æœ¬æ²¡æ³•å‡çº§ï¼ˆæ€•å´©ç³»ç»Ÿï¼‰ğŸ˜« ä½† 4 å¼  NVIDIA L4 GPUï¼ˆæ€»è®¡ 96GB æ˜¾å­˜ï¼‰ä¸èƒ½æµªè´¹ï¼Œéè¦åœ¨åŸç”Ÿç¯å¢ƒè·‘ Ollama éƒ¨ç½²å¤§æ¨¡å‹ï¼Œäºæ˜¯ç¡¬ç€å¤´çš®èµ° Go ç¼–è¯‘è·¯çº¿ï¼Œè¿‡ç¨‹è¸©éå‘ï¼Œç°åœ¨æ•´ç†æˆä¿å§†çº§æ•™ç¨‹ï¼Œé€ ç¦åŒæ¬¾è€ç³»ç»Ÿç”¨æˆ·ï¼</p>\n<h1 id=\"ğŸ“Œ-æ ¸å¿ƒèƒŒæ™¯ï¼šä¸ºå•¥éè¦è‡ªå·±åŠ¨æ‰‹ï¼Ÿ\"><a href=\"#ğŸ“Œ-æ ¸å¿ƒèƒŒæ™¯ï¼šä¸ºå•¥éè¦è‡ªå·±åŠ¨æ‰‹ï¼Ÿ\" class=\"headerlink\" title=\"ğŸ“Œ æ ¸å¿ƒèƒŒæ™¯ï¼šä¸ºå•¥éè¦è‡ªå·±åŠ¨æ‰‹ï¼Ÿ\"></a>ğŸ“Œ æ ¸å¿ƒèƒŒæ™¯ï¼šä¸ºå•¥éè¦è‡ªå·±åŠ¨æ‰‹ï¼Ÿ</h1><ul>\n<li><p>ç³»ç»Ÿé™åˆ¶ï¼šCentOS 7.9 é»˜è®¤ glibc 2.17ï¼Œå®˜æ–¹ Ollama æ‰€æœ‰ç‰ˆæœ¬éƒ½ä¾èµ– glibcâ‰¥2.27ï¼Œç›´æ¥è¿è¡Œå¿…æŠ¥é”™ï¼›</p>\n</li>\n<li><p>ç¡¬ä»¶åˆšéœ€ï¼š4 å¼  L4 GPU æƒ³æœ€å¤§åŒ–ç®—åŠ›ï¼ŒåŸç”Ÿç¼–è¯‘æ¯” Docker å°‘è™šæ‹ŸåŒ–æŸè€—ï¼Œå¤šå¡å¹¶è¡Œæ›´é«˜æ•ˆã€‚</p>\n</li>\n<li><p>æ— æ›¿ä»£æ–¹æ¡ˆï¼šç¤¾åŒºæ— é€‚é… glibc 2.17 çš„ Ollama é¢„ç¼–è¯‘åŒ…ï¼Œåªèƒ½æºç ç¼–è¯‘å®šåˆ¶ã€‚</p>\n</li>\n</ul>\n<h1 id=\"ğŸ› ï¸-å…¨ç¨‹å®æ“ï¼ˆæŒ‰è‡ªèº«è·¯å¾„è°ƒæ•´ï¼‰\"><a href=\"#ğŸ› ï¸-å…¨ç¨‹å®æ“ï¼ˆæŒ‰è‡ªèº«è·¯å¾„è°ƒæ•´ï¼‰\" class=\"headerlink\" title=\"ğŸ› ï¸ å…¨ç¨‹å®æ“ï¼ˆæŒ‰è‡ªèº«è·¯å¾„è°ƒæ•´ï¼‰\"></a>ğŸ› ï¸ å…¨ç¨‹å®æ“ï¼ˆæŒ‰è‡ªèº«è·¯å¾„è°ƒæ•´ï¼‰</h1><ul>\n<li>ç‰ˆæœ¬é€‰æ‹©ï¼šGo 1.24.4ï¼ˆé€‚é… Ollama 0.13.3ï¼Œå…¼å®¹ glibc 2.17ï¼‰+ Ollama 0.13.3 æºç åŒ…ï¼ˆ<a href=\"https://github.com/ollama/ollama/archive/refs/tags/v0.13.3.tar.gz\">https://github.com/ollama/ollama/archive/refs/tags/v0.13.3.tar.gz</a>ï¼‰ï¼›</li>\n</ul>\n<h2 id=\"1ï¸âƒ£-å‡çº§-Go-åˆ°-1-24-4ï¼ˆç¼–è¯‘-Ollama-çš„å‰æï¼Œä¸åŒç”¨æˆ·è·¯å¾„ä¸åŒï¼ŒåŠ¡å¿…è‡ªæŸ¥ï¼ï¼‰\"><a href=\"#1ï¸âƒ£-å‡çº§-Go-åˆ°-1-24-4ï¼ˆç¼–è¯‘-Ollama-çš„å‰æï¼Œä¸åŒç”¨æˆ·è·¯å¾„ä¸åŒï¼ŒåŠ¡å¿…è‡ªæŸ¥ï¼ï¼‰\" class=\"headerlink\" title=\"1ï¸âƒ£ å‡çº§ Go åˆ° 1.24.4ï¼ˆç¼–è¯‘ Ollama çš„å‰æï¼Œä¸åŒç”¨æˆ·è·¯å¾„ä¸åŒï¼ŒåŠ¡å¿…è‡ªæŸ¥ï¼ï¼‰\"></a>1ï¸âƒ£ å‡çº§ Go åˆ° 1.24.4ï¼ˆç¼–è¯‘ Ollama çš„å‰æï¼Œä¸åŒç”¨æˆ·è·¯å¾„ä¸åŒï¼ŒåŠ¡å¿…è‡ªæŸ¥ï¼ï¼‰</h2><ul>\n<li>å¸è½½æ—§ Goï¼ˆç¤ºä¾‹è·¯å¾„ï¼Œæ›¿æ¢æˆè‡ªå·±çš„ï¼ï¼‰ï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">rm</span> -rf /share/opt/go  <span class=\"comment\"># æˆ‘ä¹‹å‰è£…çš„Go 1.18.2è·¯å¾„</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/\\/share\\/opt\\/go\\/bin/d&#x27;</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹è½½ Go 1.24.4ï¼ˆé˜¿é‡Œäº‘é•œåƒï¼Œç¨³å®šä¸ç¿»è½¦ï¼‰ï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://mirrors.aliyun.com/golang/go1.24.4.linux-amd64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar -C /usr/local -xzf go1.24.4.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é…ç½® Go ç¯å¢ƒå˜é‡ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰ï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/profile</span><br></pre></td></tr></table></figure>\n\n<p>æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export GOROOT=/usr/local/go</span><br><span class=\"line\">export PATH=$GOROOT/bin:$PATH</span><br><span class=\"line\">export GOPATH=$HOME/go</span><br><span class=\"line\">export GOPROXY=https://mirrors.aliyun.com/goproxy/,direct  # å›½å†…ä»£ç†é¿å‘</span><br></pre></td></tr></table></figure>\n\n<p>ä¿å­˜å¹¶é€€å‡ºï¼ˆESCï¼Œ shift + ;, wq, å›è½¦ï¼‰ï¼Œä½¿é…ç½®ç”Ÿæ•ˆï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n\n\n<ul>\n<li>éªŒè¯ï¼š<code>go version</code> è¾“å‡º <code>go1.24.4 linux/amd64</code> å³æˆåŠŸã€‚</li>\n</ul>\n<h2 id=\"2ï¸âƒ£-ä¸‹è½½-Ollama-0-13-3-æºç åŒ…ï¼ˆæ— éœ€-gitï¼Œè§£å‹å³ç¼–è¯‘ï¼‰\"><a href=\"#2ï¸âƒ£-ä¸‹è½½-Ollama-0-13-3-æºç åŒ…ï¼ˆæ— éœ€-gitï¼Œè§£å‹å³ç¼–è¯‘ï¼‰\" class=\"headerlink\" title=\"2ï¸âƒ£ ä¸‹è½½ Ollama 0.13.3 æºç åŒ…ï¼ˆæ— éœ€ gitï¼Œè§£å‹å³ç¼–è¯‘ï¼‰\"></a>2ï¸âƒ£ ä¸‹è½½ Ollama 0.13.3 æºç åŒ…ï¼ˆæ— éœ€ gitï¼Œè§£å‹å³ç¼–è¯‘ï¼‰</h2><ul>\n<li><p>ä¸‹è½½æºç ï¼š<code>wget https://github.com/ollama/ollama/archive/refs/tags/v0.13.3.tar.gz</code>ï¼›</p>\n</li>\n<li><p>è§£å‹è¿›å…¥ç›®å½•ï¼š</p>\n</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf v0.13.3.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># çœ‹æ¸…è§£å‹åçš„ç›®å½•åå†è¿›å…¥</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ollama-0.13.3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3ï¸âƒ£-ç¼–è¯‘-Ollama-0-13-3ï¼ˆé€‚é…-glibc-2-17-æ ¸å¿ƒå‚æ•°ï¼‰\"><a href=\"#3ï¸âƒ£-ç¼–è¯‘-Ollama-0-13-3ï¼ˆé€‚é…-glibc-2-17-æ ¸å¿ƒå‚æ•°ï¼‰\" class=\"headerlink\" title=\"3ï¸âƒ£ ç¼–è¯‘ Ollama 0.13.3ï¼ˆé€‚é… glibc 2.17 æ ¸å¿ƒå‚æ•°ï¼‰\"></a>3ï¸âƒ£ ç¼–è¯‘ Ollama 0.13.3ï¼ˆé€‚é… glibc 2.17 æ ¸å¿ƒå‚æ•°ï¼‰</h2><ul>\n<li>é…ç½®ç¼–è¯‘ç¯å¢ƒå˜é‡ï¼ˆé™æ€ç¼–è¯‘ï¼Œè§„é¿ glibc ç‰ˆæœ¬é—®é¢˜ï¼‰ï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> CGO_ENABLED=1</span><br><span class=\"line\"><span class=\"built_in\">export</span> CGO_CFLAGS=<span class=\"string\">&quot;-D_GLIBCXX_USE_CXX11_ABI=0 -m64 -Wl,--hash-style=gnu -Wl,--as-needed&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CGO_LDFLAGS=<span class=\"string\">&quot;-lrt -lm -ldl -Wl,--disable-new-dtags -Wl,--rpath=/lib64&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> GOFLAGS=<span class=\"string\">&quot;-buildmode=pie -trimpath&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CC=<span class=\"string\">&quot;gcc -static-libgcc -static-libstdc++&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ‰§è¡Œç¼–è¯‘ï¼ˆ0.13.3 ä¸»å…¥å£åœ¨æ ¹ç›®å½• main.goï¼Œåˆ«å†™é”™ï¼ï¼‰ï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">go build -ldflags <span class=\"string\">&quot;-s -w -linkmode=external -extldflags &#x27;-static-libgcc -static-libstdc++ -lm -ldl&#x27;&quot;</span> -o ollama ./main.go</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>éªŒè¯ï¼š<code>./ollama --help</code> æ—  GLIBC æŠ¥é”™ï¼Œå°†äºŒè¿›åˆ¶ç§»åˆ°ç³»ç»Ÿè·¯å¾„ï¼š<code>cp ./ollama /usr/local/bin/</code>ï¼Œæˆ–å°†å½“å‰è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡ï¼ˆæˆ‘é€‰æ‹©çš„åè€…ï¼š&#x2F;share&#x2F;tools&#x2F;ollama-0.13.3ï¼‰ã€‚</li>\n</ul>\n<h2 id=\"4ï¸âƒ£-é…ç½®å¼€æœºè‡ªå¯ï¼ˆåå°ç¨³è·‘ï¼Œçœå¿ƒï¼ï¼‰\"><a href=\"#4ï¸âƒ£-é…ç½®å¼€æœºè‡ªå¯ï¼ˆåå°ç¨³è·‘ï¼Œçœå¿ƒï¼ï¼‰\" class=\"headerlink\" title=\"4ï¸âƒ£ é…ç½®å¼€æœºè‡ªå¯ï¼ˆåå°ç¨³è·‘ï¼Œçœå¿ƒï¼ï¼‰\"></a>4ï¸âƒ£ é…ç½®å¼€æœºè‡ªå¯ï¼ˆåå°ç¨³è·‘ï¼Œçœå¿ƒï¼ï¼‰</h2><ul>\n<li>åˆ›å»º systemd æœåŠ¡æ–‡ä»¶ï¼š<code>vi /etc/systemd/system/ollama.service</code>ï¼Œå†™å…¥ï¼š</li>\n</ul>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\"></span><br><span class=\"line\">Description=Ollama Service</span><br><span class=\"line\"></span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\"></span><br><span class=\"line\">Type=simple</span><br><span class=\"line\"></span><br><span class=\"line\">User=root</span><br><span class=\"line\"></span><br><span class=\"line\"># ç»‘å®š4å¼ L4 GPUï¼Œå¼€å¯TensorRTåŠ é€Ÿ</span><br><span class=\"line\"></span><br><span class=\"line\">Environment=&quot;CUDA_VISIBLE_DEVICES=0,1,2,3&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Environment=&quot;OLLAMA_TENSORRT=1&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"># è‡ªå®šä¹‰æ¨¡å‹å­˜æ”¾è·¯å¾„ï¼Œé¿å…å æ»¡/root</span><br><span class=\"line\"></span><br><span class=\"line\">Environment=&quot;OLLAMA_MODELS=/share/public_db/ollama/models&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">ExecStart=/share/tools/ollama-0.13.3/ollama serve</span><br><span class=\"line\"></span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\"></span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>ç”Ÿæ•ˆé…ç½®ï¼š<code>systemctl daemon-reload &amp;&amp; systemctl enable --now ollama</code>ï¼›</p>\n</li>\n<li><p>éªŒè¯æœåŠ¡ï¼š<code>systemctl status ollama</code> æ˜¾ç¤º<code>active(running)</code>å³å¯ã€‚</p>\n</li>\n</ul>\n<h2 id=\"5ï¸âƒ£-ç¯å¢ƒå˜é‡-æ¨¡å‹è·¯å¾„ä¼˜åŒ–ï¼ˆé•¿æœŸä½¿ç”¨å¿…å¤‡ï¼‰\"><a href=\"#5ï¸âƒ£-ç¯å¢ƒå˜é‡-æ¨¡å‹è·¯å¾„ä¼˜åŒ–ï¼ˆé•¿æœŸä½¿ç”¨å¿…å¤‡ï¼‰\" class=\"headerlink\" title=\"5ï¸âƒ£ ç¯å¢ƒå˜é‡ + æ¨¡å‹è·¯å¾„ä¼˜åŒ–ï¼ˆé•¿æœŸä½¿ç”¨å¿…å¤‡ï¼‰\"></a>5ï¸âƒ£ ç¯å¢ƒå˜é‡ + æ¨¡å‹è·¯å¾„ä¼˜åŒ–ï¼ˆé•¿æœŸä½¿ç”¨å¿…å¤‡ï¼‰</h2><ul>\n<li>å…¨å±€é…ç½®ï¼ˆ&#x2F;etc&#x2F;profile æ–°å¢ï¼‰ï¼š</li>\n</ul>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export OLLAMA_MODELS=/share/public_db/ollama/models</span><br><span class=\"line\"></span><br><span class=\"line\">export OLLAMA_TENSORRT=1</span><br><span class=\"line\"></span><br><span class=\"line\">export GOPROXY=https://mirrors.aliyun.com/goproxy/,direct</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>ç”Ÿæ•ˆï¼š<code>source /etc/profile</code>ï¼›</p>\n</li>\n<li><p>æ¨¡å‹è·¯å¾„æƒé™ï¼ˆå¿…åšï¼ï¼‰ï¼š</p>\n</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p /share/public_db/ollama/models</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> 755 /share/public_db/ollama/models</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R root:root /share/public_db/ollama/models</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•ï¼š<code>ollama pull llama3:8b</code>ï¼Œæ¨¡å‹è‡ªåŠ¨å­˜åˆ°<code>/share/public_db/ollama/models</code>ï¼ŒéªŒè¯è·¯å¾„ç”Ÿæ•ˆã€‚</li>\n</ul>\n<h1 id=\"âœ…-æœ€ç»ˆæˆæœ\"><a href=\"#âœ…-æœ€ç»ˆæˆæœ\" class=\"headerlink\" title=\"âœ… æœ€ç»ˆæˆæœ\"></a>âœ… æœ€ç»ˆæˆæœ</h1><ul>\n<li><p>ç¯å¢ƒï¼šCentOS 7.9ï¼ˆglibc 2.17ï¼‰+ Go 1.24.4 + Ollama 0.13.3ï¼ˆåŸç”Ÿç¼–è¯‘ï¼‰ï¼›</p>\n</li>\n<li><p>ç¡¬ä»¶ï¼š4 å¼  L4 GPU æ»¡è´Ÿè½½è¿è¡Œï¼Œllama3:70bï¼ˆINT4 é‡åŒ–ï¼‰ï¼›</p>\n</li>\n<li><p>ç¨³å®šæ€§ï¼šå¼€æœºè‡ªå¯æ— æ•…éšœï¼ŒTensorRT åŠ é€ŸåŠ æŒï¼Œå»¶è¿Ÿå¤§å¹…é™ä½ã€‚</p>\n</li>\n</ul>\n<h1 id=\"ğŸš¨-å…³é”®é¿å‘ç‚¹\"><a href=\"#ğŸš¨-å…³é”®é¿å‘ç‚¹\" class=\"headerlink\" title=\"ğŸš¨ å…³é”®é¿å‘ç‚¹\"></a>ğŸš¨ å…³é”®é¿å‘ç‚¹</h1><ol>\n<li><p>Go è·¯å¾„ï¼šä¸åŒç”¨æˆ·å®‰è£…ä½ç½®ä¸åŒï¼Œç”¨<code>which go</code>è‡ªæŸ¥ï¼Œç¡®ä¿ PATH ä¼˜å…ˆæŒ‡å‘ Go 1.24.4ï¼›</p>\n</li>\n<li><p>ç¼–è¯‘è·¯å¾„ï¼šOllama 0.13.3 ä¸»å…¥å£æ˜¯<code>./main.go</code>ï¼Œåˆ«ç”¨<code>./cmd/ollama</code>ï¼ˆæŠ¥ç›®å½•ä¸å­˜åœ¨ï¼‰ï¼›</p>\n</li>\n<li><p>æƒé™ï¼šæ¨¡å‹è·¯å¾„å¿…é¡»æå‰èµ‹æƒï¼Œå¦åˆ™æ‹‰å–æ¨¡å‹æç¤ºæƒé™æ‹’ç»ï¼›</p>\n</li>\n<li><p>åŠ é€Ÿï¼šL4 GPU å¼€å¯ OLLAMA_TENSORRT&#x3D;1ï¼Œæ¨ç†æ•ˆç‡æå‡ 30%+ã€‚</p>\n</li>\n</ol>\n<p>è€ç³»ç»Ÿä¹Ÿèƒ½æ‹¿æå¤§æ¨¡å‹ï¼Go 1.24.4+Ollama 0.13.3 è¿™å¥—ç»„åˆï¼Œå®Œç¾é€‚é… CentOS 7.9ï¼Œ4 å¼  L4 GPU ç»ˆäºç‰©å°½å…¶ç”¨ï½ è½¬å‘ç»™åŒå¤„å¢ƒçš„æœ‹å‹ï¼Œå°‘èµ°å¼¯è·¯ï¼ğŸš€</p>\n<p>#CentOS7 #Ollama0.13.3 #Go1.24.4 #glibc2.17 #æºç ç¼–è¯‘ #NVIDIA L4 #å¤§æ¨¡å‹éƒ¨ç½²</p>\n","raw":null,"categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"ç³»ç»Ÿ","path":"api/tags/ç³»ç»Ÿ.json"}]},{"title":"åŠ è£… GPU å IB ç½‘å¡ï¼ˆib0ï¼‰æ¶ˆå¤±ï¼ŸCentOS 7 è‡ªåŠ¨æ¢å¤æ•™ç¨‹ï¼ˆäº²æµ‹æœ‰æ•ˆï¼‰","slug":"CentOS7åŠ è£…GPUåIBç½‘å¡è‡ªåŠ¨æ¢å¤æ•™ç¨‹","date":"2025-12-16T10:18:18.000Z","updated":"2025-12-16T10:19:38.816Z","comments":true,"path":"api/articles/CentOS7åŠ è£…GPUåIBç½‘å¡è‡ªåŠ¨æ¢å¤æ•™ç¨‹.json","excerpt":null,"keywords":null,"cover":null,"content":"<p>åœ¨é›†ç¾¤è¿ç»´ä¸­ï¼ŒIBï¼ˆInfiniBandï¼‰ç½‘å¡æ˜¯é«˜é€Ÿæ•°æ®ä¼ è¾“çš„æ ¸å¿ƒï¼Œä½†å¾ˆå¤šäººé‡åˆ°è¿‡è¿™æ ·çš„å‘ï¼šç»™æœåŠ¡å™¨åŠ è£… GPU æ‰©å±•å¡åï¼ŒåŸæœ¬æ­£å¸¸çš„ ib0 è®¾å¤‡çªç„¶æ¶ˆå¤±ï¼Œæ— æ³•é€šè¿‡ IB äº¤æ¢æœºä¸å…¶ä»–èŠ‚ç‚¹é€šä¿¡ã€‚æœ¬æ–‡ç»“åˆå®é™…æ¡ˆä¾‹ï¼Œè¯¦ç»†æ‹†è§£é—®é¢˜æ ¹æºï¼Œæä¾›ä¸€æ­¥åˆ°ä½çš„è‡ªåŠ¨ä¿®å¤æ–¹æ¡ˆï¼Œè®© ib0 å¼€æœºå³å¯ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚</p>\n<h1 id=\"ä¸€ã€é—®é¢˜èƒŒæ™¯\"><a href=\"#ä¸€ã€é—®é¢˜èƒŒæ™¯\" class=\"headerlink\" title=\"ä¸€ã€é—®é¢˜èƒŒæ™¯\"></a>ä¸€ã€é—®é¢˜èƒŒæ™¯</h1><ul>\n<li><p><strong>ç¯å¢ƒ</strong>ï¼šCentOS 7 æœåŠ¡å™¨ï¼ˆnode1ï¼‰ï¼Œæ­è½½ Mellanox ConnectX ç³»åˆ—åŒæ¨¡ç½‘å¡ï¼ˆæ”¯æŒ IB&#x2F;ETH æ¨¡å¼ï¼‰ï¼ŒåŸæœ¬å·²é…ç½® IB æ¨¡å¼ï¼ˆib0 è®¾å¤‡ï¼‰ï¼Œä¸å…¶ä»–èŠ‚ç‚¹é€šè¿‡ IB äº¤æ¢æœºå®ç° 20.20.20.0&#x2F;24 ç½‘æ®µé«˜é€Ÿé€šä¿¡ã€‚</p>\n</li>\n<li><p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šä¸ºæå‡ç®—åŠ›åŠ è£… GPU æ‰©å±•å¡åï¼Œæ‰§è¡Œ <code>ip link show ib0</code> æç¤º â€œDevice â€˜ib0â€™ does not existâ€ï¼ŒIB ç½‘å¡å¤±æ•ˆã€‚</p>\n</li>\n<li><p><strong>æ ¸å¿ƒéœ€æ±‚</strong>ï¼šæ¢å¤ ib0 è®¾å¤‡ï¼Œä¿æŒ IB ç½‘æ®µï¼ˆ20.20.20.0&#x2F;24ï¼‰è¿é€šæ€§ï¼Œå®ç°å¼€æœºè‡ªåŠ¨é…ç½®ï¼Œä¸å½±å“ GPU æ­£å¸¸å·¥ä½œã€‚</p>\n</li>\n</ul>\n<h1 id=\"äºŒã€é—®é¢˜æ ¹æºæ·±åº¦è§£æ\"><a href=\"#äºŒã€é—®é¢˜æ ¹æºæ·±åº¦è§£æ\" class=\"headerlink\" title=\"äºŒã€é—®é¢˜æ ¹æºæ·±åº¦è§£æ\"></a>äºŒã€é—®é¢˜æ ¹æºæ·±åº¦è§£æ</h1><p>åŠ è£… GPU å IB ç½‘å¡å¤±æ•ˆï¼Œå¹¶éç¡¬ä»¶æŸåï¼Œè€Œæ˜¯<strong>å¤šé‡è¿é”é—®é¢˜</strong>å¯¼è‡´ï¼š</p>\n<ol>\n<li><p><strong>PCIe èµ„æºå†²çª</strong>ï¼šGPU å ç”¨å¤§é‡ PCIe é€šé“ï¼Œå¯èƒ½è§¦å‘ BIOS é‡ç½® PCIe é…ç½®ï¼Œæˆ–å¯¼è‡´ IB ç½‘å¡çš„ PCIe èµ„æºè¢«å ç”¨ï¼Œé©±åŠ¨åŠ è½½å¼‚å¸¸ã€‚</p>\n</li>\n<li><p><strong>MLX_OFED é©±åŠ¨å†²çª</strong>ï¼šæœåŠ¡å™¨åŸæœ¬ä¾èµ– Mellanox å®˜æ–¹ OFED é©±åŠ¨å®ç° IB åŠŸèƒ½ï¼ŒåŠ è£… GPU åï¼Œç³»ç»ŸåŸç”Ÿ RDMA æ¨¡å—ï¼ˆrdma_cm&#x2F;rdma_ucmï¼‰ä¸ OFED é©±åŠ¨å†²çªï¼Œå¯¼è‡´ openibd æœåŠ¡å¯åŠ¨å¤±è´¥ï¼ˆçŠ¶æ€ç  3&#x2F;NOTIMPLEMENTEDï¼‰ï¼Œæ— æ³•åˆå§‹åŒ– IB è®¾å¤‡ã€‚</p>\n</li>\n<li><p><strong>IB æ¨¡å—æœªè‡ªåŠ¨åŠ è½½</strong>ï¼šopenibd æœåŠ¡å¤±æ•ˆåï¼ŒMLX5 IB æ ¸å¿ƒæ¨¡å—ï¼ˆmlx5_ibï¼‰ã€IB åè®®æ¨¡å—ï¼ˆib_ipoib ç­‰ï¼‰æ— æ³•å¼€æœºè‡ªåŠ¨åŠ è½½ï¼ŒIB ç½‘å¡è™½è¢«è¯†åˆ«ä½†æœªç”Ÿæˆ ib0 è®¾å¤‡ã€‚</p>\n</li>\n</ol>\n<h1 id=\"ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šsystemd-æœåŠ¡å®ç°-ib0-è‡ªåŠ¨åˆå§‹åŒ–\"><a href=\"#ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šsystemd-æœåŠ¡å®ç°-ib0-è‡ªåŠ¨åˆå§‹åŒ–\" class=\"headerlink\" title=\"ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šsystemd æœåŠ¡å®ç° ib0 è‡ªåŠ¨åˆå§‹åŒ–\"></a>ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šsystemd æœåŠ¡å®ç° ib0 è‡ªåŠ¨åˆå§‹åŒ–</h1><p>æ— éœ€ä¿®å¤å¤æ‚çš„é©±åŠ¨å†²çªï¼Œä¹Ÿä¸ç”¨æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œé€šè¿‡åˆ›å»º systemd æœåŠ¡ï¼Œå®ç° â€œåŠ è½½æ¨¡å—â†’åˆ›å»º ib0â†’é…ç½® IPâ€ å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼Œé‡å¯åä¾ç„¶ç”Ÿæ•ˆã€‚</p>\n<h2 id=\"æ­¥éª¤-1ï¼šåˆ›å»º-systemd-æœåŠ¡æ–‡ä»¶\"><a href=\"#æ­¥éª¤-1ï¼šåˆ›å»º-systemd-æœåŠ¡æ–‡ä»¶\" class=\"headerlink\" title=\"æ­¥éª¤ 1ï¼šåˆ›å»º systemd æœåŠ¡æ–‡ä»¶\"></a>æ­¥éª¤ 1ï¼šåˆ›å»º systemd æœåŠ¡æ–‡ä»¶</h2><p>åˆ›å»º<code>ib0-init.service</code>æœåŠ¡ï¼Œé€‚é… CentOS 7 è€ç‰ˆæœ¬è¯­æ³•ï¼Œé¿å…å‚æ•°æŠ¥é”™ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi /etc/systemd/system/ib0-init.service</span><br></pre></td></tr></table></figure>\n\n<p>ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼ˆæ ¸å¿ƒå…¼å®¹è€ç‰ˆæœ¬ iproute2ï¼Œæ— <code>parent</code>å‚æ•°ï¼‰ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Initialize IB0 device (CentOS 7 iproute2 compatible)</span><br><span class=\"line\">After=network.target  # ç¡®ä¿ç½‘ç»œæœåŠ¡å¯åŠ¨åå†æ‰§è¡Œ</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=oneshot  # ä¸€æ¬¡æ€§æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¿æŒçŠ¶æ€</span><br><span class=\"line\"># æ ¸å¿ƒå‘½ä»¤ï¼šåŠ è½½IBæ¨¡å—â†’åˆ›å»ºib0â†’å¯ç”¨è®¾å¤‡â†’é…ç½®20ç½‘æ®µIP</span><br><span class=\"line\">ExecStart=/bin/bash -c &quot;modprobe mlx5_ib; modprobe ib_core; modprobe ib_cm; modprobe ib_ipoib; ip link add ib0 type ipoib; ip link set ib0 up; ip addr add 20.20.20.109/24 dev ib0&quot;</span><br><span class=\"line\"># åœæ­¢å‘½ä»¤ï¼šåˆ é™¤ib0â†’å¸è½½æ¨¡å—ï¼ˆå¯é€‰ï¼‰</span><br><span class=\"line\">ExecStop=/bin/bash -c &quot;ip link delete ib0; modprobe -r ib_ipoib ib_cm ib_core mlx5_ib&quot;</span><br><span class=\"line\">RemainAfterExit=yes  # æ‰§è¡Œå®Œåä¿æŒæœåŠ¡æ´»è·ƒçŠ¶æ€</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target  # å¤šç”¨æˆ·æ¨¡å¼ä¸‹ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¯´æ˜ï¼š<code>20.20.20.101/24</code> éœ€æ›¿æ¢ä¸ºä½ çš„ IB ç½‘æ®µ IPï¼ˆä¸å…¶ä»–èŠ‚ç‚¹ä¿æŒåŒç½‘æ®µï¼‰ï¼›è‹¥é›†ç¾¤ IB åˆ†åŒºä½¿ç”¨ PKEYï¼ˆå¦‚ 0x8001ï¼‰ï¼Œå¯åœ¨<code>ip link add ib0 type ipoib</code>åæ·»åŠ <code>pkey 0x8001</code>ã€‚</li>\n</ul>\n<h2 id=\"æ­¥éª¤-2ï¼šå¯ç”¨å¹¶å¯åŠ¨æœåŠ¡\"><a href=\"#æ­¥éª¤-2ï¼šå¯ç”¨å¹¶å¯åŠ¨æœåŠ¡\" class=\"headerlink\" title=\"æ­¥éª¤ 2ï¼šå¯ç”¨å¹¶å¯åŠ¨æœåŠ¡\"></a>æ­¥éª¤ 2ï¼šå¯ç”¨å¹¶å¯åŠ¨æœåŠ¡</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># é‡æ–°åŠ è½½systemdé…ç½®ï¼Œè®©æ–°æœåŠ¡ç”Ÿæ•ˆ</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\"></span><br><span class=\"line\"># è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆå…³é”®ï¼é‡å¯åè‡ªåŠ¨æ‰§è¡Œï¼‰</span><br><span class=\"line\">sudo systemctl enable ib0-init.service</span><br><span class=\"line\"></span><br><span class=\"line\"># ç«‹å³å¯åŠ¨æœåŠ¡ï¼Œæ— éœ€é‡å¯</span><br><span class=\"line\">sudo systemctl start ib0-init.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ­¥éª¤-3ï¼šéªŒè¯-ib0-æ˜¯å¦åˆ›å»ºæˆåŠŸ\"><a href=\"#æ­¥éª¤-3ï¼šéªŒè¯-ib0-æ˜¯å¦åˆ›å»ºæˆåŠŸ\" class=\"headerlink\" title=\"æ­¥éª¤ 3ï¼šéªŒè¯ ib0 æ˜¯å¦åˆ›å»ºæˆåŠŸ\"></a>æ­¥éª¤ 3ï¼šéªŒè¯ ib0 æ˜¯å¦åˆ›å»ºæˆåŠŸ</h2><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®è®¤é…ç½®ç”Ÿæ•ˆï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 1. æ£€æŸ¥ib0è®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼ˆçŠ¶æ€UPä¸ºæ­£å¸¸ï¼‰</span><br><span class=\"line\">ip link show ib0</span><br><span class=\"line\"># é¢„æœŸè¾“å‡ºï¼š</span><br><span class=\"line\"># 4: ib0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 4096 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000</span><br><span class=\"line\">#    link/ib 00:00:00:00:00:00:00:00 brd 00:00:00:00:00:00:00:00</span><br><span class=\"line\"></span><br><span class=\"line\"># 2. æ£€æŸ¥IBç½‘æ®µIPæ˜¯å¦é…ç½®æˆåŠŸ</span><br><span class=\"line\">ip addr show ib0 | grep 20.20.20.</span><br><span class=\"line\"># é¢„æœŸè¾“å‡ºï¼šinet 20.20.20.101/24 scope global ib0</span><br><span class=\"line\"></span><br><span class=\"line\"># 3. æµ‹è¯•ä¸å…¶ä»–IBèŠ‚ç‚¹çš„è¿é€šæ€§ï¼ˆå¦‚node2çš„20.20.20.107ï¼‰</span><br><span class=\"line\">ping 20.20.20.107 -c 3</span><br><span class=\"line\"># è¾“å‡ºâ€œ3 packets transmitted, 3 receivedâ€å³ä¸ºè¿é€šæ­£å¸¸</span><br><span class=\"line\"></span><br><span class=\"line\"># 4. éªŒè¯NFSç­‰ä¾èµ–IBçš„æœåŠ¡ï¼ˆè‹¥æœ‰ï¼‰</span><br><span class=\"line\">sudo mount -a</span><br><span class=\"line\">df -h /share  # ç¡®è®¤IBç½‘æ®µNFSæŒ‚è½½æ­£å¸¸</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ­¥éª¤-4ï¼šé‡å¯éªŒè¯æ°¸ä¹…ç”Ÿæ•ˆ\"><a href=\"#æ­¥éª¤-4ï¼šé‡å¯éªŒè¯æ°¸ä¹…ç”Ÿæ•ˆ\" class=\"headerlink\" title=\"æ­¥éª¤ 4ï¼šé‡å¯éªŒè¯æ°¸ä¹…ç”Ÿæ•ˆ\"></a>æ­¥éª¤ 4ï¼šé‡å¯éªŒè¯æ°¸ä¹…ç”Ÿæ•ˆ</h2><p>ä¸ºç¡®ä¿é‡å¯åä¸å¤±æ•ˆï¼Œæ‰§è¡Œé‡å¯æµ‹è¯•ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo reboot</span><br></pre></td></tr></table></figure>\n\n<p>é‡å¯åå†æ¬¡æ‰§è¡Œ<code>ip link show ib0</code>å’Œ<code>ping ``20.20.20.101</code>ï¼Œè‹¥ ib0 å­˜åœ¨ä¸”è¿é€šæ­£å¸¸ï¼Œè¯´æ˜æœåŠ¡é…ç½®æˆåŠŸã€‚</p>\n<h1 id=\"å››ã€å…³é”®è¡¥å……ï¼šé¿å‘æŒ‡å—\"><a href=\"#å››ã€å…³é”®è¡¥å……ï¼šé¿å‘æŒ‡å—\" class=\"headerlink\" title=\"å››ã€å…³é”®è¡¥å……ï¼šé¿å‘æŒ‡å—\"></a>å››ã€å…³é”®è¡¥å……ï¼šé¿å‘æŒ‡å—</h1><ol>\n<li><p><strong>æ¨¡å—åŠ è½½é¡ºåºä¸èƒ½ä¹±</strong>ï¼šå¿…é¡»å…ˆåŠ è½½<code>mlx5_ib</code>ï¼ˆMLX5 ç½‘å¡ä¸“ç”¨ IB æ¨¡å—ï¼‰ï¼Œå†åŠ è½½<code>ib_core</code>ç­‰åè®®æ¨¡å—ï¼Œå¦åˆ™ä¼šå¯¼è‡´è®¾å¤‡åˆ›å»ºå¤±è´¥ã€‚</p>\n</li>\n<li><p><strong>è‹¥ ib0 ä»æœªåˆ›å»º</strong>ï¼š</p>\n</li>\n</ol>\n<ul>\n<li><p>æ‰§è¡Œ<code>ibv_devinfo</code>æ£€æŸ¥ç‰©ç† IB è®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼ˆå¦‚ mlx5_0ï¼‰ï¼Œè‹¥æ— è¾“å‡ºï¼Œéœ€é‡æ–°å®‰è£… Mellanox OFED é©±åŠ¨ï¼ˆå…¼å®¹ GPU é©±åŠ¨ç‰ˆæœ¬ï¼‰ã€‚</p>\n</li>\n<li><p>æ’æŸ¥ IB çº¿ç¼†æ˜¯å¦æ’ç´§ã€IB äº¤æ¢æœºå¯¹åº”ç«¯å£æ˜¯å¦å¯ç”¨ï¼ˆç‰©ç†é“¾è·¯ä¸­æ–­ä¹Ÿä¼šå¯¼è‡´ ib0 åˆ›å»ºå¤±è´¥ï¼‰ã€‚</p>\n</li>\n</ul>\n<ol>\n<li><p><strong>GPU ä¸ IB ç½‘å¡èµ„æºå†²çª</strong>ï¼šè‹¥é‡å¯å GPU å¤±æ•ˆï¼Œéœ€è¿›å…¥ BIOS è°ƒæ•´ PCIe é€šé“åˆ†é…ï¼Œå°† IB ç½‘å¡å’Œ GPU åˆ†é…åˆ°ä¸åŒçš„ PCIe æ ¹å¤åˆä½“ï¼Œé¿å…èµ„æºç«äº‰ã€‚</p>\n</li>\n<li><p><strong>å…œåº•æ–¹æ¡ˆ</strong>ï¼šè‹¥ IB æ¨¡å¼å§‹ç»ˆæ— æ³•æ¢å¤ï¼Œå¯æ²¿ç”¨ä»¥å¤ªç½‘è½¬å‘æ–¹æ¡ˆï¼ˆæ— éœ€ ib0ï¼‰ï¼š</p>\n</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;20.20.20.0/24 via 10.20.0.1 dev eno1 metric 200&quot; &gt;&gt; /etc/sysconfig/network-scripts/route-eno1</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl restart network</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"äº”ã€æ€»ç»“\"><a href=\"#äº”ã€æ€»ç»“\" class=\"headerlink\" title=\"äº”ã€æ€»ç»“\"></a>äº”ã€æ€»ç»“</h1><p>åŠ è£… GPU å IB ç½‘å¡å¤±æ•ˆçš„æ ¸å¿ƒæ˜¯ â€œé©±åŠ¨å†²çª + æ¨¡å—æœªè‡ªåŠ¨åŠ è½½â€ï¼Œé€šè¿‡ systemd æœåŠ¡å¯å®Œç¾è§£å†³ï¼šæ— éœ€ä¿®æ”¹ BIOSã€ä¸å¸è½½ GPU é©±åŠ¨ï¼Œä»…éœ€ 3 æ­¥é…ç½®ï¼Œå³å¯å®ç° ib0 å¼€æœºè‡ªåŠ¨åˆ›å»ºã€IP è‡ªåŠ¨é…ç½®ï¼Œæ¢å¤ IB é«˜é€Ÿä¼ è¾“åŠŸèƒ½ã€‚</p>\n<p>è¯¥æ–¹æ¡ˆå·²åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œé€‚é… CentOS 7 æ‰€æœ‰ç‰ˆæœ¬ï¼Œå…¼å®¹ Mellanox ConnectX-4&#x2F;5&#x2F;6 ç³»åˆ—ç½‘å¡ã€‚å¦‚æœé‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€äº¤æµï¼Œåˆ†äº«ä½ çš„æ’æŸ¥ç»éªŒï¼</p>\n","raw":null,"categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"ç³»ç»Ÿ","path":"api/tags/ç³»ç»Ÿ.json"}]},{"title":"WSLå®‰è£…Dockeré¿å‘æŒ‡åŒ—","slug":"WSLå®‰è£…Dockeré¿å‘æŒ‡åŒ—","date":"2022-03-10T02:43:42.000Z","updated":"2024-03-11T13:07:17.000Z","comments":true,"path":"api/articles/WSLå®‰è£…Dockeré¿å‘æŒ‡åŒ—.json","excerpt":null,"keywords":null,"cover":"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg","content":"<h1 id=\"å‡çº§WSL\"><a href=\"#å‡çº§WSL\" class=\"headerlink\" title=\"å‡çº§WSL\"></a>å‡çº§WSL</h1><ul>\n<li><p>æŸ¥çœ‹å·²å®‰è£…çš„WSLç‰ˆæœ¬(Windows PowerShellä¸­è¿è¡Œ)</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl.exe -l -v</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>  æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>\n  <figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  NAME                   STATE           VERSION</span><br><span class=\"line\">* Ubuntu-20.04           Running         1</span><br><span class=\"line\">  docker-desktop-data    Stopped         2</span><br></pre></td></tr></table></figure>\n<p>  çœ‹åˆ°å®‰è£…çš„ä¸ºWSL1ï¼Œæ®è¯´WSL1ä¸æ”¯æŒDockerï¼Œæ‰€ä»¥æ¢æˆWSL2ï¼Œè‡³äºWSL1 å’ŒWSL2çš„å¼‚åŒå¯å‚è€ƒ<a href=\"https://docs.microsoft.com/zh-cn/windows/wsl/compare-versions\">æ¯”è¾ƒ WSL 1 å’Œ WSL 2</a>ã€‚</p>\n</li>\n<li><p>å®‰è£…WSL2 (Windows PowerShellä¸­è¿è¡Œ)</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl.exe --set-version ubuntu-20.04 2</span><br></pre></td></tr></table></figure>\n<p>  æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>\n  <figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">æ­£åœ¨è¿›è¡Œè½¬æ¢ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´...</span><br><span class=\"line\">æœ‰å…³ä¸ WSL 2 çš„ä¸»è¦åŒºåˆ«çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2</span><br><span class=\"line\">è½¬æ¢å®Œæˆã€‚</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"å®‰è£…Docker\"><a href=\"#å®‰è£…Docker\" class=\"headerlink\" title=\"å®‰è£…Docker\"></a>å®‰è£…Docker</h1><p>åœ¨WSLä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get remove docker docker-engine docker.io</span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install apt-transport-https ca-certificates curl software-properties-common</span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class=\"line\">sudo apt-key fingerprint 0EBFCD88</span><br><span class=\"line\">sudo add-apt-repository <span class=\"string\">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span></span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install docker-ce</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Rootç”¨æˆ·å¯åŠ¨Docker\"><a href=\"#Rootç”¨æˆ·å¯åŠ¨Docker\" class=\"headerlink\" title=\"Rootç”¨æˆ·å¯åŠ¨Docker\"></a>Rootç”¨æˆ·å¯åŠ¨Docker</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo su</span><br><span class=\"line\"><span class=\"built_in\">export</span> DOCKER_HOST=tcp://localhost:2375</span><br><span class=\"line\">service docker start</span><br></pre></td></tr></table></figure>\n<p>æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* Starting Docker: docker</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"æµ‹è¯•-è¿˜æ˜¯åœ¨rootç”¨æˆ·\"><a href=\"#æµ‹è¯•-è¿˜æ˜¯åœ¨rootç”¨æˆ·\" class=\"headerlink\" title=\"æµ‹è¯•(è¿˜æ˜¯åœ¨rootç”¨æˆ·)\"></a>æµ‹è¯•(è¿˜æ˜¯åœ¨rootç”¨æˆ·)</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker version</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"æŠ¥é”™\"><a href=\"#æŠ¥é”™\" class=\"headerlink\" title=\"æŠ¥é”™\"></a>æŠ¥é”™</h1><p>ä»¥ä¸‹æ˜¯æŠ¥é”™ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Client: Docker Engine - Community</span><br><span class=\"line\"> Version:           20.10.12</span><br><span class=\"line\"> API version:       1.41</span><br><span class=\"line\"> Go version:        go1.16.12</span><br><span class=\"line\"> Git commit:        e91ed57</span><br><span class=\"line\"> Built:             Mon Dec 13 11:45:33 2021</span><br><span class=\"line\"> OS/Arch:           linux/amd64</span><br><span class=\"line\"> Context:           default</span><br><span class=\"line\"> Experimental:      true</span><br><span class=\"line\">Cannot connect to the Docker daemon at tcp://localhost:2375. Is the docker daemon running?</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ä¿®å¤\"><a href=\"#ä¿®å¤\" class=\"headerlink\" title=\"ä¿®å¤\"></a>ä¿®å¤</h1><p><strong>å›åˆ°æ™®é€šç”¨æˆ·è¿è¡Œ</strong></p>\n<ul>\n<li><p>ç¼–è¾‘ç¯å¢ƒå˜é‡</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ~/.bashrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åœ¨æœ€ä¸‹é¢æ·»åŠ ä¸€è¡Œï¼š</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> DOCKER_HOST=<span class=\"string\">&#x27;unix:///var/run/docker.sock&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å†æ¬¡æµ‹è¯•</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker version</span><br></pre></td></tr></table></figure>\n<p>  æ˜¾ç¤ºå¦‚ä¸‹è¡¨æ˜æˆåŠŸï¼š</p>\n  <figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Client: Docker Engine - Community</span><br><span class=\"line\"> Version:           20.10.12</span><br><span class=\"line\"> API version:       1.41</span><br><span class=\"line\"> Go version:        go1.16.12</span><br><span class=\"line\"> Git commit:        e91ed57</span><br><span class=\"line\"> Built:             Mon Dec 13 11:45:33 2021</span><br><span class=\"line\"> OS/Arch:           linux/amd64</span><br><span class=\"line\"> Context:           default</span><br><span class=\"line\"> Experimental:      true</span><br><span class=\"line\"></span><br><span class=\"line\">Server: Docker Engine - Community</span><br><span class=\"line\"> Engine:</span><br><span class=\"line\">  Version:          20.10.12</span><br><span class=\"line\">  API version:      1.41 (minimum version 1.12)</span><br><span class=\"line\">  Go version:       go1.16.12</span><br><span class=\"line\">  Git commit:       459d0df</span><br><span class=\"line\">  Built:            Mon Dec 13 11:43:42 2021</span><br><span class=\"line\">  OS/Arch:          linux/amd64</span><br><span class=\"line\">  Experimental:     false</span><br><span class=\"line\"> containerd:</span><br><span class=\"line\">  Version:          1.4.13</span><br><span class=\"line\">  GitCommit:        9cc61520f4cd876b86e77edfeb88fbcd536d1f9d</span><br><span class=\"line\"> runc:</span><br><span class=\"line\">  Version:          1.0.3</span><br><span class=\"line\">  GitCommit:        v1.0.3-0-gf46b6ba</span><br><span class=\"line\"> docker-init:</span><br><span class=\"line\">  Version:          0.19.0</span><br><span class=\"line\">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h1><ul>\n<li><a href=\"https://blog.csdn.net/qq_44701736/article/details/119411485\">WSLå®‰è£…docker</a></li>\n<li><a href=\"https://www.jianshu.com/p/7c0084fd9003\">Cannot connect to the Docker daemon at tcp:&#x2F;&#x2F;localhost:2375. Is the docker daemon running?</a></li>\n</ul>\n<h1 id=\"ä»£ç è·å–\"><a href=\"#ä»£ç è·å–\" class=\"headerlink\" title=\"ä»£ç è·å–\"></a>ä»£ç è·å–</h1><p>å…³æ³¨å…¬ä¼—å·â€œç”Ÿä¿¡ä¹‹å·…â€ï¼ŒèŠå¤©çª—å£å›å¤â€œâ€è·å–ä¸‹è½½é“¾æ¥ã€‚</p>\n<table align=\"center\"><tr>\n  <td align=\"center\"><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/ç”Ÿä¿¡ä¹‹å·…å…¬ä¼—å·.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç”Ÿä¿¡ä¹‹å·…å¾®ä¿¡å…¬ä¼—å·\" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-right: 0px;margin-bottom: 5px;align: center;\"></td>\n  <td align=\"center\"><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/social/å°ç¨‹åºç .png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç”Ÿä¿¡ä¹‹å·…å°ç¨‹åºç \" style=\"width: 100px;height: 100px;vertical-align: -20px;border-radius: 0%;margin-left: 0px;margin-bottom: 5px;align: center\"></td>\n</tr></table>\n\n\n<p><font color=\"#FF0000\"><ruby><b>æ•¬å‘Š</b>ï¼šä½¿ç”¨æ–‡ä¸­è„šæœ¬è¯·å¼•ç”¨æœ¬æ–‡ç½‘å€ï¼Œè¯·å°Šé‡æœ¬äººçš„åŠ³åŠ¨æˆæœï¼Œè°¢è°¢ï¼<rt><b>Notice</b>: When you use the scripts in this article, please cite the link of this webpage. Thank you!</rt></ruby></font></p>\n","raw":null,"categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"ç³»ç»Ÿ","path":"api/tags/ç³»ç»Ÿ.json"},{"name":"è™šæ‹Ÿæœº","path":"api/tags/è™šæ‹Ÿæœº.json"}]},{"title":"windows 10 ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ","slug":"windows-10-ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ","date":"2019-03-01T13:53:01.000Z","updated":"2024-03-11T13:07:17.000Z","comments":true,"path":"api/articles/windows-10-ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ.json","excerpt":null,"keywords":null,"cover":"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_1.png","content":"<p>å®‰è£…çš„è‹±æ–‡åŸç‰ˆç³»ç»Ÿï¼Œå¯¼è‡´å¤šæ•°ä¸­æ–‡ä¹±ç ï¼Œå³ä¾¿æ˜¯å®‰è£…äº†ä¸­æ–‡è¯­è¨€åŒ…ï¼Œå¦‚æœè®¾ç½®é”™è¯¯ï¼Œä»æ—§æ— æ³•æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ã€‚</p>\n<span id=\"more\"></span>\n<p>è¿›å…¥æ­£é¢˜ï¼ŒæŒ‰å¦‚å›¾æ‰€ç¤ºä¸€æ­¥æ­¥å®Œæˆè®¾ç½®ï¼Œé‡å¯ç³»ç»Ÿä¾¿å¯è§£å†³é—®é¢˜ã€‚æˆ‘çš„ç³»ç»Ÿæ˜¯18845.1001ç‰ˆæœ¬ï¼Œå…¶ä»–ç‰ˆæœ¬åº”è¯¥ä¸ä¼šå·®åˆ«å¤ªå¤§ã€‚</p>\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_1.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_1.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"é€šè¿‡å¼€å§‹èœå•è¿›å…¥æ§åˆ¶é¢æ¿\"></p>\n<center>é€šè¿‡å¼€å§‹èœå•è¿›å…¥æ§åˆ¶é¢æ¿</center>\n\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_2.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_2.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"æ—¥æœŸã€æ—¶é—´å’ŒåŒºåŸŸæ ¼å¼è®¾ç½®\"></p>\n<center>æ—¥æœŸã€æ—¶é—´å’ŒåŒºåŸŸæ ¼å¼è®¾ç½®</center>\n\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_3.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_3.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ä¸‹æ‹‰ç›¸å…³è®¾ç½®\"></p>\n<center>ä¸‹æ‹‰ç›¸å…³è®¾ç½®</center>\n\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_4.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_4.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"é€‰æ‹©åŒºåŸŸ\"></p>\n<center>é€‰æ‹©åŒºåŸŸ</center>\n\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_5.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_5.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"ç®¡ç†-æ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®\"></p>\n<center>ç®¡ç†-æ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®</center>\n\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_6.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_6.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"è®¾ç½®ä¸ºä¸­æ–‡ï¼Œä¸è¦é€‰æ‹©Betaç‰ˆ\"></p>\n<center>è®¾ç½®ä¸ºä¸­æ–‡ï¼Œä¸è¦é€‰æ‹©Betaç‰ˆ</center>\n\n<p><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_7.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/news/control_panel_7.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"å¤åˆ¶è®¾ç½®\"></p>\n<center>å¤åˆ¶è®¾ç½®</center>\n","raw":null,"categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"ç³»ç»Ÿ","path":"api/tags/ç³»ç»Ÿ.json"}]},{"title":"è·å–ä¸‹ä¸€ç‰ˆæœ¬çš„å†…éƒ¨é¢„è§ˆç‰ˆwindowsç³»ç»Ÿ","slug":"è·å–ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„å†…éƒ¨é¢„è§ˆç‰ˆwindowsç³»ç»Ÿ","date":"2019-02-17T11:19:04.000Z","updated":"2024-03-11T13:07:17.000Z","comments":true,"path":"api/articles/è·å–ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„å†…éƒ¨é¢„è§ˆç‰ˆwindowsç³»ç»Ÿ.json","excerpt":null,"keywords":null,"cover":"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/papers/skip_user.png","content":"<p>Windowså†…éƒ¨é¢„è§ˆç‰ˆç³»ç»Ÿå¿«é€Ÿé€šé“å·²ç»å…³é—­ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨ä»¥è·å–ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„Windowsã€‚</p>\n<span id=\"more\"></span>\n\n<ol>\n<li><p>é¦–å…ˆï¼Œæ‚¨å¿…é¡»å·²ç»æ˜¯Windows Insideræ‰èƒ½åˆ©ç”¨è¿™ä¸€æŠ€å·§ã€‚ å¦‚æœæ‚¨æ˜¯Windows Insiderï¼Œç‚¹å‡»â€œè®¾ç½®â€â†’â€œæ›´æ–°å’Œå®‰å…¨â€â†’â€œWindowsé¢„è§ˆä½“éªŒè®¡åˆ’â€ï¼Œå°†â€œä½ å¸Œæœ›æ¥æ”¶å“ªç±»å†…å®¹â€ä¸€é¡¹è®¾ç½®ä¸ºâ€œè·³åˆ°ä¸‹ä¸€ä¸ªWindowsç‰ˆæœ¬â€ã€‚æ³¨æ„ï¼šè°ƒæ•´å®Œè¯¥é€‰é¡¹æ—¶è¯·ä¿æŒçª—å£ä¸åŠ¨ï¼Œå³ä¸è¦å…³é—­ä¹Ÿä¸è¦åˆ‡æ¢å…¶ä»–é¢æ¿ï¼›</p>\n</li>\n<li><p>å¯åŠ¨æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼ˆç‚¹å‡»å¼€å§‹èœå•å·¦ä¸‹è§’æœç´¢æ¡†ï¼Œè¾“å…¥â€œregeditâ€è¿›å…¥æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼‰ï¼Œ æ‰¾åˆ°ï¼š</p>\n</li>\n</ol>\n<p>HKEY_LOCAL_MACHINE\\SOFTWARE \\Microsoft\\WindowsSelfHost\\UI\\Selection</p>\n<p>åŒå‡»â€œUIContentTypeâ€å¹¶å°†å…¶æ›´æ”¹ä¸ºâ€œSkipâ€ã€‚ ç„¶åï¼Œæ‚¨åº”è¯¥æ‰¾åˆ°â€œUIRingâ€å¹¶å°†å…¶æ›´æ”¹ä¸ºâ€œWIFâ€ã€‚</p>\n<ol start=\"3\">\n<li>ç„¶åæ‰¾åˆ°ï¼š</li>\n</ol>\n<p>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\WindowsSelfHost\\Applicability</p>\n<p>å°†â€œRingâ€çš„å€¼æ”¹ä¸ºâ€œWIFâ€ï¼Œâ€œContent Typeâ€å’ŒContentBackupçš„å€¼æ›´æ”¹ä¸ºâ€œSkipâ€ã€‚</p>\n<ol start=\"4\">\n<li><p>é€€å›â€œWindowsé¢„è§ˆä½“éªŒè®¡åˆ’â€é¢æ¿ï¼Œéšä¾¿ç‚¹å‡»ä¸€ä¸ªæ ‡ç­¾å†åˆ‡æ¢å›æ¥ï¼Œå¦‚æœæ‰“å¼€åä¾æ—§å›ºå®šåœ¨â€œè·³åˆ°ä¸‹ä¸€ä¸ªWindowsç‰ˆæœ¬â€é€‰é¡¹ï¼Œå³ä»£è¡¨ä¸Šè½¦æˆåŠŸï¼<br><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/papers/skip_user.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/papers/skip_user.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"Skipç”¨æˆ·\"></p>\n<center>Skipç”¨æˆ·</center>\n\n</li>\n<li><p>ç‚¹å‡»â€œWindowsæ›´æ–°â€â†’â€œæ£€æŸ¥æ›´æ–°â€ï¼Œè·å–æ–°ç‰ˆæœ¬ç³»ç»Ÿ<br><img src=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/papers/skip_user2.png\" class=\"lazyload placeholder\" data-srcset=\"https://fastly.jsdelivr.net/gh/liaochenlanruo/cdn@master/img/custom/papers/skip_user2.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"Skipç”¨æˆ·çš„æ›´æ–°ç•Œé¢\"></p>\n<center>Skipç”¨æˆ·çš„æ›´æ–°ç•Œé¢</center></li>\n</ol>\n","raw":null,"categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[{"name":"ç³»ç»Ÿ","path":"api/tags/ç³»ç»Ÿ.json"}]}]}